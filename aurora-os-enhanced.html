<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aurora OS ‚Ä¢ MysticSoft</title>
    <link href="https://fonts.googleapis.com/css2?family=Alice&family=VT323&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        
        :root {
            /* Tema Aurora Sagrada */
            --vinho: #3e0a29;
            --verde-claro: #b2d1b1;
            --azul-escuro: #0b1836;
            --dourado: #f0aa53;
            --pergaminho: #f2eaff;
            
            /* Vari√°veis de tema din√¢micas */
            --theme-bg: linear-gradient(135deg, var(--azul-escuro) 0%, var(--vinho) 100%);
            --theme-taskbar: var(--vinho);
            --theme-start-btn: var(--vinho);
            --theme-start-text: var(--dourado);
            --theme-clock: var(--dourado);
            --theme-window-header: var(--azul-escuro);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'MS Sans Serif', sans-serif;
            font-size: 11px;
            background: var(--theme-bg);
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }
        
        /* Telas de Boot e Boas-vindas */
        .boot-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--azul-escuro) 0%, #000 50%, var(--vinho) 100%);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--pergaminho);
            opacity: 1;
            transition: opacity 1s ease-out;
        }
        
        .boot-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .boot-logo {
            font-size: 48px;
            margin-bottom: 20px;
            animation: logoGlow 2s ease-in-out infinite;
            text-shadow: 0 0 20px var(--dourado);
        }
        
        @keyframes logoGlow {
            0%, 100% { 
                filter: drop-shadow(0 0 10px var(--dourado));
                transform: scale(1);
            }
            50% { 
                filter: drop-shadow(0 0 30px var(--dourado));
                transform: scale(1.05);
            }
        }
        
        .boot-title {
            font-family: 'Alice', serif;
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--dourado);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            animation: titleFade 3s ease-in-out;
        }
        
        @keyframes titleFade {
            0% { opacity: 0; transform: translateY(20px); }
            50% { opacity: 1; transform: translateY(0); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        .boot-subtitle {
            font-family: 'Alice', serif;
            font-size: 16px;
            color: var(--verde-claro);
            margin-bottom: 40px;
            font-style: italic;
            animation: subtitleFade 3s ease-in-out 0.5s both;
        }
        
        @keyframes subtitleFade {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        .boot-progress {
            width: 300px;
            height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 1px solid var(--dourado);
        }
        
        .boot-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--dourado), var(--verde-claro));
            width: 0%;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px var(--dourado);
        }
        
        .boot-status {
            font-size: 12px;
            color: var(--pergaminho);
            opacity: 0.8;
            animation: statusPulse 2s ease-in-out infinite;
        }
        
        @keyframes statusPulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--azul-escuro) 0%, var(--vinho) 100%);
            z-index: 9998;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--pergaminho);
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }
        
        .welcome-screen.active {
            display: flex;
            opacity: 1;
        }
        
        .welcome-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .welcome-content {
            text-align: center;
            max-width: 600px;
            padding: 40px;
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            border: 2px solid var(--dourado);
            box-shadow: 0 0 30px rgba(240, 170, 83, 0.3);
            animation: welcomeFloat 0.8s ease-out;
        }
        
        @keyframes welcomeFloat {
            0% { 
                opacity: 0; 
                transform: translateY(50px) scale(0.9); 
            }
            100% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }
        
        .welcome-gatomante {
            font-size: 64px;
            margin-bottom: 20px;
            position: relative;
            display: inline-block;
            animation: gatomanteWelcome 2s ease-in-out infinite;
        }
        
        @keyframes gatomanteWelcome {
            0%, 100% { transform: translateY(0px) rotate(-2deg); }
            50% { transform: translateY(-10px) rotate(2deg); }
        }
        
        .welcome-gatomante::after {
            content: 'üëì';
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            color: var(--dourado);
            animation: glassesSparkle 3s ease-in-out infinite;
        }
        
        @keyframes glassesSparkle {
            0%, 100% { 
                filter: drop-shadow(0 0 5px var(--dourado));
                opacity: 1;
            }
            50% { 
                filter: drop-shadow(0 0 15px var(--dourado));
                opacity: 0.7;
            }
        }
        
        .welcome-title {
            font-family: 'Alice', serif;
            font-size: 28px;
            color: var(--dourado);
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }
        
        .welcome-message {
            font-family: 'Alice', serif;
            font-size: 16px;
            line-height: 1.6;
            color: var(--pergaminho);
            margin-bottom: 30px;
            font-style: italic;
        }
        
        .welcome-button {
            background: linear-gradient(135deg, var(--vinho), var(--azul-escuro));
            color: var(--dourado);
            border: 2px solid var(--dourado);
            padding: 12px 30px;
            font-size: 14px;
            font-family: 'Alice', serif;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        
        .welcome-button:hover {
            background: linear-gradient(135deg, var(--azul-escuro), var(--vinho));
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(240, 170, 83, 0.4);
        }
        
        .welcome-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .mystical-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            color: var(--dourado);
            font-size: 12px;
            opacity: 0.6;
            animation: particleFloat 8s linear infinite;
        }
        
        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Sistema de Autentica√ß√£o */
        .auth-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--azul-escuro) 0%, var(--vinho) 100%);
            z-index: 9997;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--pergaminho);
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }
        
        .auth-screen.active {
            display: flex;
            opacity: 1;
        }
        
        .auth-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .auth-container {
            background: rgba(0,0,0,0.4);
            border: 2px solid var(--dourado);
            border-radius: 20px;
            padding: 40px;
            max-width: 450px;
            width: 90%;
            box-shadow: 0 0 30px rgba(240, 170, 83, 0.3);
            animation: authFloat 0.8s ease-out;
        }
        
        @keyframes authFloat {
            0% { 
                opacity: 0; 
                transform: translateY(50px) scale(0.9); 
            }
            100% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .auth-logo {
            font-size: 48px;
            margin-bottom: 15px;
            animation: logoGlow 2s ease-in-out infinite;
        }
        
        .auth-title {
            font-family: 'Alice', serif;
            font-size: 24px;
            color: var(--dourado);
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }
        
        .auth-subtitle {
            font-family: 'Alice', serif;
            font-size: 14px;
            color: var(--verde-claro);
            font-style: italic;
        }
        
        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .auth-field {
            position: relative;
        }
        
        .auth-label {
            display: block;
            font-family: 'Alice', serif;
            font-size: 12px;
            color: var(--verde-claro);
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .auth-input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(0,0,0,0.3);
            border: 2px solid var(--azul-escuro);
            border-radius: 8px;
            color: var(--pergaminho);
            font-family: 'Alice', serif;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .auth-input:focus {
            outline: none;
            border-color: var(--dourado);
            box-shadow: 0 0 10px rgba(240, 170, 83, 0.3);
            background: rgba(0,0,0,0.5);
        }
        
        .auth-input::placeholder {
            color: rgba(242, 234, 255, 0.6);
            font-style: italic;
        }
        
        .auth-section-title {
            font-family: 'Alice', serif;
            font-size: 16px;
            color: var(--dourado);
            font-weight: bold;
            margin: 20px 0 5px 0;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }
        
        .auth-section-subtitle {
            font-family: 'Alice', serif;
            font-size: 12px;
            color: var(--verde-claro);
            font-style: italic;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .auth-checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }
        
        .auth-checkbox {
            width: 18px;
            height: 18px;
            accent-color: var(--dourado);
        }
        
        .auth-checkbox-label {
            font-family: 'Alice', serif;
            font-size: 12px;
            color: var(--pergaminho);
            cursor: pointer;
        }
        
        .auth-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }
        
        .auth-button {
            background: linear-gradient(135deg, var(--vinho), var(--azul-escuro));
            color: var(--dourado);
            border: 2px solid var(--dourado);
            padding: 12px 20px;
            font-size: 14px;
            font-family: 'Alice', serif;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        
        .auth-button:hover {
            background: linear-gradient(135deg, var(--azul-escuro), var(--vinho));
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(240, 170, 83, 0.4);
        }
        
        .auth-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .auth-button.secondary {
            background: transparent;
            color: var(--verde-claro);
            border-color: var(--verde-claro);
        }
        
        .auth-button.secondary:hover {
            background: rgba(178, 209, 177, 0.1);
            color: var(--pergaminho);
        }
        
        .auth-button.demo {
            background: linear-gradient(135deg, #8b1538 0%, #3e0a29 100%);
            border: 2px solid var(--dourado);
            color: var(--dourado);
            position: relative;
            overflow: hidden;
        }
        
        .auth-button.demo::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(240, 170, 83, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .auth-button.demo:hover::before {
            left: 100%;
        }
        
        .auth-button.demo:hover {
            background: linear-gradient(135deg, #a01a42 0%, #4a0c30 100%);
            box-shadow: 0 0 15px rgba(240, 170, 83, 0.4);
            transform: translateY(-2px);
        }
        
        .auth-divider {
            text-align: center;
            margin: 20px 0;
            position: relative;
            color: var(--verde-claro);
            font-family: 'Alice', serif;
            font-size: 12px;
        }
        
        .auth-divider::before,
        .auth-divider::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 40%;
            height: 1px;
            background: var(--verde-claro);
        }
        
        .auth-divider::before {
            left: 0;
        }
        
        .auth-divider::after {
            right: 0;
        }
        
        .auth-links {
            text-align: center;
            margin-top: 20px;
        }
        
        .auth-link {
            color: var(--verde-claro);
            text-decoration: none;
            font-family: 'Alice', serif;
            font-size: 12px;
            transition: color 0.3s ease;
            cursor: pointer;
        }
        
        .auth-link:hover {
            color: var(--dourado);
            text-decoration: underline;
        }
        
        .auth-error {
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid #ff6b6b;
            color: #ffcccb;
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            margin-bottom: 15px;
            text-align: center;
            font-family: 'Alice', serif;
        }
        
        .auth-success {
            background: rgba(178, 209, 177, 0.2);
            border: 1px solid var(--verde-claro);
            color: var(--verde-claro);
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            margin-bottom: 15px;
            text-align: center;
            font-family: 'Alice', serif;
        }
        
        .auth-loading {
            display: none;
            text-align: center;
            color: var(--dourado);
            font-family: 'Alice', serif;
            font-size: 12px;
            margin-top: 10px;
        }
        
        .auth-loading.active {
            display: block;
        }
        
        .auth-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(240, 170, 83, 0.3);
            border-radius: 50%;
            border-top-color: var(--dourado);
            animation: spin 1s ease-in-out infinite;
            margin-right: 8px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Desktop */
        .desktop {
            position: relative;
            width: 100%;
            height: calc(100vh - 40px);
            background: var(--theme-bg);
            background-attachment: fixed;
        }
        
        .desktop-icons {
            display: grid;
            grid-template-columns: repeat(auto-fit, 80px);
            gap: 20px;
            padding: 20px;
            height: 100%;
            align-content: start;
        }
        
        .desktop-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
            position: relative;
        }
        
        .desktop-icon:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .desktop-icon .icon {
            font-size: 32px;
            margin-bottom: 4px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
            animation: iconBreathe 3s ease-in-out infinite;
        }
        
        .desktop-icon.premium .icon::after {
            content: '‚≠ê';
            position: absolute;
            top: -5px;
            right: -5px;
            font-size: 16px;
            color: var(--dourado);
            text-shadow: 0 0 5px var(--dourado);
            animation: starGlow 2s ease-in-out infinite;
        }
        
        .desktop-icon .label {
            color: white;
            font-size: 10px;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            max-width: 70px;
            word-wrap: break-word;
        }
        
        @keyframes iconBreathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes starGlow {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        /* Menu de Contexto (Bot√£o Direito) */
        .context-menu {
            position: fixed;
            background: #c0c0c0;
            border: 2px outset #c0c0c0;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            z-index: 3000;
            display: none;
            min-width: 200px;
        }
        
        .context-menu-item {
            padding: 8px 16px;
            cursor: pointer;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: black;
            border-bottom: 1px solid #a0a0a0;
        }
        
        .context-menu-item:hover {
            background: #316AC5;
            color: white;
        }
        
        .context-menu-item:last-child {
            border-bottom: none;
        }
        
        .context-menu-separator {
            height: 1px;
            background: #808080;
            margin: 2px 0;
        }
        
        /* Taskbar Aprimorada */
        .taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 40px;
            background: linear-gradient(to bottom, var(--theme-taskbar), #2a0a1f);
            border-top: 1px solid rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            padding: 0 8px;
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
        }
        
        .start-button {
            background: linear-gradient(to bottom, var(--theme-start-btn), #2a0a1f);
            border: 1px outset var(--theme-start-btn);
            color: var(--theme-start-text);
            padding: 6px 12px;
            cursor: pointer;
            font-size: 11px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 6px;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
            transition: all 0.1s;
            border-radius: 4px;
        }
        
        .start-button:hover {
            background: linear-gradient(to bottom, #4a1a35, var(--theme-start-btn));
        }
        
        .start-button:active {
            border: 1px inset var(--theme-start-btn);
        }
        
        .start-logo {
            font-size: 16px;
            filter: drop-shadow(0 0 3px var(--dourado));
        }
        
        .taskbar-items {
            flex: 1;
            display: flex;
            gap: 4px;
            margin-left: 12px;
        }
        
        .taskbar-item {
            background: rgba(255,255,255,0.1);
            border: 1px outset rgba(255,255,255,0.2);
            color: white;
            padding: 4px 10px;
            cursor: pointer;
            font-size: 10px;
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border-radius: 3px;
        }
        
        .taskbar-item:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .taskbar-item.active {
            background: rgba(255,255,255,0.3);
            border: 1px inset rgba(255,255,255,0.2);
        }
        
        /* √Årea direita da taskbar */
        .taskbar-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .taskbar-widget {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            background: rgba(255,255,255,0.1);
            border: 1px outset rgba(255,255,255,0.2);
            border-radius: 3px;
            cursor: pointer;
            font-size: 10px;
            color: var(--theme-clock);
            text-shadow: 0 0 3px var(--dourado);
            transition: all 0.1s;
        }
        
        .taskbar-widget:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .taskbar-widget:active {
            border: 1px inset rgba(255,255,255,0.2);
        }
        
        .planetary-symbol {
            font-size: 14px;
            animation: planetGlow 3s ease-in-out infinite;
        }
        
        @keyframes planetGlow {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; text-shadow: 0 0 8px var(--dourado); }
        }
        
        .clock {
            color: var(--theme-clock);
            font-size: 11px;
            font-weight: bold;
            text-shadow: 0 0 3px var(--dourado);
        }
        
        .notification-icon, .volume-icon {
            font-size: 14px;
            cursor: pointer;
            padding: 4px;
            border-radius: 3px;
            transition: all 0.1s;
        }
        
        .notification-icon:hover, .volume-icon:hover {
            background: rgba(255,255,255,0.2);
        }
        
        /* Popups */
        .popup {
            position: fixed;
            background: #c0c0c0;
            border: 2px outset #c0c0c0;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            z-index: 2000;
            display: none;
            border-radius: 4px;
        }
        
        .popup.active {
            display: block;
        }
        
        /* Calend√°rio Popup */
        .calendar-popup {
            bottom: 50px;
            right: 10px;
            width: 280px;
            padding: 12px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            font-weight: bold;
        }
        
        .calendar-nav {
            background: #d0d0d0;
            border: 1px outset #d0d0d0;
            cursor: pointer;
            padding: 2px 6px;
            font-size: 10px;
        }
        
        .calendar-nav:hover {
            background: #e0e0e0;
        }
        
        .calendar-nav:active {
            border: 1px inset #d0d0d0;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            text-align: center;
        }
        
        .calendar-day-header {
            font-size: 9px;
            font-weight: bold;
            padding: 4px 2px;
            background: #a0a0a0;
            color: white;
        }
        
        .calendar-day {
            padding: 4px 2px;
            cursor: pointer;
            font-size: 10px;
            border-radius: 2px;
        }
        
        .calendar-day:hover {
            background: #316AC5;
            color: white;
        }
        
        .calendar-day.today {
            background: var(--dourado);
            color: black;
            font-weight: bold;
        }
        
        .calendar-day.other-month {
            color: #808080;
        }
        
        /* Volume Popup */
        .volume-popup {
            bottom: 50px;
            right: 10px;
            width: 200px;
            padding: 12px;
        }
        
        .volume-control {
            margin-bottom: 8px;
        }
        
        .volume-label {
            font-size: 10px;
            margin-bottom: 4px;
            font-weight: bold;
        }
        
        .volume-slider {
            width: 100%;
            height: 4px;
            background: #808080;
            border-radius: 2px;
            cursor: pointer;
            position: relative;
        }
        
        .volume-fill {
            height: 100%;
            background: var(--dourado);
            border-radius: 2px;
            transition: width 0.1s;
        }
        
        .volume-thumb {
            position: absolute;
            top: -4px;
            width: 12px;
            height: 12px;
            background: #c0c0c0;
            border: 1px outset #c0c0c0;
            border-radius: 50%;
            cursor: pointer;
            transform: translateX(-50%);
        }
        
        /* Planetary Info Popup */
        .planetary-popup {
            bottom: 50px;
            right: 10px;
            width: 300px;
            padding: 12px;
        }
        
        .planetary-info {
            text-align: center;
            margin-bottom: 12px;
        }
        
        .planetary-current {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--azul-escuro);
        }
        
        .planetary-time {
            font-size: 10px;
            color: #666;
            margin-bottom: 8px;
        }
        
        .planetary-ruler {
            font-size: 12px;
            color: var(--vinho);
            font-weight: bold;
        }
        
        /* Gatomante - Assistente M√≠stico */
        .gatomante-container {
            position: fixed;
            bottom: 60px;
            right: 20px;
            z-index: 3000;
            display: none;
            animation: gatomanteAppear 0.5s ease-out;
        }
        
        .gatomante-container.active {
            display: block;
        }
        
        @keyframes gatomanteAppear {
            from { 
                opacity: 0; 
                transform: translateY(20px) scale(0.8); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }
        
        .gatomante-character {
            position: relative;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .gatomante-sprite {
            position: relative;
            display: inline-block;
            font-size: 48px;
            animation: gatomanteIdle 3s ease-in-out infinite;
            cursor: pointer;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
        }
        
        @keyframes gatomanteIdle {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-3px); }
        }
        
        .gatomante-body {
            position: relative;
            z-index: 1;
        }
        
        .gatomante-glasses {
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 20px;
            color: var(--dourado);
            z-index: 2;
            animation: glassesGlow 2s ease-in-out infinite;
        }
        
        @keyframes glassesGlow {
            0%, 100% { 
                filter: drop-shadow(0 0 3px var(--dourado)); 
                opacity: 1;
            }
            50% { 
                filter: drop-shadow(0 0 8px var(--dourado)); 
                opacity: 0.8;
            }
        }
        
        .gatomante-bubble {
            background: var(--pergaminho);
            border: 2px solid var(--azul-escuro);
            border-radius: 15px;
            padding: 12px 16px;
            max-width: 280px;
            position: relative;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            animation: bubbleFloat 0.3s ease-out;
        }
        
        @keyframes bubbleFloat {
            from { 
                opacity: 0; 
                transform: translateY(10px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        .gatomante-bubble::before {
            content: '';
            position: absolute;
            bottom: -10px;
            right: 30px;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid var(--azul-escuro);
        }
        
        .gatomante-bubble::after {
            content: '';
            position: absolute;
            bottom: -8px;
            right: 31px;
            width: 0;
            height: 0;
            border-left: 9px solid transparent;
            border-right: 9px solid transparent;
            border-top: 9px solid var(--pergaminho);
        }
        
        .gatomante-text {
            color: var(--azul-escuro);
            font-size: 12px;
            line-height: 1.4;
            font-family: 'Alice', serif;
            font-style: italic;
            margin-bottom: 8px;
        }
        
        .gatomante-close {
            position: absolute;
            top: 4px;
            right: 8px;
            background: var(--vinho);
            color: white;
            border: none;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .gatomante-close:hover {
            background: #a0073a;
            transform: scale(1.1);
        }
        
        .gatomante-thinking {
            animation: gatomanteThinking 1s ease-in-out infinite;
        }
        
        @keyframes gatomanteThinking {
            0%, 100% { transform: rotate(-2deg); }
            50% { transform: rotate(2deg); }
        }
        
        /* Sistema AF√ÅST - Antiv√≠rus Astrol√≥gico */
        .afast-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #8b1538 0%, #3e0a29 100%);
            border: 3px solid #f0aa53;
            border-radius: 15px;
            padding: 20px;
            max-width: 350px;
            z-index: 2000;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            transform: translateX(400px);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            color: #f2eaff;
            font-family: 'Alice', serif;
        }
        
        .afast-notification.active {
            transform: translateX(0);
        }
        
        .afast-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 2px solid #f0aa53;
            padding-bottom: 10px;
        }
        
        .afast-logo {
            font-size: 32px;
            margin-right: 15px;
            animation: afastPulse 2s ease-in-out infinite;
        }
        
        .afast-title {
            font-size: 18px;
            font-weight: bold;
            color: #f0aa53;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }
        
        .afast-subtitle {
            font-size: 12px;
            color: #b2d1b1;
            font-style: italic;
        }
        
        .afast-content {
            margin-bottom: 15px;
        }
        
        .afast-event {
            font-size: 16px;
            font-weight: bold;
            color: #f0aa53;
            margin-bottom: 8px;
        }
        
        .afast-description {
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 10px;
        }
        
        .afast-advice {
            background: rgba(0,0,0,0.3);
            border-left: 4px solid #f0aa53;
            padding: 10px;
            border-radius: 5px;
            font-size: 13px;
            font-style: italic;
        }
        
        .afast-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        
        .afast-button {
            background: linear-gradient(135deg, #f0aa53 0%, #d4941e 100%);
            border: none;
            border-radius: 8px;
            padding: 8px 15px;
            color: #3e0a29;
            font-weight: bold;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        
        .afast-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.4);
        }
        
        .afast-button.secondary {
            background: linear-gradient(135deg, #666 0%, #444 100%);
            color: white;
        }
        
        .afast-close {
            position: absolute;
            top: 8px;
            right: 12px;
            background: none;
            border: none;
            color: #f0aa53;
            font-size: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .afast-close:hover {
            color: white;
            transform: scale(1.2);
        }
        
        @keyframes afastPulse {
            0%, 100% { 
                transform: scale(1);
                filter: drop-shadow(0 0 5px #f0aa53);
            }
            50% { 
                transform: scale(1.1);
                filter: drop-shadow(0 0 15px #f0aa53);
            }
        }
        
        /* Central de Notifica√ß√µes */
        .notification-center {
            position: fixed;
            top: 60px;
            right: 20px;
            width: 320px;
            max-height: 500px;
            background: linear-gradient(135deg, #0b1836 0%, #3e0a29 100%);
            border: 2px solid #f0aa53;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            z-index: 1900;
            transform: translateX(350px);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            overflow: hidden;
        }
        
        .notification-center.active {
            transform: translateX(0);
        }
        
        .notification-center-header {
            background: linear-gradient(135deg, #f0aa53 0%, #d4941e 100%);
            color: #3e0a29;
            padding: 15px;
            font-weight: bold;
            font-size: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .notification-center-close {
            background: rgba(62, 10, 41, 0.2);
            border: 1px solid #3e0a29;
            color: #3e0a29;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .notification-center-close:hover {
            background: rgba(62, 10, 41, 0.4);
        }
        
        /* Filtros de Notifica√ß√£o */
        .notification-filters {
            display: flex;
            padding: 10px;
            gap: 5px;
            background: rgba(0,0,0,0.2);
            border-bottom: 1px solid #f0aa53;
        }
        
        .filter-btn {
            flex: 1;
            background: rgba(240, 170, 83, 0.2);
            border: 1px solid #f0aa53;
            color: #f2eaff;
            padding: 8px 4px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 10px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .filter-btn:hover {
            background: rgba(240, 170, 83, 0.4);
        }
        
        .filter-btn.active {
            background: #f0aa53;
            color: #3e0a29;
        }
        
        /* Estat√≠sticas AF√ÅST */
        .afast-stats {
            display: flex;
            padding: 15px 10px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid #f0aa53;
        }
        
        .stat-item {
            flex: 1;
            text-align: center;
            color: #f2eaff;
        }
        
        .stat-number {
            display: block;
            font-size: 18px;
            font-weight: bold;
            color: #f0aa53;
        }
        
        .stat-label {
            font-size: 10px;
            opacity: 0.8;
        }
        
        /* Estado vazio */
        .no-notifications {
            text-align: center;
            padding: 40px 20px;
            color: #f2eaff;
            opacity: 0.7;
        }
        
        /* A√ß√µes da Central */
        .notification-center-actions {
            display: flex;
            padding: 10px;
            gap: 5px;
            background: rgba(0,0,0,0.2);
            border-top: 1px solid #f0aa53;
        }
        
        .action-btn {
            flex: 1;
            background: rgba(240, 170, 83, 0.2);
            border: 1px solid #f0aa53;
            color: #f2eaff;
            padding: 8px 4px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 10px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .action-btn:hover {
            background: rgba(240, 170, 83, 0.4);
            transform: translateY(-1px);
        }
        
        .notification-center-content {
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
        }
        
        .notification-item {
            background: rgba(0,0,0,0.3);
            border: 1px solid #f0aa53;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 10px;
            color: #f2eaff;
            font-size: 13px;
            transition: all 0.3s;
        }
        
        .notification-item:hover {
            background: rgba(240, 170, 83, 0.1);
            transform: translateX(5px);
        }
        
        .notification-item-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .notification-item-title {
            font-weight: bold;
            color: #f0aa53;
        }
        
        .notification-item-time {
            font-size: 11px;
            color: #b2d1b1;
            font-style: italic;
        }
        
        .notification-item-content {
            line-height: 1.4;
        }
        
        /* Modal de Personaliza√ß√£o */
        .personalization-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 4000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .personalization-modal.active {
            display: flex;
        }
        
        .personalization-dialog {
            background: #c0c0c0;
            border: 2px outset #c0c0c0;
            width: 600px;
            max-width: 90vw;
            max-height: 80vh;
            overflow-y: auto;
            border-radius: 4px;
        }
        
        .personalization-header {
            background: var(--theme-window-header);
            color: white;
            padding: 8px 12px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .personalization-close {
            background: #ff6b6b;
            color: white;
            border: 1px outset #ff6b6b;
            width: 20px;
            height: 18px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
        }
        
        .personalization-close:hover {
            background: #ff5252;
        }
        
        .personalization-close:active {
            border: 1px inset #ff6b6b;
        }
        
        .personalization-content {
            padding: 16px;
        }
        
        .personalization-section {
            margin-bottom: 20px;
            border: 1px inset #c0c0c0;
            padding: 12px;
        }
        
        .personalization-section h3 {
            margin-bottom: 12px;
            color: var(--azul-escuro);
            font-size: 12px;
        }
        
        /* Sistema de Upload de Foto */
        .profile-photo-section {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .profile-photo-preview {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid var(--dourado);
            margin: 0 auto 10px;
            background: var(--azul-escuro);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: var(--dourado);
            overflow: hidden;
        }
        
        .profile-photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .photo-upload-btn {
            background: var(--verde-claro);
            color: var(--azul-escuro);
            border: 2px outset var(--verde-claro);
            padding: 6px 12px;
            cursor: pointer;
            font-size: 11px;
            margin: 4px;
            border-radius: 4px;
        }
        
        .photo-upload-btn:hover {
            background: #9bc49a;
        }
        
        .photo-upload-btn:active {
            border: 2px inset var(--verde-claro);
        }
        
        /* Sistema de Wallpapers Personalizados */
        .wallpaper-upload-section {
            border: 1px dashed var(--dourado);
            padding: 20px;
            text-align: center;
            margin: 10px 0;
            background: rgba(240, 170, 83, 0.1);
            border-radius: 8px;
        }
        
        .wallpaper-preview {
            width: 100%;
            height: 60px;
            border: 2px inset #c0c0c0;
            margin: 8px 0;
            background-size: cover;
            background-position: center;
            border-radius: 4px;
        }
        
        .custom-color-picker {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }
        
        .color-input {
            width: 40px;
            height: 30px;
            border: 2px outset #c0c0c0;
            cursor: pointer;
            border-radius: 4px;
        }
        
        .color-hex-input {
            background: white;
            border: 1px inset #c0c0c0;
            padding: 4px 8px;
            font-family: monospace;
            font-size: 11px;
            width: 80px;
        }
        
        .color-palette {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 4px;
            margin-bottom: 12px;
        }
        
        .color-option {
            width: 32px;
            height: 32px;
            border: 2px outset #c0c0c0;
            cursor: pointer;
            border-radius: 4px;
            position: relative;
        }
        
        .color-option:hover {
            border: 2px inset #c0c0c0;
        }
        
        .color-option.selected {
            border: 2px solid var(--dourado);
            box-shadow: 0 0 4px var(--dourado);
        }
        
        .wallpaper-section {
            margin-bottom: 12px;
        }
        
        .wallpaper-upload {
            margin-bottom: 8px;
        }
        
        .wallpaper-upload input[type="file"] {
            width: 100%;
            padding: 4px;
            border: 1px inset #c0c0c0;
        }
        
        .wallpaper-presets {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }
        
        .wallpaper-preset {
            height: 60px;
            border: 2px outset #c0c0c0;
            cursor: pointer;
            border-radius: 4px;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .wallpaper-preset:hover {
            border: 2px inset #c0c0c0;
        }
        
        .wallpaper-preset.selected {
            border: 2px solid var(--dourado);
            box-shadow: 0 0 4px var(--dourado);
        }
        
        .personalization-buttons {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
            margin-top: 16px;
            padding-top: 12px;
            border-top: 1px solid #808080;
        }
        
        .personalization-button {
            background: #d0d0d0;
            border: 1px outset #d0d0d0;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 11px;
        }
        
        .personalization-button:hover {
            background: #e0e0e0;
        }
        
        .personalization-button:active {
            border: 1px inset #d0d0d0;
        }
        
        .personalization-button.primary {
            background: var(--azul-escuro);
            color: white;
        }
        
        .personalization-button.primary:hover {
            background: #1a2a4a;
        }
        
        /* Menu Iniciar */
        .start-menu {
            position: fixed;
            bottom: 40px;
            left: 8px;
            width: 320px;
            background: #c0c0c0;
            border: 2px outset #c0c0c0;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            z-index: 2500;
            display: none;
            animation: menuSlideUp 0.2s ease-out;
            max-height: 500px;
            overflow-y: auto;
            border-radius: 4px;
        }
        
        .start-menu.active {
            display: block;
        }
        
        @keyframes menuSlideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .start-menu-header {
            background: var(--theme-window-header);
            color: white;
            padding: 12px 16px;
            font-weight: bold;
            font-size: 14px;
            border-bottom: 2px solid #808080;
            display: flex;
            align-items: center;
            gap: 10px;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
        }
        
        .start-menu-header .logo {
            font-size: 20px;
            filter: drop-shadow(0 0 5px var(--dourado));
        }
        
        .start-menu-items {
            background: #c0c0c0;
            padding: 8px 0;
        }
        
        .start-menu-item {
            padding: 8px 16px;
            cursor: pointer;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: black;
            transition: all 0.1s;
            border-left: 3px solid transparent;
            position: relative;
        }
        
        .start-menu-item:hover {
            background: linear-gradient(90deg, #316AC5, #4a7bc8);
            color: white;
            border-left: 3px solid var(--dourado);
            transform: translateX(2px);
        }
        
        .start-menu-item .icon {
            font-size: 24px;
            min-width: 32px;
            text-align: center;
            filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.3));
        }
        
        .start-menu-item .text {
            flex: 1;
            font-weight: 500;
        }
        
        .start-menu-item.premium::after {
            content: '‚≠ê';
            position: absolute;
            right: 12px;
            font-size: 16px;
            color: var(--dourado);
            text-shadow: 0 0 3px var(--dourado);
            animation: starGlow 2s ease-in-out infinite;
        }
        
        .start-menu-item.premium:hover::after {
            color: white;
            text-shadow: 0 0 5px white;
        }
        
        .start-menu-separator {
            height: 2px;
            background: linear-gradient(90deg, transparent, #808080, transparent);
            margin: 4px 12px;
        }
        
        .start-menu-footer {
            background: #d0d0d0;
            padding: 8px 16px;
            border-top: 1px solid #808080;
            font-size: 11px;
            color: #666;
            text-align: center;
        }
        
        /* Janelas */
        .window {
            position: fixed;
            background: #c0c0c0;
            border: 2px outset #c0c0c0;
            min-width: 400px;
            min-height: 300px;
            z-index: 1500;
            display: none;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.3);
            border-radius: 4px;
        }
        
        .window.active {
            display: block;
        }
        
        .window.focused {
            z-index: 1600;
        }
        
        .window-header {
            background: var(--theme-window-header);
            color: white;
            padding: 4px 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            font-size: 11px;
            font-weight: bold;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
        }
        
        .window-title {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .window-controls {
            display: flex;
            gap: 2px;
        }
        
        .window-control {
            width: 18px;
            height: 16px;
            background: #c0c0c0;
            border: 1px outset #c0c0c0;
            cursor: pointer;
            font-size: 10px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            color: black;
        }
        
        .window-control:hover {
            background: #d0d0d0;
        }
        
        .window-control:active {
            border: 1px inset #c0c0c0;
        }
        
        .window-control.close {
            background: #ff6b6b;
            color: white;
        }
        
        .window-content {
            height: calc(100% - 24px);
            overflow: hidden;
            position: relative;
        }
        
        .window-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            font-size: 12px;
            color: #666;
        }
        
        .loading-spinner {
            width: 32px;
            height: 32px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--azul-escuro);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 12px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .window-resize-handle {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 16px;
            height: 16px;
            cursor: se-resize;
            background: linear-gradient(-45deg, transparent 40%, #808080 40%, #808080 60%, transparent 60%);
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .desktop-icons {
                grid-template-columns: repeat(auto-fit, 60px);
                gap: 15px;
                padding: 15px;
            }
            
            .desktop-icon .icon {
                font-size: 24px;
            }
            
            .desktop-icon .label {
                font-size: 9px;
            }
            
            .taskbar {
                height: 36px;
            }
            
            .desktop {
                height: calc(100vh - 36px);
            }
            
            .start-menu {
                width: 280px;
            }
            
            .personalization-dialog {
                width: 90vw;
            }
        }
        
        @media (max-width: 480px) {
            .desktop-icons {
                grid-template-columns: repeat(auto-fit, 50px);
                gap: 10px;
                padding: 10px;
            }
            
            .desktop-icon .icon {
                font-size: 20px;
            }
            
            .taskbar-right {
                gap: 4px;
            }
            
            .taskbar-widget {
                padding: 2px 4px;
                font-size: 9px;
            }
            
            .start-menu {
                width: 260px;
            }
        }
    </style>
</head>
<body>
    <!-- Tela de Boot -->
    <div class="boot-screen" id="bootScreen">
        <div class="mystical-particles" id="bootParticles"></div>
        <div class="boot-logo">
            <img src="mysticsoft-logo.png" alt="MysticSoft Logo" style="width: 120px; height: 120px; image-rendering: pixelated;">
        </div>
        <div class="boot-title">Aurora OS</div>
        <div class="boot-subtitle">‚Ä¢ MysticSoft ‚Ä¢</div>
        <div class="boot-progress">
            <div class="boot-progress-bar" id="bootProgressBar"></div>
        </div>
        <div class="boot-status" id="bootStatus">Inicializando sistema m√≠stico...</div>
    </div>
    
    <!-- Tela de Boas-vindas -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="mystical-particles" id="welcomeParticles"></div>
        <div class="welcome-content">
            <div class="welcome-gatomante">üê±‚Äç‚¨õ</div>
            <div class="welcome-title">Bem-vindo ao Aurora OS</div>
            <div class="welcome-message">
                Sauda√ß√µes, mortal! Sou Gatomante, seu guia pelos mist√©rios digitais deste sistema operacional m√≠stico. 
                Prepare-se para uma jornada atrav√©s das dimens√µes da tecnologia esot√©rica, onde cada clique revela 
                segredos ancestrais e cada aplicativo √© uma porta para o conhecimento oculto.
            </div>
            <button class="welcome-button" onclick="enterSystem()">
                Adentrar os Mist√©rios
            </button>
        </div>
    </div>
    
    <!-- Tela de Autentica√ß√£o -->
    <div class="auth-screen" id="authScreen">
        <div class="mystical-particles" id="authParticles"></div>
        <div class="auth-container">
            <div class="auth-header">
                <div class="auth-logo">
                    <img src="mysticsoft-logo.png" alt="MysticSoft Logo" style="width: 60px; height: 60px; image-rendering: pixelated;">
                </div>
                <div class="auth-title">Portal M√≠stico</div>
                <div class="auth-subtitle">Acesse sua conta no Aurora OS</div>
            </div>
            
            <!-- Formul√°rio de Login -->
            <div id="loginForm" class="auth-form">
                <div id="authMessage" class="auth-error" style="display: none;"></div>
                
                <div class="auth-field">
                    <label class="auth-label" for="loginEmail">üìß Email ou Usu√°rio</label>
                    <input type="text" id="loginEmail" class="auth-input" placeholder="Digite seu email ou usu√°rio..." required>
                </div>
                
                <div class="auth-field">
                    <label class="auth-label" for="loginPassword">üîí Senha</label>
                    <input type="password" id="loginPassword" class="auth-input" placeholder="Digite sua senha..." required>
                </div>
                
                <div class="auth-checkbox-container">
                    <input type="checkbox" id="rememberMe" class="auth-checkbox">
                    <label for="rememberMe" class="auth-checkbox-label">Lembrar-me neste dispositivo</label>
                </div>
                
                <div class="auth-buttons">
                    <button class="auth-button" onclick="performLogin()">üåü Entrar no Sistema</button>
                    <button class="auth-button secondary" onclick="showForgotPassword()">üëÅÔ∏è Esqueci minha senha</button>
                </div>
                
                <div class="auth-divider">OU</div>
                
                <div class="auth-buttons">
                    <button class="auth-button secondary" onclick="showRegisterForm()">‚ú® Criar Nova Conta</button>
                    <button class="auth-button demo" onclick="loginDemo()">üîÆ Conta Demo</button>
                </div>
                
                <div class="auth-loading" id="authLoading">
                    <div class="auth-spinner"></div>
                    Conectando com as energias c√≥smicas...
                </div>
            </div>
            
            <!-- Formul√°rio de Registro -->
            <div id="registerForm" class="auth-form" style="display: none;">
                <div id="registerMessage" class="auth-error" style="display: none;"></div>
                
                <div class="auth-field">
                    <label class="auth-label" for="registerName">üë§ Nome Completo</label>
                    <input type="text" id="registerName" class="auth-input" placeholder="Digite seu nome completo..." required>
                </div>
                
                <div class="auth-field">
                    <label class="auth-label" for="registerEmail">üìß Email</label>
                    <input type="email" id="registerEmail" class="auth-input" placeholder="Digite seu email..." required>
                </div>
                
                <div class="auth-field">
                    <label class="auth-label" for="registerPassword">üîí Senha</label>
                    <input type="password" id="registerPassword" class="auth-input" placeholder="Crie uma senha segura..." required>
                </div>
                
                <div class="auth-field">
                    <label class="auth-label" for="confirmPassword">üîí Confirmar Senha</label>
                    <input type="password" id="confirmPassword" class="auth-input" placeholder="Confirme sua senha..." required>
                </div>
                
                <!-- Se√ß√£o de Dados Astrol√≥gicos -->
                <div class="auth-section-title">üîÆ Dados Astrol√≥gicos (Opcional)</div>
                <div class="auth-section-subtitle">Para criar seu mapa astral personalizado</div>
                
                <div class="auth-field">
                    <label class="auth-label" for="birthDate">üìÖ Data de Nascimento</label>
                    <input type="date" id="birthDate" class="auth-input">
                </div>
                
                <div class="auth-field">
                    <label class="auth-label" for="birthTime">‚è∞ Hora de Nascimento</label>
                    <input type="time" id="birthTime" class="auth-input" placeholder="Ex: 14:30">
                </div>
                
                <div class="auth-field">
                    <label class="auth-label" for="birthPlace">üåç Local de Nascimento</label>
                    <input type="text" id="birthPlace" class="auth-input" placeholder="Ex: S√£o Paulo, SP, Brasil">
                </div>
                
                <div class="auth-checkbox-container">
                    <input type="checkbox" id="acceptTerms" class="auth-checkbox" required>
                    <label for="acceptTerms" class="auth-checkbox-label">Aceito os Termos de Uso e Pol√≠tica de Privacidade</label>
                </div>
                
                <div class="auth-checkbox-container">
                    <input type="checkbox" id="receiveNotifications" class="auth-checkbox">
                    <label for="receiveNotifications" class="auth-checkbox-label">Desejo receber notifica√ß√µes m√≠sticas</label>
                </div>
                
                <div class="auth-buttons">
                    <button class="auth-button" onclick="performRegister()">üåü Criar Conta</button>
                    <button class="auth-button secondary" onclick="showLoginForm()">üîô Voltar ao Login</button>
                </div>
                
                <div class="auth-loading" id="registerLoading">
                    <div class="auth-spinner"></div>
                    Criando sua conta m√≠stica...
                </div>
            </div>
            
            <!-- Formul√°rio de Recupera√ß√£o de Senha -->
            <div id="forgotForm" class="auth-form" style="display: none;">
                <div id="forgotMessage" class="auth-success" style="display: none;"></div>
                
                <div class="auth-field">
                    <label class="auth-label" for="forgotEmail">üìß Email</label>
                    <input type="email" id="forgotEmail" class="auth-input" placeholder="Digite seu email para recupera√ß√£o..." required>
                </div>
                
                <div class="auth-buttons">
                    <button class="auth-button" onclick="performForgotPassword()">üìß Enviar Link de Recupera√ß√£o</button>
                    <button class="auth-button secondary" onclick="showLoginForm()">üîô Voltar ao Login</button>
                </div>
                
                <div class="auth-loading" id="forgotLoading">
                    <div class="auth-spinner"></div>
                    Consultando os or√°culos...
                </div>
            </div>
        </div>
    </div>
    
    <div class="desktop" id="desktop">
        <div class="desktop-icons" id="desktopIcons">
            <!-- √çcones ser√£o gerados dinamicamente -->
        </div>
    </div>
    
    <!-- Elementos de √Åudio -->
    <audio id="dialupSound1" preload="auto">
        <source src="dialup_chiados_dirty_enhanced.wav" type="audio/wav">
    </audio>
    <audio id="dialupSound2" preload="auto">
        <source src="dialup_chiados_vintage.wav" type="audio/wav">
    </audio>
    
    <!-- Menu de Contexto -->
    <div class="context-menu" id="contextMenu">
        <div class="context-menu-item" onclick="openPersonalization()">
            <span>‚öôÔ∏è</span>
            <span>Personalizar</span>
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" onclick="refreshDesktop()">
            <span>üîÑ</span>
            <span>Atualizar</span>
        </div>
        <div class="context-menu-item" onclick="arrangeIcons()">
            <span>üìê</span>
            <span>Organizar √≠cones</span>
        </div>
    </div>
    
    <!-- Taskbar -->
    <div class="taskbar">
        <button class="start-button" onclick="toggleStartMenu()">
            <span class="start-logo">
                <img src="mysticsoft-logo.png" alt="MysticSoft" style="width: 16px; height: 16px; image-rendering: pixelated;">
            </span>
            <span>Iniciar</span>
        </button>
        
        <div class="taskbar-items" id="taskbarItems">
            <!-- Itens da taskbar ser√£o adicionados dinamicamente -->
        </div>
        
        <div class="taskbar-right">
            <!-- Widget Planet√°rio -->
            <div class="taskbar-widget" onclick="togglePlanetaryPopup()" title="Hora Planet√°ria Atual">
                <span class="planetary-symbol" id="planetarySymbol">‚òâ</span>
                <span id="planetaryName">Sol</span>
            </div>
            
            <!-- Rel√≥gio e Calend√°rio -->
            <div class="taskbar-widget" onclick="toggleCalendarPopup()" title="Calend√°rio">
                <span class="clock" id="clock">00:00</span>
            </div>
            
            <!-- Central AF√ÅST -->
            <div class="taskbar-widget" onclick="toggleNotificationCenter()" title="Central AF√ÅST - Notifica√ß√µes Astrol√≥gicas">
                <span style="color: #f0aa53;">üõ°Ô∏è</span>
            </div>
            
            <!-- Volume -->
            <div class="volume-icon" onclick="toggleVolumePopup()" title="Controle de Volume">
                üîä
            </div>
        </div>
    </div>
    
    <!-- Menu Iniciar -->
    <div class="start-menu" id="startMenu">
        <div class="start-menu-header">
            <span class="logo">
                <img src="mysticsoft-logo.png" alt="MysticSoft" style="width: 20px; height: 20px; image-rendering: pixelated;">
            </span>
            <span>Aurora OS ‚Ä¢ MysticSoft</span>
        </div>
        <div class="start-menu-items" id="startMenuItems">
            <!-- Itens do menu ser√£o gerados dinamicamente -->
        </div>
        <div class="start-menu-separator"></div>
        <div class="start-menu-footer">
            Clique em qualquer item para abrir
        </div>
    </div>
    
    <!-- Popup do Calend√°rio -->
    <div class="popup calendar-popup" id="calendarPopup">
        <div class="calendar-header">
            <button class="calendar-nav" onclick="previousMonth()">‚óÄ</button>
            <span id="calendarTitle">Janeiro 2024</span>
            <button class="calendar-nav" onclick="nextMonth()">‚ñ∂</button>
        </div>
        <div class="calendar-grid" id="calendarGrid">
            <!-- Calend√°rio ser√° gerado dinamicamente -->
        </div>
    </div>
    
    <!-- Popup do Volume -->
    <div class="popup volume-popup" id="volumePopup">
        <div class="volume-control">
            <div class="volume-label">Volume Principal</div>
            <div class="volume-slider" onclick="setVolume(event, 'master')">
                <div class="volume-fill" id="masterVolumeFill" style="width: 70%"></div>
                <div class="volume-thumb" id="masterVolumeThumb" style="left: 70%"></div>
            </div>
        </div>
        <div class="volume-control">
            <div class="volume-label">Notifica√ß√µes</div>
            <div class="volume-slider" onclick="setVolume(event, 'notifications')">
                <div class="volume-fill" id="notificationsVolumeFill" style="width: 50%"></div>
                <div class="volume-thumb" id="notificationsVolumeThumb" style="left: 50%"></div>
            </div>
        </div>
        <div class="volume-control">
            <div class="volume-label">Sistema</div>
            <div class="volume-slider" onclick="setVolume(event, 'system')">
                <div class="volume-fill" id="systemVolumeFill" style="width: 60%"></div>
                <div class="volume-thumb" id="systemVolumeThumb" style="left: 60%"></div>
            </div>
        </div>
    </div>
    
    <!-- Sistema AF√ÅST! reformulado - notifica√ß√µes estilo MSN s√£o criadas dinamicamente -->
    
    <!-- Central de Notifica√ß√µes -->
    <div class="notification-center" id="notificationCenter">
        <div class="notification-center-header">
            üõ°Ô∏è Central AF√ÅST
            <button class="notification-center-close" onclick="toggleNotificationCenter()">√ó</button>
        </div>
        
        <!-- Filtros de Notifica√ß√£o -->
        <div class="notification-filters">
            <button class="filter-btn active" onclick="filterNotifications('all')" id="filterAll">
                üìã Todas
            </button>
            <button class="filter-btn" onclick="filterNotifications('critical')" id="filterCritical">
                üö® Cr√≠ticas
            </button>
            <button class="filter-btn" onclick="filterNotifications('warning')" id="filterWarning">
                ‚ö†Ô∏è Avisos
            </button>
            <button class="filter-btn" onclick="filterNotifications('info')" id="filterInfo">
                ‚ÑπÔ∏è Informa√ß√µes
            </button>
        </div>
        
        <!-- Estat√≠sticas AF√ÅST -->
        <div class="afast-stats">
            <div class="stat-item">
                <span class="stat-number" id="totalAlerts">0</span>
                <span class="stat-label">Total de Alertas</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="criticalAlerts">0</span>
                <span class="stat-label">Cr√≠ticos</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="todayAlerts">0</span>
                <span class="stat-label">Hoje</span>
            </div>
        </div>
        
        <div class="notification-center-content" id="notificationCenterContent">
            <div class="no-notifications" id="noNotifications">
                <div style="font-size: 48px; opacity: 0.5;">üõ°Ô∏è</div>
                <p>Nenhuma notifica√ß√£o AF√ÅST</p>
                <p style="font-size: 12px; opacity: 0.7;">O sistema est√° monitorando eventos astrol√≥gicos...</p>
            </div>
        </div>
        
        <!-- A√ß√µes da Central -->
        <div class="notification-center-actions">
            <button class="action-btn" onclick="clearAllNotifications()">
                üóëÔ∏è Limpar Todas
            </button>
            <button class="action-btn" onclick="exportNotifications()">
                üì§ Exportar
            </button>
            <button class="action-btn" onclick="afastSettings()">
                ‚öôÔ∏è Configura√ß√µes
            </button>
        </div>
    </div>
    
    <!-- Popup Planet√°rio -->
    <div class="popup planetary-popup" id="planetaryPopup">
        <div class="planetary-info">
            <div class="planetary-current">
                <span id="currentPlanetSymbol">‚òâ</span>
                <span id="currentPlanetName">Sol</span>
            </div>
            <div class="planetary-time" id="planetaryTime">
                Hora 1 do Dia ‚Ä¢ 06:00 - 07:00
            </div>
            <div class="planetary-ruler">
                Regente do Dia: <span id="dayRuler">Sol</span>
            </div>
        </div>
        <div style="font-size: 10px; color: #666; text-align: center;">
            Sistema baseado nas horas planet√°rias tradicionais
        </div>
    </div>
    
    <!-- Gatomante - Assistente M√≠stico -->
    <div class="gatomante-container" id="gatomanteContainer">
        <div class="gatomante-character" id="gatomanteCharacter">
            <div class="gatomante-sprite">
                <div class="gatomante-body">üê±‚Äç‚¨õ</div>
                <div class="gatomante-glasses">üëì</div>
            </div>
        </div>
        <div class="gatomante-bubble" id="gatomanteBubble">
            <div class="gatomante-text" id="gatomanteText">
                Miau! Bem-vindo ao Aurora OS, humano... Vejo que voc√™ busca conhecimento m√≠stico.
            </div>
            <div class="gatomante-close" onclick="hideGatomante()">√ó</div>
        </div>
    </div>

    <!-- Modal de Personaliza√ß√£o -->
    <div class="personalization-modal" id="personalizationModal">
        <div class="personalization-dialog">
            <div class="personalization-header">
                <span>Personaliza√ß√£o do Aurora OS</span>
                <button class="personalization-close" onclick="closePersonalization()">√ó</button>
            </div>
            <div class="personalization-content">
                <!-- Se√ß√£o de Foto de Perfil -->
                <div class="personalization-section profile-photo-section">
                    <h3>üì∏ Foto de Perfil</h3>
                    <div class="profile-photo-preview" id="profilePhotoPreview">
                        üë§
                    </div>
                    <div>
                        <button class="photo-upload-btn" onclick="document.getElementById('profilePhotoInput').click()">
                            üìÅ Escolher Arquivo
                        </button>
                        <button class="photo-upload-btn" onclick="removeProfilePhoto()">
                            üóëÔ∏è Remover
                        </button>
                        <input type="file" id="profilePhotoInput" accept="image/*" style="display: none;" onchange="uploadProfilePhoto(event)">
                    </div>
                </div>
                
                <div class="personalization-section">
                    <h3>üé® Cores do Tema</h3>
                    <div class="color-palette" id="colorPalette">
                        <!-- Cores ser√£o geradas dinamicamente -->
                    </div>
                    
                    <!-- Seletor de Cor Personalizada -->
                    <div class="custom-color-picker">
                        <label>Cor personalizada:</label>
                        <input type="color" id="customColorInput" class="color-input" onchange="applyCustomColor(this.value)">
                        <input type="text" id="colorHexInput" class="color-hex-input" placeholder="#FF0000" onchange="applyCustomHex(this.value)">
                    </div>
                </div>
                
                <div class="personalization-section">
                    <h3>üñºÔ∏è Papel de Parede</h3>
                    
                    <!-- Upload de Wallpaper Personalizado -->
                    <div class="wallpaper-upload-section">
                        <div>üìÅ <strong>Upload Personalizado</strong></div>
                        <div style="font-size: 11px; color: #666; margin: 5px 0;">
                            Formatos aceitos: JPG, PNG, GIF | Tamanho m√°ximo: 5MB
                        </div>
                        <button class="photo-upload-btn" onclick="document.getElementById('wallpaperUpload').click()">
                            üñºÔ∏è Escolher Imagem
                        </button>
                        <input type="file" id="wallpaperUpload" accept="image/*" style="display: none;" onchange="uploadWallpaper(event)">
                        
                        <!-- Preview do wallpaper personalizado -->
                        <div id="customWallpaperPreview" class="wallpaper-preview" style="display: none;"></div>
                    </div>
                    
                    <!-- Wallpapers Predefinidos -->
                    <div class="wallpaper-section">
                        <div style="font-size: 11px; margin-bottom: 8px;"><strong>Gradientes Predefinidos:</strong></div>
                        <div class="wallpaper-presets" id="wallpaperPresets">
                            <!-- Presets ser√£o gerados dinamicamente -->
                        </div>
                    </div>
                </div>
                
                <div class="personalization-section">
                    <h3>Configura√ß√µes da Taskbar</h3>
                    <label>
                        <input type="checkbox" id="showPlanetaryWidget" checked onchange="togglePlanetaryWidget()">
                        Mostrar widget planet√°rio
                    </label><br>
                    <label>
                        <input type="checkbox" id="showNotifications" checked onchange="toggleNotifications()">
                        Mostrar notifica√ß√µes
                    </label><br>
                    <label>
                        <input type="checkbox" id="showVolumeControl" checked onchange="toggleVolumeControl()">
                        Mostrar controle de volume
                    </label>
                </div>
                
                <div class="personalization-buttons">
                    <button class="personalization-button" onclick="resetPersonalization()">Restaurar Padr√£o</button>
                    <button class="personalization-button primary" onclick="savePersonalization()">Aplicar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // üéØ CONFIGURA√á√ÉO MANUAL DE SITES E √çCONES
        // ========================================
        // 
        // INSTRU√á√ïES PARA PERSONALIZA√á√ÉO:
        // 
        // 1. √çCONES:
        //    - Para emojis: use diretamente (ex: 'üîç', 'üì∫', 'üíª')
        //    - Para imagens: coloque o arquivo na pasta do projeto e use o nome (ex: 'meu-icone.png')
        //    - Tamanho recomendado para imagens: 64x64 pixels
        //
        // 2. LINKS:
        //    - URLs normais: 'https://seusite.com'
        //    - Aplicativo local de arquivos: 'local://files'
        //
        // 3. PREMIUM:
        //    - true: aparece na se√ß√£o premium (dourada) do menu
        //    - false: aparece na se√ß√£o b√°sica do menu
        //
        // 4. ID:
        //    - Use apenas letras min√∫sculas, n√∫meros e h√≠fens
        //    - Deve ser √∫nico para cada item
        //
        const sitesConfig = [
            // ==========================================
            // üì± APLICATIVOS B√ÅSICOS (Se√ß√£o Superior)
            // ==========================================
            { 
                id: 'google', 
                name: 'Google', 
                url: 'https://google.com', 
                icon: 'üîç', 
                premium: false 
            },
            { 
                id: 'youtube', 
                name: 'YouTube', 
                url: 'https://youtube.com', 
                icon: 'üì∫', 
                premium: false 
            },
            { 
                id: 'github', 
                name: 'GitHub', 
                url: 'https://github.com', 
                icon: 'üíª', 
                premium: false 
            },
            { 
                id: 'spotify', 
                name: 'Spotify', 
                url: 'https://spotify.com', 
                icon: 'üéµ', 
                premium: false 
            },
            { 
                id: 'arquivos', 
                name: 'Arquivos & Anota√ß√µes', 
                url: 'local://files', 
                icon: 'üìÅ', 
                premium: false 
            },
            
            // ==========================================
            // ‚≠ê APLICATIVOS PREMIUM (Se√ß√£o Dourada)
            // ==========================================
            { 
                id: 'mysticsoft', 
                name: 'MysticSoft Portal', 
                url: 'https://wix.com', 
                icon: 'mysticsoft-logo.png', 
                premium: true 
            },
            { 
                id: 'loja-mistica', 
                name: 'Loja M√≠stica', 
                url: 'https://wix.com', 
                icon: 'üõí', 
                premium: true 
            },
            { 
                id: 'tarot-online', 
                name: 'Tarot Online', 
                url: 'https://tarot.com', 
                icon: 'üîÆ', 
                premium: true 
            },
            { 
                id: 'portal-astrologico', 
                name: 'Portal Astrol√≥gico', 
                url: 'https://astro.com', 
                icon: '‚≠ê', 
                premium: true 
            },
            
            // ==========================================
            // üîÆ APLICA√á√ïES M√çSTICAS NATIVAS
            // ==========================================
            { 
                id: 'combine-cristais', 
                name: 'Combine os Cristais', 
                url: 'local://crystals', 
                icon: 'üíé', 
                premium: true 
            },
            { 
                id: 'combine-ervas', 
                name: 'Combine as Ervas', 
                url: 'local://herbs', 
                icon: 'üåø', 
                premium: true 
            },
            { 
                id: 'combine-cartas', 
                name: 'Combine as Cartas', 
                url: 'local://cards', 
                icon: 'üÉè', 
                premium: true 
            },
            { 
                id: 'estrelas-fixas', 
                name: 'Estrelas Fixas', 
                url: 'local://stars', 
                icon: '‚≠ê', 
                premium: true 
            },
            { 
                id: 'arvore-vida', 
                name: '√Årvore da Vida', 
                url: 'local://kabbalah', 
                icon: 'üå≥', 
                premium: true 
            },
            { 
                id: 'witch-tarot', 
                name: 'Witch Tarot', 
                url: 'local://tarot', 
                icon: 'üîÆ', 
                premium: true 
            },
            { 
                id: 'livros-interativos', 
                name: 'Livros Interativos', 
                url: 'local://books', 
                icon: 'üìö', 
                premium: true 
            },
            { 
                id: 'roda-do-ano', 
                name: 'Roda do Ano', 
                url: 'local://wheel', 
                icon: 'üé°', 
                premium: true 
            },
            
            // ==========================================
            // üéÆ JOGOS E ENTRETENIMENTO
            // ==========================================
            { 
                id: 'jogo-cobrinha', 
                name: 'Jogo da Cobrinha', 
                url: 'local://snake', 
                icon: 'üêç', 
                premium: false 
            },
            { 
                id: 'paciencia', 
                name: 'Paci√™ncia', 
                url: 'local://solitaire', 
                icon: 'üÉè', 
                premium: false 
            },
            { 
                id: 'domino', 
                name: 'Domin√≥', 
                url: 'local://domino', 
                icon: '‚ö´', 
                premium: false 
            },
            
            // ==========================================
            // üõ†Ô∏è APLICA√á√ïES LOCAIS
            // ==========================================
            { 
                id: 'editor-texto', 
                name: 'Editor de Texto', 
                url: 'local://notepad', 
                icon: 'üìù', 
                premium: false 
            },
            { 
                id: 'calculadora', 
                name: 'Calculadora', 
                url: 'local://calculator', 
                icon: 'üî¢', 
                premium: false 
            },
            { 
                id: 'leitor-documentos', 
                name: 'Leitor de Documentos', 
                url: 'local://reader', 
                icon: 'üìÑ', 
                premium: false 
            },
            { 
                id: 'visualizador-videos', 
                name: 'Visualizador de V√≠deos', 
                url: 'local://player', 
                icon: 'üé¨', 
                premium: false 
            },
            
            // ==========================================
            // ‚ûï ADICIONE SEUS PR√ìPRIOS SITES AQUI:
            // ==========================================
            // 
            // EXEMPLO DE NOVO SITE B√ÅSICO:
            // { 
            //     id: 'meu-site', 
            //     name: 'Meu Site Pessoal', 
            //     url: 'https://meusite.com', 
            //     icon: 'üåê', 
            //     premium: false 
            // },
            //
            // EXEMPLO DE NOVO SITE PREMIUM:
            // { 
            //     id: 'app-premium', 
            //     name: 'Meu App Premium', 
            //     url: 'https://meuapp.com', 
            //     icon: 'meu-icone.png', 
            //     premium: true 
            // },
        ];
        
        // ========================================
        // üé® CONFIGURA√á√ÉO MANUAL DE TEMAS DE CORES
        // ========================================
        // 
        // INSTRU√á√ïES:
        // - primary: Cor principal (barras, janelas)
        // - secondary: Cor secund√°ria (fundos, sombras)  
        // - accent: Cor de destaque (textos, bordas)
        // - Use c√≥digos hexadecimais (#000000)
        //
        const colorThemes = [
            { name: 'Aurora Original', primary: '#3e0a29', secondary: '#0b1836', accent: '#f0aa53' },
            { name: 'Noite C√≥smica', primary: '#1a1a2e', secondary: '#16213e', accent: '#e94560' },
            { name: 'Rosa M√≠stico', primary: '#8b1538', secondary: '#2d1b69', accent: '#f39c12' },
            { name: 'Verde Floresta', primary: '#2d5016', secondary: '#1b4332', accent: '#95d5b2' },
            { name: 'Azul Oceano', primary: '#023047', secondary: '#219ebc', accent: '#ffb703' },
            { name: 'Roxo Imperial', primary: '#5a189a', secondary: '#240046', accent: '#ff006e' },
            { name: 'Dourado Real', primary: '#b7410e', secondary: '#6f1d1b', accent: '#ffd60a' },
            { name: 'Prata Lunar', primary: '#495057', secondary: '#212529', accent: '#adb5bd' }
            
            // ‚ûï ADICIONE SEUS PR√ìPRIOS TEMAS AQUI:
            // { name: 'Meu Tema', primary: '#cor1', secondary: '#cor2', accent: '#cor3' },
        ];
        
        // ========================================
        // üñºÔ∏è CONFIGURA√á√ÉO MANUAL DE WALLPAPERS
        // ========================================
        // 
        // INSTRU√á√ïES:
        // - Use gradientes CSS linear-gradient()
        // - Formato: 'linear-gradient(√¢ngulo, cor1 %, cor2 %)'
        // - √Çngulo comum: 135deg (diagonal)
        //
        const wallpaperPresets = [
            { name: 'Aurora Original', gradient: 'linear-gradient(135deg, #0b1836 0%, #3e0a29 100%)' },
            { name: 'Noite Estrelada', gradient: 'linear-gradient(135deg, #000428 0%, #004e92 100%)' },
            { name: 'P√¥r do Sol', gradient: 'linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%)' },
            { name: 'Floresta M√≠stica', gradient: 'linear-gradient(135deg, #134e5e 0%, #71b280 100%)' },
            { name: 'Oceano Profundo', gradient: 'linear-gradient(135deg, #667db6 0%, #0082c8 100%)' },
            { name: 'Rosa Crep√∫sculo', gradient: 'linear-gradient(135deg, #8360c3 0%, #2ebf91 100%)' }
            
            // ‚ûï ADICIONE SEUS PR√ìPRIOS WALLPAPERS AQUI:
            // { name: 'Meu Wallpaper', gradient: 'linear-gradient(135deg, #cor1 0%, #cor2 100%)' },
        ];
        
        // S√≠mbolos planet√°rios
        const planetarySymbols = {
            'Sol': '‚òâ',
            'Lua': '‚òΩ',
            'Marte': '‚ôÇ',
            'Merc√∫rio': '‚òø',
            'J√∫piter': '‚ôÉ',
            'V√™nus': '‚ôÄ',
            'Saturno': '‚ôÑ'
        };
        
        // Ordem caldaica dos planetas
        const chaldeanOrder = ['Saturno', 'J√∫piter', 'Marte', 'Sol', 'V√™nus', 'Merc√∫rio', 'Lua'];
        const dayRulers = ['Sol', 'Lua', 'Marte', 'Merc√∫rio', 'J√∫piter', 'V√™nus', 'Saturno']; // Dom, Seg, Ter, Qua, Qui, Sex, S√°b
        
        // Estado do sistema
        let currentTheme = 0;
        let currentWallpaper = 0;
        let openWindows = [];
        let currentDate = new Date();
        let currentPlanetaryHour = { planet: 'Sol', hour: 1, period: 'dia' };
        
        // Volumes do sistema
        let volumes = {
            master: 70,
            notifications: 50,
            system: 60
        };
        
        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar sistema de boot
            initBootSystem();
        });
        
        function setupEventListeners() {
            // Menu de contexto (bot√£o direito)
            document.addEventListener('contextmenu', function(e) {
                if (e.target.closest('.desktop')) {
                    e.preventDefault();
                    showContextMenu(e.clientX, e.clientY);
                }
            });
            
            // Fechar menus ao clicar fora
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.context-menu')) {
                    hideContextMenu();
                }
                if (!e.target.closest('.start-menu') && !e.target.closest('.start-button')) {
                    hideStartMenu();
                }
                if (!e.target.closest('.popup')) {
                    hideAllPopups();
                }
            });
            
            // Drag and drop para janelas
            setupWindowDragging();
        }
        
        function generateDesktopIcons() {
            const container = document.getElementById('desktopIcons');
            container.innerHTML = '';
            
            // Adicionar √≠cone da lixeira primeiro
            const trashIcon = document.createElement('div');
            trashIcon.className = 'desktop-icon trash-icon';
            trashIcon.id = 'trashIcon';
            trashIcon.onclick = () => openTrash();
            trashIcon.innerHTML = `
                <div class="icon">üóëÔ∏è</div>
                <div class="label">Lixeira</div>
            `;
            trashIcon.style.position = 'absolute';
            trashIcon.style.bottom = '20px';
            trashIcon.style.right = '20px';
            container.appendChild(trashIcon);
            
            // Carregar posi√ß√µes salvas dos √≠cones
            const savedPositions = JSON.parse(localStorage.getItem('auroraOS_icon_positions') || '{}');
            
            sitesConfig.forEach((site, index) => {
                const icon = document.createElement('div');
                icon.className = `desktop-icon ${site.premium ? 'premium' : ''}`;
                icon.draggable = true;
                icon.dataset.siteIndex = index;
                
                const iconContent = site.icon.endsWith('.png') ? 
                    `<img src="${site.icon}" alt="${site.name}" style="width: 32px; height: 32px; image-rendering: pixelated;">` : 
                    site.icon;
                
                icon.innerHTML = `
                    <div class="icon">${iconContent}</div>
                    <div class="label">${site.name}</div>
                `;
                
                // Aplicar posi√ß√£o salva se existir
                if (savedPositions[site.name]) {
                    icon.style.position = 'absolute';
                    icon.style.left = savedPositions[site.name].x + 'px';
                    icon.style.top = savedPositions[site.name].y + 'px';
                }
                
                // Eventos de arrastar
                icon.addEventListener('dragstart', handleDragStart);
                icon.addEventListener('dragend', handleDragEnd);
                icon.addEventListener('click', (e) => {
                    if (!icon.classList.contains('dragging')) {
                        openSite(site);
                    }
                });
                
                container.appendChild(icon);
            });
            
            // Configurar √°rea de drop
            container.addEventListener('dragover', handleDragOver);
            container.addEventListener('drop', handleDrop);
        }
        
        // ========================================
        // üñ±Ô∏è SISTEMA DE ARRASTAR √çCONES
        // ========================================
        
        let draggedIcon = null;
        let dragOffset = { x: 0, y: 0 };
        
        function handleDragStart(e) {
            draggedIcon = e.target.closest('.desktop-icon');
            draggedIcon.classList.add('dragging');
            
            const rect = draggedIcon.getBoundingClientRect();
            dragOffset.x = e.clientX - rect.left;
            dragOffset.y = e.clientY - rect.top;
            
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', draggedIcon.outerHTML);
        }
        
        function handleDragEnd(e) {
            if (draggedIcon) {
                draggedIcon.classList.remove('dragging');
                draggedIcon = null;
            }
        }
        
        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        }
        
        function handleDrop(e) {
            e.preventDefault();
            
            if (draggedIcon) {
                const container = document.getElementById('desktopIcons');
                const containerRect = container.getBoundingClientRect();
                
                const x = e.clientX - containerRect.left - dragOffset.x;
                const y = e.clientY - containerRect.top - dragOffset.y;
                
                // Limitar posi√ß√£o dentro do container
                const maxX = containerRect.width - draggedIcon.offsetWidth;
                const maxY = containerRect.height - draggedIcon.offsetHeight;
                
                const finalX = Math.max(0, Math.min(x, maxX));
                const finalY = Math.max(0, Math.min(y, maxY));
                
                draggedIcon.style.position = 'absolute';
                draggedIcon.style.left = finalX + 'px';
                draggedIcon.style.top = finalY + 'px';
                
                // Salvar posi√ß√£o
                saveIconPosition(draggedIcon, finalX, finalY);
                
                draggedIcon.classList.remove('dragging');
                draggedIcon = null;
            }
        }
        
        function saveIconPosition(iconElement, x, y) {
            const siteIndex = iconElement.dataset.siteIndex;
            if (siteIndex !== undefined) {
                const siteName = sitesConfig[siteIndex].name;
                const savedPositions = JSON.parse(localStorage.getItem('auroraOS_icon_positions') || '{}');
                savedPositions[siteName] = { x, y };
                localStorage.setItem('auroraOS_icon_positions', JSON.stringify(savedPositions));
            }
        }
        
        function resetIconPositions() {
            localStorage.removeItem('auroraOS_icon_positions');
            generateDesktopIcons();
            
            // Notificar Gatomante
            setTimeout(() => {
                gatomanteContextual('personalizacao', { acao: '√≠cones reorganizados' });
            }, 1000);
        }
        
        // ========================================
        // üóëÔ∏è SISTEMA DE LIXEIRA
        // ========================================
        
        function openTrash() {
            const trashItems = JSON.parse(localStorage.getItem('auroraOS_trash') || '[]');
            
            let trashContent = '<h3>üóëÔ∏è Lixeira do Aurora OS</h3>';
            
            if (trashItems.length === 0) {
                trashContent += '<p>A lixeira est√° vazia.</p>';
            } else {
                trashContent += '<div style="margin: 15px 0;">';
                trashItems.forEach((item, index) => {
                    trashContent += `
                        <div style="display: flex; align-items: center; padding: 8px; border-bottom: 1px solid #444;">
                            <span style="margin-right: 10px;">${item.icon}</span>
                            <span style="flex: 1;">${item.name}</span>
                            <small style="opacity: 0.7;">${item.deletedAt}</small>
                            <button onclick="restoreFromTrash(${index})" style="margin-left: 10px; padding: 4px 8px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">Restaurar</button>
                        </div>
                    `;
                });
                trashContent += '</div>';
                trashContent += '<button onclick="emptyTrash()" style="background: #f44336; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-top: 10px;">Esvaziar Lixeira</button>';
            }
            
            openMysticalApp('Lixeira', trashContent);
        }
        
        function addToTrash(item) {
            const trashItems = JSON.parse(localStorage.getItem('auroraOS_trash') || '[]');
            trashItems.push({
                ...item,
                deletedAt: new Date().toLocaleString('pt-BR')
            });
            localStorage.setItem('auroraOS_trash', JSON.stringify(trashItems));
        }
        
        function restoreFromTrash(index) {
            const trashItems = JSON.parse(localStorage.getItem('auroraOS_trash') || '[]');
            const item = trashItems[index];
            
            if (item) {
                // Restaurar item (implementar l√≥gica espec√≠fica conforme necess√°rio)
                trashItems.splice(index, 1);
                localStorage.setItem('auroraOS_trash', JSON.stringify(trashItems));
                
                alert(`${item.name} foi restaurado com sucesso!`);
                openTrash(); // Reabrir lixeira para mostrar mudan√ßas
            }
        }
        
        function emptyTrash() {
            if (confirm('Tem certeza que deseja esvaziar a lixeira? Esta a√ß√£o n√£o pode ser desfeita.')) {
                localStorage.removeItem('auroraOS_trash');
                alert('Lixeira esvaziada com sucesso!');
                openTrash(); // Reabrir lixeira para mostrar mudan√ßas
            }
        }
        
        function generateStartMenu() {
            const container = document.getElementById('startMenuItems');
            container.innerHTML = '';
            
            // ========================================
            // üìÅ APLICA√á√ïES DO SISTEMA
            // ========================================
            
            // Aplica√ß√µes essenciais do sistema
            const systemApps = [
                { name: 'Processador de Texto', icon: 'üìù', action: () => openTextProcessor() },
                { name: 'Pasta Documentos', icon: 'üìÅ', action: () => openDocumentsFolder() },
                { name: 'Ajuda do Sistema', icon: '‚ùì', action: () => openSystemHelp() },
                { name: 'Lixeira', icon: 'üóëÔ∏è', action: () => openTrash() }
            ];
            
            systemApps.forEach(app => {
                const item = document.createElement('div');
                item.className = 'start-menu-item system-app';
                item.onclick = app.action;
                
                item.innerHTML = `
                    <div class="icon">${app.icon}</div>
                    <div class="text">${app.name}</div>
                `;
                
                container.appendChild(item);
            });
            
            // Separador
            const systemSeparator = document.createElement('div');
            systemSeparator.className = 'start-menu-separator';
            container.appendChild(systemSeparator);
            
            // ========================================
            // üåê SITES E APLICA√á√ïES EXTERNAS
            // ========================================
            
            // Separar sites b√°sicos e premium
            const basicSites = sitesConfig.filter(site => !site.premium);
            const premiumSites = sitesConfig.filter(site => site.premium);
            
            // Adicionar sites b√°sicos
            basicSites.forEach(site => {
                const item = document.createElement('div');
                item.className = 'start-menu-item';
                item.onclick = () => openSite(site);
                
                const iconContent = site.icon.endsWith('.png') ? 
                    `<img src="${site.icon}" alt="${site.name}" style="width: 16px; height: 16px; image-rendering: pixelated;">` : 
                    site.icon;
                
                item.innerHTML = `
                    <div class="icon">${iconContent}</div>
                    <div class="text">${site.name}</div>
                `;
                
                container.appendChild(item);
            });
            
            if (premiumSites.length > 0) {
                const separator = document.createElement('div');
                separator.className = 'start-menu-separator';
                container.appendChild(separator);
                
                // Adicionar sites premium
                premiumSites.forEach(site => {
                    const item = document.createElement('div');
                    item.className = 'start-menu-item premium';
                    item.onclick = () => openSite(site);
                    
                    const iconContent = site.icon.endsWith('.png') ? 
                        `<img src="${site.icon}" alt="${site.name}" style="width: 16px; height: 16px; image-rendering: pixelated;">` : 
                        site.icon;
                    
                    item.innerHTML = `
                        <div class="icon">${iconContent}</div>
                        <div class="text">${site.name}</div>
                    `;
                    
                    container.appendChild(item);
                });
            }
        }
        
        // ========================================
        // üìù PROCESSADOR DE TEXTO
        // ========================================
        
        function openTextProcessor() {
            const savedDocuments = JSON.parse(localStorage.getItem('auroraOS_documents') || '[]');
            
            let content = `
                <div style="display: flex; flex-direction: column; height: 100%; font-family: 'Segoe UI', sans-serif;">
                    <div style="background: #2a2a2a; padding: 10px; border-bottom: 2px solid #444; display: flex; gap: 10px; align-items: center;">
                        <button onclick="newDocument()" style="padding: 5px 10px; background: #4CAF50; color: white; border: none; border-radius: 3px; cursor: pointer;">üìÑ Novo</button>
                        <button onclick="saveDocument()" style="padding: 5px 10px; background: #2196F3; color: white; border: none; border-radius: 3px; cursor: pointer;">üíæ Salvar</button>
                        <button onclick="loadDocument()" style="padding: 5px 10px; background: #FF9800; color: white; border: none; border-radius: 3px; cursor: pointer;">üìÇ Abrir</button>
                        <input type="text" id="documentTitle" placeholder="T√≠tulo do documento..." style="padding: 5px; border: 1px solid #555; background: #333; color: white; border-radius: 3px; flex: 1;">
                    </div>
                    <div style="flex: 1; padding: 15px; background: #1a1a1a;">
                        <textarea id="textEditor" placeholder="Digite seu texto aqui..." style="width: 100%; height: 100%; border: none; background: #222; color: #fff; font-family: 'Courier New', monospace; font-size: 14px; line-height: 1.5; resize: none; outline: none; padding: 15px;"></textarea>
                    </div>
                    <div style="background: #2a2a2a; padding: 8px; border-top: 1px solid #444; font-size: 12px; color: #aaa; display: flex; justify-content: space-between;">
                        <span id="documentStatus">Pronto</span>
                        <span id="characterCount">0 caracteres</span>
                    </div>
                </div>
            `;
            
            openMysticalApp('Processador de Texto', content);
            
            // Configurar eventos ap√≥s abrir a janela
            setTimeout(() => {
                const editor = document.getElementById('textEditor');
                const charCount = document.getElementById('characterCount');
                
                if (editor && charCount) {
                    editor.addEventListener('input', function() {
                        charCount.textContent = this.value.length + ' caracteres';
                        document.getElementById('documentStatus').textContent = 'Modificado';
                    });
                }
            }, 100);
        }
        
        function newDocument() {
            document.getElementById('textEditor').value = '';
            document.getElementById('documentTitle').value = '';
            document.getElementById('documentStatus').textContent = 'Novo documento';
            document.getElementById('characterCount').textContent = '0 caracteres';
        }
        
        function saveDocument() {
            const title = document.getElementById('documentTitle').value.trim();
            const content = document.getElementById('textEditor').value;
            
            if (!title) {
                alert('Por favor, digite um t√≠tulo para o documento.');
                return;
            }
            
            if (!content.trim()) {
                alert('O documento est√° vazio.');
                return;
            }
            
            const documents = JSON.parse(localStorage.getItem('auroraOS_documents') || '[]');
            const existingIndex = documents.findIndex(doc => doc.title === title);
            
            const document = {
                title: title,
                content: content,
                lastModified: new Date().toLocaleString('pt-BR'),
                wordCount: content.split(/\s+/).filter(word => word.length > 0).length
            };
            
            if (existingIndex >= 0) {
                documents[existingIndex] = document;
                alert('Documento atualizado com sucesso!');
            } else {
                documents.push(document);
                alert('Documento salvo com sucesso!');
            }
            
            localStorage.setItem('auroraOS_documents', JSON.stringify(documents));
            document.getElementById('documentStatus').textContent = 'Salvo';
            
            // Notificar Gatomante
            setTimeout(() => {
                gatomanteContextual('personalizacao', { acao: 'documento salvo' });
            }, 1000);
        }
        
        function loadDocument() {
            const documents = JSON.parse(localStorage.getItem('auroraOS_documents') || '[]');
            
            if (documents.length === 0) {
                alert('Nenhum documento salvo encontrado.');
                return;
            }
            
            let docList = 'Documentos salvos:\n\n';
            documents.forEach((doc, index) => {
                docList += `${index + 1}. ${doc.title}\n   ${doc.wordCount} palavras - ${doc.lastModified}\n\n`;
            });
            
            const choice = prompt(docList + 'Digite o n√∫mero do documento para abrir:');
            const docIndex = parseInt(choice) - 1;
            
            if (docIndex >= 0 && docIndex < documents.length) {
                const doc = documents[docIndex];
                document.getElementById('documentTitle').value = doc.title;
                document.getElementById('textEditor').value = doc.content;
                document.getElementById('documentStatus').textContent = 'Carregado';
                document.getElementById('characterCount').textContent = doc.content.length + ' caracteres';
            } else {
                alert('N√∫mero inv√°lido.');
            }
        }
        
        // ========================================
        // üìÅ PASTA DOCUMENTOS
        // ========================================
        
        function openDocumentsFolder() {
            const documents = JSON.parse(localStorage.getItem('auroraOS_documents') || '[]');
            
            let content = '<h3>üìÅ Pasta Documentos</h3>';
            
            if (documents.length === 0) {
                content += '<p style="color: #aaa; font-style: italic;">Nenhum documento encontrado. Use o Processador de Texto para criar documentos.</p>';
            } else {
                content += '<div style="margin: 15px 0;">';
                documents.forEach((doc, index) => {
                    content += `
                        <div style="display: flex; align-items: center; padding: 12px; border: 1px solid #444; border-radius: 6px; margin-bottom: 8px; background: #222;">
                            <div style="font-size: 24px; margin-right: 15px;">üìÑ</div>
                            <div style="flex: 1;">
                                <div style="font-weight: bold; color: #fff; margin-bottom: 4px;">${doc.title}</div>
                                <div style="font-size: 12px; color: #aaa;">${doc.wordCount} palavras ‚Ä¢ ${doc.lastModified}</div>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <button onclick="openDocumentInEditor('${doc.title}')" style="padding: 4px 8px; background: #2196F3; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 12px;">Abrir</button>
                                <button onclick="deleteDocument('${doc.title}')" style="padding: 4px 8px; background: #f44336; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 12px;">Excluir</button>
                            </div>
                        </div>
                    `;
                });
                content += '</div>';
            }
            
            openMysticalApp('Pasta Documentos', content);
        }
        
        function openDocumentInEditor(title) {
            // Fechar pasta documentos
            const windows = document.querySelectorAll('.window');
            windows.forEach(win => {
                if (win.querySelector('.window-title').textContent === 'Pasta Documentos') {
                    win.remove();
                }
            });
            
            // Abrir processador de texto
            openTextProcessor();
            
            // Carregar documento espec√≠fico
            setTimeout(() => {
                const documents = JSON.parse(localStorage.getItem('auroraOS_documents') || '[]');
                const doc = documents.find(d => d.title === title);
                
                if (doc) {
                    document.getElementById('documentTitle').value = doc.title;
                    document.getElementById('textEditor').value = doc.content;
                    document.getElementById('documentStatus').textContent = 'Carregado';
                    document.getElementById('characterCount').textContent = doc.content.length + ' caracteres';
                }
            }, 200);
        }
        
        function deleteDocument(title) {
            if (confirm(`Tem certeza que deseja excluir o documento "${title}"?`)) {
                const documents = JSON.parse(localStorage.getItem('auroraOS_documents') || '[]');
                const filteredDocs = documents.filter(doc => doc.title !== title);
                localStorage.setItem('auroraOS_documents', JSON.stringify(filteredDocs));
                
                // Adicionar √† lixeira
                const deletedDoc = documents.find(doc => doc.title === title);
                if (deletedDoc) {
                    addToTrash({ name: deletedDoc.title, icon: 'üìÑ', type: 'document' });
                }
                
                alert('Documento exclu√≠do com sucesso!');
                openDocumentsFolder(); // Reabrir pasta para mostrar mudan√ßas
            }
        }
        
        // ========================================
        // ‚ùì AJUDA DO SISTEMA
        // ========================================
        
        function openSystemHelp() {
            const helpContent = `
                <div style="font-family: 'Segoe UI', sans-serif; line-height: 1.6;">
                    <h2 style="color: #f0aa53; margin-bottom: 20px;">üîÆ Ajuda do Aurora OS ‚Ä¢ MysticSoft</h2>
                    
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: #d4af37; margin-bottom: 10px;">üñ•Ô∏è Navega√ß√£o B√°sica</h3>
                        <ul style="color: #ccc; margin-left: 20px;">
                            <li><strong>√çcones do Desktop:</strong> Clique duas vezes para abrir aplica√ß√µes</li>
                            <li><strong>Arrastar √çcones:</strong> Clique e arraste para reorganizar</li>
                            <li><strong>Menu Iniciar:</strong> Clique no bot√£o Iniciar para acessar aplica√ß√µes</li>
                            <li><strong>Barra de Tarefas:</strong> Mostra aplica√ß√µes abertas e widgets</li>
                        </ul>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: #d4af37; margin-bottom: 10px;">üõ°Ô∏è Sistema AF√ÅST!</h3>
                        <ul style="color: #ccc; margin-left: 20px;">
                            <li><strong>Antiv√≠rus Astrol√≥gico:</strong> Monitora eventos c√≥smicos 24/7</li>
                            <li><strong>Notifica√ß√µes:</strong> Aparecem no canto inferior direito</li>
                            <li><strong>Central AF√ÅST:</strong> Clique no escudo dourado para ver hist√≥rico</li>
                            <li><strong>Voz Feminina:</strong> Alerta "AF√ÅSTE" para eventos cr√≠ticos</li>
                        </ul>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: #d4af37; margin-bottom: 10px;">üê±‚Äç‚¨õ Gatomante - Seu Assistente M√≠stico</h3>
                        <ul style="color: #ccc; margin-left: 20px;">
                            <li><strong>Dicas Contextuais:</strong> Aparece automaticamente com sugest√µes</li>
                            <li><strong>Clique no Gato:</strong> Para obter novas dicas</li>
                            <li><strong>Bal√£o de Fala:</strong> Estilo HQ com bot√£o de fechar</li>
                            <li><strong>Intelig√™ncia:</strong> Aprende seus padr√µes de uso</li>
                        </ul>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: #d4af37; margin-bottom: 10px;">üé® Personaliza√ß√£o</h3>
                        <ul style="color: #ccc; margin-left: 20px;">
                            <li><strong>Temas de Cores:</strong> 6 temas m√≠sticos dispon√≠veis</li>
                            <li><strong>Wallpapers:</strong> Upload de imagens personalizadas</li>
                            <li><strong>Foto de Perfil:</strong> Personalize sua conta</li>
                            <li><strong>Seletor de Cores:</strong> Crie temas √∫nicos</li>
                        </ul>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: #d4af37; margin-bottom: 10px;">üìù Aplica√ß√µes Nativas</h3>
                        <ul style="color: #ccc; margin-left: 20px;">
                            <li><strong>Processador de Texto:</strong> Crie e salve documentos</li>
                            <li><strong>Pasta Documentos:</strong> Gerencie seus arquivos</li>
                            <li><strong>Lixeira:</strong> Recupere itens exclu√≠dos</li>
                            <li><strong>Aplica√ß√µes M√≠sticas:</strong> Ferramentas esot√©ricas √∫nicas</li>
                        </ul>
                    </div>
                    
                    <div style="background: #2a2a2a; padding: 15px; border-radius: 8px; border-left: 4px solid #f0aa53;">
                        <h4 style="color: #f0aa53; margin-bottom: 10px;">üí° Dica Especial</h4>
                        <p style="color: #ccc; margin: 0;">O Aurora OS √© um sistema operacional m√≠stico √∫nico. Explore todas as funcionalidades e deixe o Gatomante gui√°-lo em sua jornada digital!</p>
                    </div>
                </div>
            `;
            
            openMysticalApp('Ajuda do Sistema', helpContent);
        }
        
        function generateColorPalette() {
            const container = document.getElementById('colorPalette');
            container.innerHTML = '';
            
            colorThemes.forEach((theme, index) => {
                const colorOption = document.createElement('div');
                colorOption.className = `color-option ${index === currentTheme ? 'selected' : ''}`;
                colorOption.style.background = `linear-gradient(45deg, ${theme.primary}, ${theme.secondary})`;
                colorOption.title = theme.name;
                colorOption.onclick = () => selectColorTheme(index);
                
                container.appendChild(colorOption);
            });
        }
        
        function generateWallpaperPresets() {
            const container = document.getElementById('wallpaperPresets');
            container.innerHTML = '';
            
            wallpaperPresets.forEach((preset, index) => {
                const wallpaperOption = document.createElement('div');
                wallpaperOption.className = `wallpaper-preset ${index === currentWallpaper ? 'selected' : ''}`;
                wallpaperOption.style.background = preset.gradient;
                wallpaperOption.title = preset.name;
                wallpaperOption.onclick = () => selectWallpaper(index);
                
                container.appendChild(wallpaperOption);
            });
        }
        
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('pt-BR', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            document.getElementById('clock').textContent = timeString;
        }
        
        function updatePlanetaryInfo() {
            const now = new Date();
            const dayOfWeek = now.getDay();
            const hour = now.getHours();
            
            // Calcular hora planet√°ria (simplificado)
            const dayRuler = dayRulers[dayOfWeek];
            const rulerIndex = chaldeanOrder.indexOf(dayRuler);
            const planetIndex = (rulerIndex + hour) % 7;
            const currentPlanet = chaldeanOrder[planetIndex];
            
            // Atualizar interface
            const symbol = planetarySymbols[currentPlanet];
            document.getElementById('planetarySymbol').textContent = symbol;
            document.getElementById('planetaryName').textContent = currentPlanet;
            document.getElementById('currentPlanetSymbol').textContent = symbol;
            document.getElementById('currentPlanetName').textContent = currentPlanet;
            document.getElementById('dayRuler').textContent = dayRuler;
            
            // Determinar per√≠odo (dia/noite) - simplificado
            const period = (hour >= 6 && hour < 18) ? 'dia' : 'noite';
            const hourInPeriod = period === 'dia' ? hour - 5 : (hour >= 18 ? hour - 17 : hour + 7);
            
            document.getElementById('planetaryTime').textContent = 
                `Hora ${hourInPeriod} do ${period === 'dia' ? 'Dia' : 'Noite'} ‚Ä¢ ${hour}:00 - ${(hour + 1) % 24}:00`;
            
            // Verificar se houve mudan√ßa planet√°ria para notificar Gatomante
            if (currentPlanetaryHour && currentPlanetaryHour.planet !== currentPlanet) {
                // Notificar Gatomante sobre mudan√ßa planet√°ria
                setTimeout(() => {
                    gatomanteContextual('planeta_mudou');
                }, 5000);
            }
                    function openSite(siteId) {
            const site = sitesConfig.find(s => s.id === siteId);
            if (!site) return;
            
            if (site.url === 'local://files') {
                // Abrir aplicativo local de arquivos
                openLocalFilesApp();
            } else if (site.url.startsWith('local://')) {
                // Abrir aplica√ß√£o m√≠stica local
                openMysticalApp(site);
            } else {
                // Abrir site em janela
                openWebsite(site);
            }
            hideStartMenu();
            
            // Notificar Gatomante sobre abertura de app
            setTimeout(() => {
                gatomanteContextual('app_aberto', { app: site.name });
                detectarConquistas();
            }, 2000);
        }        
        function openWebsite(site) {
            const windowId = `window-${site.id}`;
            
            // Verificar se janela j√° est√° aberta
            if (document.getElementById(windowId)) {
                focusWindow(windowId);
                return;
            }
            
            const window = document.createElement('div');
            window.id = windowId;
            window.className = 'window active focused';
            window.style.left = `${100 + openWindows.length * 30}px`;
            window.style.top = `${50 + openWindows.length * 30}px`;
            window.style.width = '800px';
            window.style.height = '600px';
            
            window.innerHTML = `
                <div class="window-header">
                    <div class="window-title">
                        <span>${site.icon}</span>
                        <span>${site.name}</span>
                    </div>
                    <div class="window-controls">
                        <div class="window-control" onclick="minimizeWindow('${windowId}')">_</div>
                        <div class="window-control" onclick="maximizeWindow('${windowId}')">‚ñ°</div>
                        <div class="window-control close" onclick="closeWindow('${windowId}')">√ó</div>
                    </div>
                </div>
                <div class="window-content">
                    <div class="loading-overlay" id="loading-${site.id}">
                        <div class="loading-spinner"></div>
                        <div>Carregando ${site.name}...</div>
                    </div>
                    <iframe class="window-iframe" src="${site.url}" onload="hideLoading('${site.id}')"></iframe>
                </div>
                <div class="window-resize-handle"></div>
            `;
            
            document.body.appendChild(window);
            openWindows.push({ id: windowId, title: site.name, icon: site.icon });
            updateTaskbar();
            
            // Remover loading ap√≥s 3 segundos (fallback)
            setTimeout(() => hideLoading(site.id), 3000);
        }
        
        function openLocalFilesApp() {
            const windowId = 'window-files';
            
            if (document.getElementById(windowId)) {
                focusWindow(windowId);
                return;
            }
            
            const window = document.createElement('div');
            window.id = windowId;
            window.className = 'window active focused';
            window.style.left = '150px';
            window.style.top = '100px';
            window.style.width = '700px';
            window.style.height = '500px';
            
            window.innerHTML = `
                <div class="window-header">
                    <div class="window-title">
                        <span>üìÅ</span>
                        <span>Arquivos & Anota√ß√µes</span>
                    </div>
                    <div class="window-controls">
                        <div class="window-control" onclick="minimizeWindow('${windowId}')">_</div>
                        <div class="window-control" onclick="maximizeWindow('${windowId}')">‚ñ°</div>
                        <div class="window-control close" onclick="closeWindow('${windowId}')">√ó</div>
                    </div>
                </div>
                <div class="window-content">
                    <div style="padding: 20px; text-align: center; color: #666;">
                        <h3>Gerenciador de Arquivos</h3>
                        <p>Sistema de arquivos em desenvolvimento...</p>
                        <br>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 30px;">
                            <div style="padding: 20px; border: 1px solid #ccc; border-radius: 8px;">
                                <div style="font-size: 32px; margin-bottom: 10px;">üìÑ</div>
                                <div>Documentos</div>
                            </div>
                            <div style="padding: 20px; border: 1px solid #ccc; border-radius: 8px;">
                                <div style="font-size: 32px; margin-bottom: 10px;">üñºÔ∏è</div>
                                <div>Imagens</div>
                            </div>
                            <div style="padding: 20px; border: 1px solid #ccc; border-radius: 8px;">
                                <div style="font-size: 32px; margin-bottom: 10px;">üéµ</div>
                                <div>√Åudios</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="window-resize-handle"></div>
            `;
            
            document.body.appendChild(window);
            openWindows.push({ id: windowId, title: 'Arquivos & Anota√ß√µes', icon: 'üìÅ' });
            updateTaskbar();
        }
        
        function hideLoading(siteId) {
            const loading = document.getElementById(`loading-${siteId}`);
            if (loading) {
                loading.style.display = 'none';
            }
        }
        
        function closeWindow(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                window.remove();
                openWindows = openWindows.filter(w => w.id !== windowId);
                updateTaskbar();
            }
        }
        
        function minimizeWindow(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                window.style.display = 'none';
            }
        }
        
        function maximizeWindow(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                if (window.style.width === '100vw') {
                    // Restaurar
                    window.style.width = '800px';
                    window.style.height = '600px';
                    window.style.left = '100px';
                    window.style.top = '50px';
                } else {
                    // Maximizar
                    window.style.width = '100vw';
                    window.style.height = 'calc(100vh - 40px)';
                    window.style.left = '0';
                    window.style.top = '0';
                }
            }
        }
        
        function focusWindow(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                window.style.display = 'block';
                window.style.zIndex = '1600';
                
                // Remover foco de outras janelas
                document.querySelectorAll('.window').forEach(w => {
                    if (w.id !== windowId) {
                        w.style.zIndex = '1500';
                    }
                });
            }
        }
        
        function updateTaskbar() {
            const container = document.getElementById('taskbarItems');
            container.innerHTML = '';
            
            openWindows.forEach(window => {
                const item = document.createElement('div');
                item.className = 'taskbar-item';
                item.onclick = () => focusWindow(window.id);
                item.innerHTML = `${window.icon} ${window.title}`;
                container.appendChild(item);
            });
        }
        
        function setupWindowDragging() {
            // Implementa√ß√£o simplificada do drag de janelas
            let isDragging = false;
            let currentWindow = null;
            let offset = { x: 0, y: 0 };
            
            document.addEventListener('mousedown', function(e) {
                const header = e.target.closest('.window-header');
                if (header && !e.target.closest('.window-control')) {
                    isDragging = true;
                    currentWindow = header.closest('.window');
                    const rect = currentWindow.getBoundingClientRect();
                    offset.x = e.clientX - rect.left;
                    offset.y = e.clientY - rect.top;
                    e.preventDefault();
                }
            });
            
            document.addEventListener('mousemove', function(e) {
                if (isDragging && currentWindow) {
                    currentWindow.style.left = (e.clientX - offset.x) + 'px';
                    currentWindow.style.top = (e.clientY - offset.y) + 'px';
                }
            });
            
            document.addEventListener('mouseup', function() {
                isDragging = false;
                currentWindow = null;
            });
        }
        
        // ========================================
        // üîÆ SISTEMA DE APLICA√á√ïES M√çSTICAS LOCAIS
        // ========================================
        
        function openMysticalApp(site) {
            const windowId = `window-${site.id}`;
            
            // Verificar se janela j√° est√° aberta
            if (document.getElementById(windowId)) {
                focusWindow(windowId);
                return;
            }
            
            const window = document.createElement('div');
            window.id = windowId;
            window.className = 'window active focused';
            window.style.left = `${100 + openWindows.length * 30}px`;
            window.style.top = `${50 + openWindows.length * 30}px`;
            window.style.width = '600px';
            window.style.height = '500px';
            
            let appContent = '';
            
            // Gerar conte√∫do espec√≠fico para cada aplica√ß√£o m√≠stica
            switch(site.url) {
                case 'local://crystals':
                    appContent = generateCrystalsApp();
                    break;
                case 'local://herbs':
                    appContent = generateHerbsApp();
                    break;
                case 'local://cards':
                    appContent = generateCardsApp();
                    break;
                case 'local://stars':
                    appContent = generateStarsApp();
                    break;
                case 'local://kabbalah':
                    appContent = generateKabbalahApp();
                    break;
                case 'local://tarot':
                    appContent = generateTarotApp();
                    break;
                case 'local://books':
                    appContent = generateBooksApp();
                    break;
                case 'local://wheel':
                    appContent = generateWheelApp();
                    break;
                case 'local://snake':
                    appContent = generateSnakeGame();
                    break;
                case 'local://solitaire':
                    appContent = generateSolitaireGame();
                    break;
                case 'local://domino':
                    appContent = generateDominoGame();
                    break;
                case 'local://notepad':
                    appContent = generateNotepadApp();
                    break;
                case 'local://calculator':
                    appContent = generateCalculatorApp();
                    break;
                case 'local://reader':
                    appContent = generateReaderApp();
                    break;
                case 'local://player':
                    appContent = generatePlayerApp();
                    break;
                default:
                    appContent = generateDefaultApp(site);
            }
            
            window.innerHTML = `
                <div class="window-header">
                    <div class="window-title">
                        <span>${site.icon}</span>
                        <span>${site.name}</span>
                    </div>
                    <div class="window-controls">
                        <div class="window-control" onclick="minimizeWindow('${windowId}')">_</div>
                        <div class="window-control" onclick="maximizeWindow('${windowId}')">‚ñ°</div>
                        <div class="window-control close" onclick="closeWindow('${windowId}')">√ó</div>
                    </div>
                </div>
                <div class="window-content">
                    ${appContent}
                </div>
                <div class="window-resize-handle"></div>
            `;
            
            document.body.appendChild(window);
            openWindows.push(windowId);
            
            // Tornar janela arrast√°vel
            makeDraggable(window);
            
            // Focar na nova janela
            focusWindow(windowId);
        }
        
        // Geradores de conte√∫do para aplica√ß√µes m√≠sticas
        function generateCrystalsApp() {
            return `
                <div style="padding: 20px; text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; height: 100%; overflow-y: auto;">
                    <h2>üíé Combine os Cristais</h2>
                    <p>Descubra as propriedades m√≠sticas dos cristais e suas combina√ß√µes poderosas.</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                            <div style="font-size: 24px;">üîÆ</div>
                            <h4>Quartzo</h4>
                            <p style="font-size: 12px;">Amplifica√ß√£o e clareza</p>
                        </div>
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                            <div style="font-size: 24px;">üíú</div>
                            <h4>Ametista</h4>
                            <p style="font-size: 12px;">Prote√ß√£o e intui√ß√£o</p>
                        </div>
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                            <div style="font-size: 24px;">üíö</div>
                            <h4>Quartzo Rosa</h4>
                            <p style="font-size: 12px;">Amor e cura emocional</p>
                        </div>
                    </div>
                    
                    <button style="background: var(--dourado); color: var(--azul-escuro); border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold;">
                        üîç Explorar Combina√ß√µes
                    </button>
                </div>
            `;
        }
        
        function generateHerbsApp() {
            return `
                <div style="padding: 20px; text-align: center; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); color: white; height: 100%; overflow-y: auto;">
                    <h2>üåø Combine as Ervas</h2>
                    <p>Aprenda sobre as propriedades m√°gicas das ervas e suas correspond√™ncias.</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                            <div style="font-size: 24px;">üåπ</div>
                            <h4>Rosa</h4>
                            <p style="font-size: 12px;">Amor e prote√ß√£o</p>
                        </div>
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                            <div style="font-size: 24px;">üåô</div>
                            <h4>Lavanda</h4>
                            <p style="font-size: 12px;">Paz e purifica√ß√£o</p>
                        </div>
                        <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                            <div style="font-size: 24px;">üî•</div>
                            <h4>Canela</h4>
                            <p style="font-size: 12px;">Prosperidade e energia</p>
                        </div>
                    </div>
                    
                    <button style="background: var(--dourado); color: var(--azul-escuro); border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold;">
                        üå± Criar Mistura
                    </button>
                </div>
            `;
        }
        
        function generateTarotApp() {
            return `
                <div style="padding: 20px; text-align: center; background: linear-gradient(135deg, #2c3e50 0%, #4a6741 100%); color: white; height: 100%; overflow-y: auto;">
                    <h2>üîÆ Witch Tarot</h2>
                    <p>Consulte as cartas e desvende os mist√©rios do futuro.</p>
                    
                    <div style="margin: 30px 0;">
                        <div style="display: inline-block; background: var(--dourado); color: var(--azul-escuro); padding: 40px 20px; border-radius: 10px; margin: 10px;">
                            <div style="font-size: 48px;">üÉè</div>
                            <p>Carta do Dia</p>
                        </div>
                    </div>
                    
                    <button style="background: var(--dourado); color: var(--azul-escuro); border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; margin: 5px;">
                        üîÆ Tirar Carta
                    </button>
                    <button style="background: var(--vinho); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; margin: 5px;">
                        ‚≠ê Leitura Completa
                    </button>
                </div>
            `;
        }
        
        function generateCalculatorApp() {
            return `
                <div style="padding: 20px; background: #c0c0c0; height: 100%; font-family: 'MS Sans Serif', sans-serif;">
                    <div style="background: white; border: 2px inset #c0c0c0; padding: 10px; margin-bottom: 10px; text-align: right; font-size: 18px; font-family: monospace;">
                        <div id="calc-display">0</div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px;">
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="clearCalc()">C</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="calcInput('/')">/</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="calcInput('*')">*</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="calcInput('-')">-</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="calcInput('7')">7</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="calcInput('8')">8</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="calcInput('9')">9</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer; grid-row: span 2;" onclick="calcInput('+')">+</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="calcInput('4')">4</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="calcInput('5')">5</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="calcInput('6')">6</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="calcInput('1')">1</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="calcInput('2')">2</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="calcInput('3')">3</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer; grid-row: span 2;" onclick="calcEquals()">=</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer; grid-column: span 2;" onclick="calcInput('0')">0</button>
                        <button style="background: #c0c0c0; border: 2px outset #c0c0c0; padding: 15px; cursor: pointer;" onclick="calcInput('.')">.</button>
                    </div>
                </div>
            `;
        }
        
        function generateDefaultApp(site) {
            return `
                <div style="padding: 40px; text-align: center; background: linear-gradient(135deg, var(--azul-escuro) 0%, var(--vinho) 100%); color: white; height: 100%;">
                    <div style="font-size: 64px; margin-bottom: 20px;">${site.icon}</div>
                    <h2>${site.name}</h2>
                    <p>Esta aplica√ß√£o m√≠stica est√° sendo desenvolvida...</p>
                    <p style="font-size: 12px; opacity: 0.8;">Em breve, novas funcionalidades ser√£o adicionadas!</p>
                    
                    <button style="background: var(--dourado); color: var(--azul-escuro); border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 20px;">
                        ‚ú® Em Desenvolvimento
                    </button>
                </div>
            `;
        }
        
        // Fun√ß√µes da calculadora
        let calcExpression = '';
        let calcDisplay = '0';
        
        function calcInput(value) {
            if (calcDisplay === '0' && !isNaN(value)) {
                calcDisplay = value;
            } else {
                calcDisplay += value;
            }
            calcExpression += value;
            document.getElementById('calc-display').textContent = calcDisplay;
        }
        
        function clearCalc() {
            calcExpression = '';
            calcDisplay = '0';
            document.getElementById('calc-display').textContent = calcDisplay;
        }
        
        function calcEquals() {
            try {
                const result = eval(calcExpression);
                calcDisplay = result.toString();
                calcExpression = result.toString();
                document.getElementById('calc-display').textContent = calcDisplay;
            } catch (error) {
                calcDisplay = 'Erro';
                calcExpression = '';
                document.getElementById('calc-display').textContent = calcDisplay;
            }
        }
        
        // Fun√ß√µes do menu de contexto
        function showContextMenu(x, y) {
            const menu = document.getElementById('contextMenu');
            menu.style.display = 'block';
            menu.style.left = x + 'px';
            menu.style.top = y + 'px';
        }
        
        function hideContextMenu() {
            document.getElementById('contextMenu').style.display = 'none';
        }
        
        function refreshDesktop() {
            location.reload();
            hideContextMenu();
        }
        
        function arrangeIcons() {
            // Reorganizar √≠cones automaticamente
            generateDesktopIcons();
            hideContextMenu();
        }
        
        // Fun√ß√µes do menu iniciar
        function toggleStartMenu() {
            const menu = document.getElementById('startMenu');
            menu.classList.toggle('active');
        }
        
        function hideStartMenu() {
            document.getElementById('startMenu').classList.remove('active');
        }
        
        // Fun√ß√µes dos popups
        function toggleCalendarPopup() {
            const popup = document.getElementById('calendarPopup');
            hideAllPopups();
            popup.classList.toggle('active');
            if (popup.classList.contains('active')) {
                generateCalendar();
            }
        }
        
        function toggleVolumePopup() {
            const popup = document.getElementById('volumePopup');
            hideAllPopups();
            popup.classList.toggle('active');
        }
        
        function togglePlanetaryPopup() {
            const popup = document.getElementById('planetaryPopup');
            hideAllPopups();
            popup.classList.toggle('active');
        }
        
        function toggleNotifications() {
            // Implementar sistema de notifica√ß√µes
            console.log('Sistema de notifica√ß√µes em desenvolvimento');
        }
        
        function hideAllPopups() {
            document.querySelectorAll('.popup').forEach(popup => {
                popup.classList.remove('active');
            });
        }
        
        // Fun√ß√µes do calend√°rio
        function generateCalendar() {
            const grid = document.getElementById('calendarGrid');
            const title = document.getElementById('calendarTitle');
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            title.textContent = currentDate.toLocaleDateString('pt-BR', { 
                month: 'long', 
                year: 'numeric' 
            });
            
            grid.innerHTML = '';
            
            // Cabe√ßalhos dos dias da semana
            const dayHeaders = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b'];
            dayHeaders.forEach(day => {
                const header = document.createElement('div');
                header.className = 'calendar-day-header';
                header.textContent = day;
                grid.appendChild(header);
            });
            
            // Primeiro dia do m√™s e √∫ltimo dia
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const today = new Date();
            
            // Dias vazios no in√≠cio
            for (let i = 0; i < firstDay.getDay(); i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day other-month';
                grid.appendChild(emptyDay);
            }
            
            // Dias do m√™s
            for (let day = 1; day <= lastDay.getDate(); day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;
                
                // Marcar dia atual
                if (year === today.getFullYear() && 
                    month === today.getMonth() && 
                    day === today.getDate()) {
                    dayElement.classList.add('today');
                }
                
                grid.appendChild(dayElement);
            }
        }
        
        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateCalendar();
        }
        
        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateCalendar();
        }
        
        // Fun√ß√µes de volume
        function setVolume(event, type) {
            const slider = event.currentTarget;
            const rect = slider.getBoundingClientRect();
            const percentage = ((event.clientX - rect.left) / rect.width) * 100;
            const clampedPercentage = Math.max(0, Math.min(100, percentage));
            
            volumes[type] = clampedPercentage;
            
            const fill = document.getElementById(`${type}VolumeFill`);
            const thumb = document.getElementById(`${type}VolumeThumb`);
            
            fill.style.width = clampedPercentage + '%';
            thumb.style.left = clampedPercentage + '%';
            
            // Notificar Gatomante sobre mudan√ßa de volume (apenas para master)
            if (type === 'master') {
                setTimeout(() => {
                    gatomanteContextual('volume_mudou');
                }, 500);
            }
        }
        
        // Fun√ß√µes de personaliza√ß√£o
        function openPersonalization() {
            document.getElementById('personalizationModal').classList.add('active');
            hideContextMenu();
            
            // Notificar Gatomante sobre personaliza√ß√£o
            setTimeout(() => {
                gatomanteContextual('personalizacao');
            }, 2000);
        }
        
        function closePersonalization() {
            document.getElementById('personalizationModal').classList.remove('active');
        }
        
        function selectColorTheme(index) {
            currentTheme = index;
            applyColorTheme();
            
            // Atualizar sele√ß√£o visual
            document.querySelectorAll('.color-option').forEach((option, i) => {
                option.classList.toggle('selected', i === index);
            });
            
            // Notificar Gatomante sobre mudan√ßa de tema
            setTimeout(() => {
                gatomanteContextual('tema_mudou');
                detectarConquistas();
            }, 1000);
        }
        
        function selectWallpaper(index) {
            currentWallpaper = index;
            applyWallpaper();
            
            // Atualizar sele√ß√£o visual
            document.querySelectorAll('.wallpaper-preset').forEach((preset, i) => {
                preset.classList.toggle('selected', i === index);
            });
        }
        
        function applyColorTheme() {
            const theme = colorThemes[currentTheme];
            const root = document.documentElement;
            
            root.style.setProperty('--vinho', theme.primary);
            root.style.setProperty('--azul-escuro', theme.secondary);
            root.style.setProperty('--dourado', theme.accent);
            root.style.setProperty('--theme-taskbar', theme.primary);
            root.style.setProperty('--theme-start-btn', theme.primary);
            root.style.setProperty('--theme-start-text', theme.accent);
            root.style.setProperty('--theme-clock', theme.accent);
            root.style.setProperty('--theme-window-header', theme.secondary);
        }
        
        function applyWallpaper() {
            const wallpaper = wallpaperPresets[currentWallpaper];
            const root = document.documentElement;
            
            root.style.setProperty('--theme-bg', wallpaper.gradient);
            document.body.style.background = wallpaper.gradient;
            document.querySelector('.desktop').style.background = wallpaper.gradient;
        }
        
        function uploadWallpaper(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imageUrl = e.target.result;
                    document.body.style.backgroundImage = `url(${imageUrl})`;
                    document.body.style.backgroundSize = 'cover';
                    document.body.style.backgroundPosition = 'center';
                    document.querySelector('.desktop').style.backgroundImage = `url(${imageUrl})`;
                    document.querySelector('.desktop').style.backgroundSize = 'cover';
                    document.querySelector('.desktop').style.backgroundPosition = 'center';
                };
                reader.readAsDataURL(file);
            }
        }
        
        function togglePlanetaryWidget() {
            const widget = document.querySelector('.taskbar-widget');
            const checkbox = document.getElementById('showPlanetaryWidget');
            widget.style.display = checkbox.checked ? 'flex' : 'none';
        }
        
        function toggleNotifications() {
            const icon = document.querySelector('.notification-icon');
            const checkbox = document.getElementById('showNotifications');
            icon.style.display = checkbox.checked ? 'block' : 'none';
        }
        
        function toggleVolumeControl() {
            const icon = document.querySelector('.volume-icon');
            const checkbox = document.getElementById('showVolumeControl');
            icon.style.display = checkbox.checked ? 'block' : 'none';
        }
        
        function savePersonalization() {
            const settings = {
                theme: currentTheme,
                wallpaper: currentWallpaper,
                showPlanetaryWidget: document.getElementById('showPlanetaryWidget').checked,
                showNotifications: document.getElementById('showNotifications').checked,
                showVolumeControl: document.getElementById('showVolumeControl').checked,
                volumes: volumes
            };
            
            // Salvar para usu√°rio logado ou localStorage
            if (currentUser) {
                saveUserSettings();
            } else {
                localStorage.setItem('auroraOS_settings', JSON.stringify(settings));
            }
            
            closePersonalization();
            
            // Mostrar notifica√ß√£o de sucesso
            console.log('Configura√ß√µes salvas com sucesso!');
        }
        
        function loadPersonalization() {
            let settings = null;
            
            // Carregar configura√ß√µes do usu√°rio logado ou localStorage
            if (currentUser && currentUser.settings) {
                settings = currentUser.settings;
            } else {
                const saved = localStorage.getItem('auroraOS_settings');
                if (saved) {
                    settings = JSON.parse(saved);
                }
            }
            
            if (settings) {
                currentTheme = settings.theme || 0;
                currentWallpaper = settings.wallpaper || 0;
                volumes = settings.volumes || volumes;
                
                applyColorTheme();
                applyWallpaper();
                
                // Aplicar configura√ß√µes de widgets
                if (settings.showPlanetaryWidget !== undefined) {
                    document.getElementById('showPlanetaryWidget').checked = settings.showPlanetaryWidget;
                    togglePlanetaryWidget();
                }
                
                if (settings.showNotifications !== undefined) {
                    document.getElementById('showNotifications').checked = settings.showNotifications;
                    toggleNotifications();
                }
                
                if (settings.showVolumeControl !== undefined) {
                    document.getElementById('showVolumeControl').checked = settings.showVolumeControl;
                    toggleVolumeControl();
                }
            }
        }
        
        function resetPersonalization() {
            localStorage.removeItem('auroraOS_settings');
            currentTheme = 0;
            currentWallpaper = 0;
            volumes = { master: 70, notifications: 50, system: 60 };
            
            applyColorTheme();
            applyWallpaper();
            
            // Resetar checkboxes
            document.getElementById('showPlanetaryWidget').checked = true;
            document.getElementById('showNotifications').checked = true;
            document.getElementById('showVolumeControl').checked = true;
            
            togglePlanetaryWidget();
            toggleNotifications();
            toggleVolumeControl();
            
            // Atualizar sele√ß√µes visuais
            generateColorPalette();
            generateWallpaperPresets();
        }
        
        // ========================================
        // üì∏ SISTEMA DE UPLOAD DE FOTO E WALLPAPER
        // ========================================
        
        function uploadProfilePhoto(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Validar tipo de arquivo
            if (!file.type.startsWith('image/')) {
                alert('Por favor, selecione apenas arquivos de imagem.');
                return;
            }
            
            // Validar tamanho (m√°ximo 2MB para foto de perfil)
            if (file.size > 2 * 1024 * 1024) {
                alert('A imagem deve ter no m√°ximo 2MB.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const imageData = e.target.result;
                
                // Atualizar preview
                const preview = document.getElementById('profilePhotoPreview');
                preview.innerHTML = `<img src="${imageData}" alt="Foto de Perfil">`;
                
                // Salvar no localStorage
                if (currentUser) {
                    currentUser.profilePhoto = imageData;
                    userDatabase[currentUser.email] = currentUser;
                    localStorage.setItem('auroraOS_users', JSON.stringify(userDatabase));
                    sessionStorage.setItem('auroraOS_current_user', JSON.stringify(currentUser));
                }
                
                // Notificar Gatomante
                setTimeout(() => {
                    gatomanteContextual('personalizacao', { acao: 'foto de perfil atualizada' });
                }, 1500);
            };
            
            reader.readAsDataURL(file);
        }
        
        function removeProfilePhoto() {
            // Remover preview
            const preview = document.getElementById('profilePhotoPreview');
            preview.innerHTML = 'üë§';
            
            // Remover do usu√°rio
            if (currentUser) {
                delete currentUser.profilePhoto;
                userDatabase[currentUser.email] = currentUser;
                localStorage.setItem('auroraOS_users', JSON.stringify(userDatabase));
                sessionStorage.setItem('auroraOS_current_user', JSON.stringify(currentUser));
            }
            
            // Limpar input
            document.getElementById('profilePhotoInput').value = '';
        }
        
        function uploadWallpaper(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Validar tipo de arquivo
            if (!file.type.startsWith('image/')) {
                alert('Por favor, selecione apenas arquivos de imagem.');
                return;
            }
            
            // Validar tamanho (m√°ximo 5MB para wallpaper)
            if (file.size > 5 * 1024 * 1024) {
                alert('A imagem deve ter no m√°ximo 5MB.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const imageData = e.target.result;
                
                // Mostrar preview
                const preview = document.getElementById('customWallpaperPreview');
                preview.style.display = 'block';
                preview.style.backgroundImage = `url(${imageData})`;
                
                // Aplicar wallpaper personalizado
                applyCustomWallpaper(imageData);
                
                // Notificar Gatomante
                setTimeout(() => {
                    gatomanteContextual('personalizacao', { acao: 'wallpaper personalizado aplicado' });
                }, 1500);
            };
            
            reader.readAsDataURL(file);
        }
        
        function applyCustomWallpaper(imageData) {
            // Aplicar wallpaper personalizado
            document.body.style.backgroundImage = `url(${imageData})`;
            document.body.style.backgroundSize = 'cover';
            document.body.style.backgroundPosition = 'center';
            document.body.style.backgroundRepeat = 'no-repeat';
            
            // Salvar configura√ß√£o
            const settings = {
                theme: currentTheme,
                wallpaper: 'custom',
                customWallpaper: imageData,
                volumes: volumes,
                showPlanetaryWidget: document.getElementById('showPlanetaryWidget').checked,
                showNotifications: document.getElementById('showNotifications').checked,
                showVolumeControl: document.getElementById('showVolumeControl').checked
            };
            
            if (currentUser) {
                currentUser.settings = settings;
                userDatabase[currentUser.email] = currentUser;
                localStorage.setItem('auroraOS_users', JSON.stringify(userDatabase));
            } else {
                localStorage.setItem('auroraOS_settings', JSON.stringify(settings));
            }
        }
        
        function applyCustomColor(colorValue) {
            // Aplicar cor personalizada como tema
            document.documentElement.style.setProperty('--theme-primary', colorValue);
            document.documentElement.style.setProperty('--theme-secondary', adjustBrightness(colorValue, -20));
            document.documentElement.style.setProperty('--theme-accent', adjustBrightness(colorValue, 20));
            
            // Atualizar input hex
            document.getElementById('colorHexInput').value = colorValue;
            
            // Salvar como tema personalizado
            currentTheme = 'custom';
            savePersonalization();
        }
        
        function applyCustomHex(hexValue) {
            if (hexValue.match(/^#[0-9A-F]{6}$/i)) {
                document.getElementById('customColorInput').value = hexValue;
                applyCustomColor(hexValue);
            }
        }
        
        function adjustBrightness(hex, percent) {
            // Fun√ß√£o auxiliar para ajustar brilho da cor
            const num = parseInt(hex.replace("#", ""), 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
        }
        
        function loadUserProfilePhoto() {
            if (currentUser && currentUser.profilePhoto) {
                const preview = document.getElementById('profilePhotoPreview');
                if (preview) {
                    preview.innerHTML = `<img src="${currentUser.profilePhoto}" alt="Foto de Perfil">`;
                }
            }
        }
        
        function loadCustomWallpaper() {
            const settings = currentUser ? currentUser.settings : JSON.parse(localStorage.getItem('auroraOS_settings') || '{}');
            
            if (settings.wallpaper === 'custom' && settings.customWallpaper) {
                document.body.style.backgroundImage = `url(${settings.customWallpaper})`;
                document.body.style.backgroundSize = 'cover';
                document.body.style.backgroundPosition = 'center';
                document.body.style.backgroundRepeat = 'no-repeat';
                
                // Mostrar preview no modal
                const preview = document.getElementById('customWallpaperPreview');
                if (preview) {
                    preview.style.display = 'block';
                    preview.style.backgroundImage = `url(${settings.customWallpaper})`;
                }
            }
        }
        
        // Sistema Gatomante - Assistente M√≠stico
        const gatomante = {
            nome: "Gatomante",
            estado: "ativo",
            humor: "sabio",
            ultimaAparicao: 0,
            dicasJaMostradas: [],
            
            // Base de conhecimento de dicas expandida
            dicas: {
                boasVindas: [
                    "Miau! Bem-vindo ao Aurora OS, humano... Vejo que voc√™ busca conhecimento m√≠stico.",
                    "Ah, mais um mortal adentrando os mist√©rios digitais. Permita-me gui√°-lo...",
                    "Sauda√ß√µes! Sou Gatomante, seu guia pelos caminhos esot√©ricos deste sistema.",
                    "As estrelas se alinharam para sua chegada... que interessante! üåü"
                ],
                boasVindasPersonalizada: [
                    "Ah, {nome}... as energias c√≥smicas sussurraram sua chegada!",
                    "Bem-vindo de volta, {nome}! Senti sua aura se aproximando...",
                    "Ol√°, {nome}! Espero que tenha trazido curiosidade para nossa jornada m√≠stica!",
                    "Miau, {nome}! Pronto para desvendar mais segredos digitais?"
                ],
                navegacao: [
                    "Clique com o bot√£o direito no desktop para personalizar... at√© um filhote saberia isso!",
                    "Arraste as janelas pela barra de t√≠tulo, n√£o √© magia negra, √© s√≥ tecnologia.",
                    "O widget planet√°rio mostra a hora atual... muito √∫til para rituais, n√£o acha?",
                    "Use o menu Iniciar para acessar seus aplicativos favoritos... elementar!"
                ],
                navegacaoPersonalizada: [
                    "Vejo que voc√™ gosta do tema {tema}, {nome}... excelente escolha m√≠stica!",
                    "Seus {numApps} aplicativos favoritos est√£o bem organizados, {nome}!",
                    "Notei que voc√™ usa muito o {appFavorito}... um verdadeiro conhecedor!",
                    "Que tal explorar algo novo hoje, {nome}? H√° mist√©rios inexplorados aqui!"
                ],
                misticas: [
                    "A hora planet√°ria mudou para {planeta}... momento prop√≠cio para {acao}!",
                    "As estrelas se alinham favoravelmente... que tal explorar algo novo?",
                    "Sinto energias de {planeta} no ar... perfeito para {atividade}!",
                    "A lua sussurra segredos... mas primeiro, que tal personalizar seu tema?"
                ],
                tecnicas: [
                    "Seus atalhos est√£o desorganizados... um verdadeiro caos c√≥smico!",
                    "Que tal personalizar seu tema? At√© gatos gostam de variedade.",
                    "O sistema de volume permite controlar cada aspecto... muito √∫til!",
                    "Voc√™ pode adicionar novos sites ao sistema... magia moderna!"
                ],
                tecnicasPersonalizadas: [
                    "Vejo que voc√™ mudou o tema {vezes} vezes, {nome}... um verdadeiro artista m√≠stico!",
                    "Seu volume est√° em {volume}%... perfeito para rituais noturnos!",
                    "Voc√™ tem {numSites} sites configurados... impressionante cole√ß√£o digital!",
                    "Que tal experimentar o tema {sugestaoTema}? Combinaria com sua aura!"
                ],
                inatividade: [
                    "Hmm... parece que voc√™ est√° contemplando o vazio c√≥smico...",
                    "Posso ajud√°-lo com algo? Ou prefere continuar admirando minha eleg√¢ncia?",
                    "O tempo passa... como as areias de uma ampulheta m√≠stica...",
                    "Que tal explorar alguma funcionalidade? Estou aqui para gui√°-lo!"
                ],
                inactividadePersonalizada: [
                    "{nome}, as energias c√≥smicas sugerem uma pausa... ou a√ß√£o?",
                    "Vejo que voc√™ est√° meditando, {nome}... ou apenas procrastinando?",
                    "O {planeta} atual favorece {acao}, {nome}... que tal tentar?",
                    "Sua √∫ltima atividade foi {ultimaAcao}... pronto para algo novo?"
                ],
                conquistas: [
                    "Parab√©ns! Voc√™ desbloqueou o mist√©rio da personaliza√ß√£o!",
                    "Impressionante! Voc√™ dominou {numAcoes} funcionalidades m√≠sticas!",
                    "Excelente! Voc√™ se tornou um verdadeiro mago digital!",
                    "Fant√°stico! As estrelas celebram sua dedica√ß√£o!"
                ],
                dicas_avancadas: [
                    "Dica secreta: Pressione Ctrl+Shift+G para invocar poderes ocultos!",
                    "Mist√©rio revelado: O tema muda com as fases da lua... experimente!",
                    "Segredo ancestral: Clique 3 vezes no logo para easter eggs!",
                    "Conhecimento oculto: O widget planet√°rio prev√™ momentos prop√≠cios!"
                ],
                afast_alerts: [
                    "AF√ÅSTI! O sistema detectou {evento}... mantenha-se protegido!",
                    "Alerta m√≠stico: {evento} foi identificado pelo nosso antiv√≠rus astrol√≥gico!",
                    "Cuidado, {nome}! O AF√ÅST detectou energias de {evento}...",
                    "Prote√ß√£o ativada! {evento} n√£o passar√° despercebido pelo AF√ÅST!"
                ],
                afast_info: [
                    "O AF√ÅST √© nosso antiv√≠rus astrol√≥gico... protege contra energias c√≥smicas adversas!",
                    "Clique no escudo dourado üõ°Ô∏è para ver a central de notifica√ß√µes AF√ÅST!",
                    "O sistema AF√ÅST monitora eventos como Merc√∫rio retr√≥grado e eclipses...",
                    "Quando o AF√ÅST alerta, √© melhor prestar aten√ß√£o... confie em mim!"
                ],
                demo_login: [
                    "Bem-vindo √† conta demo, Luna Mystica! Sou o Gatomante, seu guia m√≠stico pessoal.",
                    "Ol√°, Luna! Esta conta demo mostra todas as funcionalidades do Aurora OS... explore √† vontade!",
                    "Miau! Vejo que voc√™ √© de Le√£o com Lua em Escorpi√£o... uma combina√ß√£o poderosa!",
                    "Luna, sua conta demo tem mapa astral completo e hist√≥rico AF√ÅST... perfeito para explorar!"
                ],
                demo_features: [
                    "Esta conta demo tem 47 logins e 15 personaliza√ß√µes... veja como tudo funciona!",
                    "Seu perfil astrol√≥gico est√° completo: Sol em Le√£o, Lua em Escorpi√£o, Ascendente em Libra!",
                    "O sistema AF√ÅST j√° detectou 8 eventos astrol√≥gicos nesta conta... impressionante!",
                    "Explore o tema Roxo Imperial e o wallpaper Aurora... combinam com sua energia!"
                ]
            },
            
            // Sistema de contexto inteligente
            contexto: {
                usuarioLogado: false,
                nomeUsuario: '',
                tempoSessao: 0,
                acoesPorSessao: 0,
                temaAtual: 0,
                appsFavoritos: [],
                ultimaAcao: '',
                planetaAtual: 'Sol',
                numeroPersonalizacoes: 0,
                conquistasDesbloqueadas: []
            },
            
            // Mapeamento de planetas para a√ß√µes
            planetasAcoes: {
                'Sol': { acao: 'criatividade', atividade: 'projetos criativos' },
                'Lua': { acao: 'intui√ß√£o', atividade: 'medita√ß√£o' },
                'Marte': { acao: 'a√ß√£o', atividade: 'tarefas desafiadoras' },
                'Merc√∫rio': { acao: 'comunica√ß√£o', atividade: 'estudos' },
                'J√∫piter': { acao: 'expans√£o', atividade: 'aprendizado' },
                'V√™nus': { acao: 'harmonia', atividade: 'arte e beleza' },
                'Saturno': { acao: 'disciplina', atividade: 'organiza√ß√£o' }
            }
        };
        
        let gatomanteTimer = null;
        let gatomanteVisible = false;
        
        function showGatomante(tipo = 'boasVindas', delay = 0, contextoExtra = {}) {
            setTimeout(() => {
                const container = document.getElementById('gatomanteContainer');
                const textElement = document.getElementById('gatomanteText');
                
                // Atualizar contexto do Gatomante
                updateGatomanteContext();
                
                // Escolher dica inteligente baseada no contexto
                const dicaPersonalizada = getSmartTip(tipo, contextoExtra);
                
                textElement.textContent = dicaPersonalizada;
                container.classList.add('active');
                gatomanteVisible = true;
                
                // Registrar a√ß√£o
                gatomante.contexto.acoesPorSessao++;
                
                // Auto-hide ap√≥s 8 segundos
                clearTimeout(gatomanteTimer);
                gatomanteTimer = setTimeout(() => {
                    hideGatomante();
                }, 8000);
                
                // Atualizar √∫ltima apari√ß√£o
                gatomante.ultimaAparicao = Date.now();
                
            }, delay);
        }
        
        function updateGatomanteContext() {
            // Atualizar contexto com informa√ß√µes atuais
            gatomante.contexto.usuarioLogado = !!currentUser;
            gatomante.contexto.nomeUsuario = currentUser ? currentUser.name.split(' ')[0] : '';
            gatomante.contexto.temaAtual = currentTheme;
            gatomante.contexto.planetaAtual = document.getElementById('planetaryName')?.textContent || 'Sol';
            gatomante.contexto.tempoSessao = Date.now() - (gatomante.ultimaAparicao || Date.now());
            
            // Contar personaliza√ß√µes do usu√°rio
            if (currentUser && currentUser.settings) {
                gatomante.contexto.numeroPersonalizacoes = 
                    (currentUser.settings.theme !== 0 ? 1 : 0) +
                    (currentUser.settings.wallpaper !== 0 ? 1 : 0) +
                    (currentUser.settings.volumes.master !== 70 ? 1 : 0);
            }
        }
        
        function getSmartTip(tipo, contextoExtra = {}) {
            const ctx = gatomante.contexto;
            let dicasDisponiveis = [];
            let dicaEscolhida = '';
            
            // Escolher categoria de dicas baseada no contexto
            if (ctx.usuarioLogado && gatomante.dicas[tipo + 'Personalizada']) {
                dicasDisponiveis = gatomante.dicas[tipo + 'Personalizada'];
            } else if (ctx.usuarioLogado && tipo === 'inatividade' && gatomante.dicas['inactividadePersonalizada']) {
                dicasDisponiveis = gatomante.dicas['inactividadePersonalizada'];
            } else {
                dicasDisponiveis = gatomante.dicas[tipo] || gatomante.dicas.boasVindas;
            }
            
            // Escolher dica aleat√≥ria
            dicaEscolhida = dicasDisponiveis[Math.floor(Math.random() * dicasDisponiveis.length)];
            
            // Personalizar dica com contexto
            dicaEscolhida = personalizarDica(dicaEscolhida, contextoExtra);
            
            return dicaEscolhida;
        }
        
        function personalizarDica(dica, contextoExtra = {}) {
            const ctx = gatomante.contexto;
            const temas = ['Aurora Sagrada', 'Windows ME', 'Cyberpunk', 'Vintage'];
            
            // Substitui√ß√µes de contexto
            const substituicoes = {
                '{nome}': ctx.nomeUsuario,
                '{tema}': temas[ctx.temaAtual] || 'Aurora Sagrada',
                '{planeta}': ctx.planetaAtual,
                '{acao}': gatomante.planetasAcoes[ctx.planetaAtual]?.acao || 'reflex√£o',
                '{atividade}': gatomante.planetasAcoes[ctx.planetaAtual]?.atividade || 'contempla√ß√£o',
                '{numApps}': sitesConfig.length,
                '{appFavorito}': sitesConfig[0]?.name || 'aplicativo',
                '{vezes}': ctx.numeroPersonalizacoes,
                '{volume}': Math.round(volumes.master),
                '{numSites}': sitesConfig.length,
                '{sugestaoTema}': temas[(ctx.temaAtual + 1) % temas.length],
                '{ultimaAcao}': ctx.ultimaAcao || 'explora√ß√£o',
                '{numAcoes}': ctx.acoesPorSessao,
                ...contextoExtra
            };
            
            // Aplicar substitui√ß√µes
            let dicaPersonalizada = dica;
            for (const [placeholder, valor] of Object.entries(substituicoes)) {
                dicaPersonalizada = dicaPersonalizada.replace(new RegExp(placeholder, 'g'), valor);
            }
            
            return dicaPersonalizada;
        }
        
        function hideGatomante() {
            const container = document.getElementById('gatomanteContainer');
            container.classList.remove('active');
            gatomanteVisible = false;
            clearTimeout(gatomanteTimer);
        }
        
        function gatomanteContextual(acao, contextoExtra = {}) {
            // Evitar spam de dicas
            if (gatomanteVisible || Date.now() - gatomante.ultimaAparicao < 10000) {
                return;
            }
            
            // Registrar a√ß√£o no contexto
            gatomante.contexto.ultimaAcao = acao;
            
            let tipoDica = 'navegacao';
            let delay = 1000;
            
            switch(acao) {
                case 'personalizacao':
                    tipoDica = 'tecnicas';
                    delay = 2000;
                    break;
                case 'planeta_mudou':
                    tipoDica = 'misticas';
                    delay = 1500;
                    break;
                case 'inatividade':
                    tipoDica = 'inatividade';
                    delay = 500;
                    break;
                case 'primeiro_acesso':
                    tipoDica = currentUser ? 'boasVindasPersonalizada' : 'boasVindas';
                    delay = 3000;
                    break;
                case 'login_sucesso':
                    tipoDica = 'boasVindasPersonalizada';
                    delay = 2000;
                    break;
                case 'afast_alert':
                    tipoDica = 'afast_alerts';
                    delay = 1000;
                    break;
                case 'afast_info':
                    tipoDica = 'afast_info';
                    delay = 1500;
                    break;
                case 'tema_mudou':
                    tipoDica = 'tecnicasPersonalizadas';
                    contextoExtra.acao = 'mudan√ßa de tema';
                    delay = 1500;
                    break;
                case 'volume_mudou':
                    tipoDica = 'tecnicasPersonalizadas';
                    contextoExtra.acao = 'ajuste de volume';
                    delay = 1000;
                    break;
                case 'app_aberto':
                    tipoDica = 'navegacaoPersonalizada';
                    contextoExtra.app = contextoExtra.app || 'aplicativo';
                    delay = 1500;
                    break;
                case 'conquista':
                    tipoDica = 'conquistas';
                    delay = 1000;
                    break;
                case 'dica_avancada':
                    tipoDica = 'dicas_avancadas';
                    delay = 2000;
                    break;
                case 'demo_login':
                    tipoDica = 'demo_login';
                    delay = 1000;
                    break;
                case 'demo_features':
                    tipoDica = 'demo_features';
                    delay = 1500;
                    break;
                default:
                    tipoDica = 'navegacao';
            }
            
            showGatomante(tipoDica, delay, contextoExtra);
        }
        
        function detectarConquistas() {
            const ctx = gatomante.contexto;
            const conquistasAntigas = ctx.conquistasDesbloqueadas.length;
            
            // Conquista: Primeiro login
            if (currentUser && !ctx.conquistasDesbloqueadas.includes('primeiro_login')) {
                ctx.conquistasDesbloqueadas.push('primeiro_login');
                setTimeout(() => {
                    gatomanteContextual('conquista', { conquista: 'Primeiro Login M√≠stico!' });
                }, 5000);
            }
            
            // Conquista: Personaliza√ß√£o
            if (ctx.numeroPersonalizacoes >= 3 && !ctx.conquistasDesbloqueadas.includes('personalizador')) {
                ctx.conquistasDesbloqueadas.push('personalizador');
                gatomanteContextual('conquista', { conquista: 'Mestre da Personaliza√ß√£o!' });
            }
            
            // Conquista: Explorador
            if (ctx.acoesPorSessao >= 10 && !ctx.conquistasDesbloqueadas.includes('explorador')) {
                ctx.conquistasDesbloqueadas.push('explorador');
                gatomanteContextual('conquista', { conquista: 'Explorador C√≥smico!' });
            }
            
            // Conquista: Tempo de sess√£o
            if (ctx.tempoSessao > 300000 && !ctx.conquistasDesbloqueadas.includes('dedicado')) { // 5 minutos
                ctx.conquistasDesbloqueadas.push('dedicado');
                gatomanteContextual('conquista', { conquista: 'Usu√°rio Dedicado!' });
            }
        }
        
        function gatomanteThinking() {
            const sprite = document.getElementById('gatomanteCharacter');
            sprite.classList.add('gatomante-thinking');
            
            setTimeout(() => {
                sprite.classList.remove('gatomante-thinking');
            }, 2000);
        }
        
        // Detectar inatividade do usu√°rio
        let inactivityTimer = null;
        let lastActivity = Date.now();
        
        function resetInactivityTimer() {
            lastActivity = Date.now();
            clearTimeout(inactivityTimer);
            
            inactivityTimer = setTimeout(() => {
                if (!gatomanteVisible) {
                    gatomanteContextual('inatividade');
                }
            }, 30000); // 30 segundos de inatividade
        }
        
        // Eventos para detectar atividade
        document.addEventListener('mousemove', resetInactivityTimer);
        document.addEventListener('click', resetInactivityTimer);
        document.addEventListener('keypress', resetInactivityTimer);
        
        // Clique no Gatomante para nova dica
        document.getElementById('gatomanteCharacter').addEventListener('click', () => {
            if (gatomanteVisible) {
                gatomanteThinking();
                setTimeout(() => {
                    showGatomante('navegacao');
                }, 1000);
            }
        });
        
        // Inicializar Gatomante
        function initGatomante() {
            // Verificar se √© primeira visita
            const primeiraVisita = !localStorage.getItem('auroraOS_gatomante_visited');
            
            if (primeiraVisita) {
                localStorage.setItem('auroraOS_gatomante_visited', 'true');
                showGatomante('boasVindas', 2000);
            } else {
                // Usu√°rio retornando
                const saudacoes = [
                    "Ah, voc√™ retornou... as energias c√≥smicas o trouxeram de volta!",
                    "Bem-vindo de volta, mortal... senti sua presen√ßa se aproximando.",
                    "Ol√° novamente! Espero que tenha trazido oferendas... ou pelo menos curiosidade!"
                ];
                const saudacao = saudacoes[Math.floor(Math.random() * saudacoes.length)];
                
                setTimeout(() => {
                    const textElement = document.getElementById('gatomanteText');
                    textElement.textContent = saudacao;
                    showGatomante('boasVindas', 1500);
                }, 1000);
            }
            
            // Iniciar timer de inatividade
            resetInactivityTimer();
        }
        
        // Sistema de Boot e Boas-vindas
        let bootProgress = 0;
        let bootSteps = [
            "Inicializando sistema m√≠stico...",
            "Carregando energias c√≥smicas...",
            "Conectando com as esferas celestiais...",
            "Preparando o Gatomante...",
            "Alinhando chakras digitais...",
            "Invocando interfaces ancestrais...",
            "Ativando portais dimensionais...",
            "Sistema pronto para uso!"
        ];
        
        function createMysticalParticles(containerId) {
            const container = document.getElementById(containerId);
            const particles = ['‚ú®', 'üåü', '‚≠ê', 'üí´', 'üîÆ', 'üåô', '‚òΩ', '‚òæ'];
            
            setInterval(() => {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.textContent = particles[Math.floor(Math.random() * particles.length)];
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 2 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                
                container.appendChild(particle);
                
                // Remover part√≠cula ap√≥s anima√ß√£o
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                }, 8000);
            }, 500);
        }
        
        function updateBootProgress() {
            const progressBar = document.getElementById('bootProgressBar');
            const statusText = document.getElementById('bootStatus');
            
            if (bootProgress < bootSteps.length) {
                const percentage = ((bootProgress + 1) / bootSteps.length) * 100;
                progressBar.style.width = percentage + '%';
                statusText.textContent = bootSteps[bootProgress];
                bootProgress++;
                
                if (bootProgress < bootSteps.length) {
                    setTimeout(updateBootProgress, 800);
                } else {
                    setTimeout(showWelcomeScreen, 1000);
                }
            }
        }
        
        function showWelcomeScreen() {
            const bootScreen = document.getElementById('bootScreen');
            const welcomeScreen = document.getElementById('welcomeScreen');
            
            bootScreen.classList.add('hidden');
            
            setTimeout(() => {
                bootScreen.style.display = 'none';
                welcomeScreen.classList.add('active');
                createMysticalParticles('welcomeParticles');
            }, 1000);
        }
        
        function enterSystem() {
            const welcomeScreen = document.getElementById('welcomeScreen');
            
            // Tocar sons de dial-up em sequ√™ncia
            playDialupSounds();
            
            welcomeScreen.classList.add('hidden');
            
            setTimeout(() => {
                welcomeScreen.style.display = 'none';
                
                // Verificar se usu√°rio j√° est√° logado
                if (checkAutoLogin()) {
                    // Ir direto para o sistema
                    initMainSystem();
                } else {
                    // Mostrar tela de autentica√ß√£o
                    showAuthScreen();
                }
            }, 1000);
        }
        
        function playDialupSounds() {
            const sound1 = document.getElementById('dialupSound1');
            const sound2 = document.getElementById('dialupSound2');
            
            // Configurar volume baseado nas configura√ß√µes do sistema
            const masterVolume = volumes.master / 100;
            const systemVolume = volumes.system / 100;
            const finalVolume = masterVolume * systemVolume;
            
            sound1.volume = finalVolume;
            sound2.volume = finalVolume;
            
            // Tocar primeiro som
            sound1.play().catch(e => {
                console.log('Erro ao reproduzir primeiro som de dial-up:', e);
            });
            
            // Quando o primeiro som terminar, tocar o segundo
            sound1.addEventListener('ended', function() {
                sound2.play().catch(e => {
                    console.log('Erro ao reproduzir segundo som de dial-up:', e);
                });
            }, { once: true });
        }
        
        function initMainSystem() {
            // Fun√ß√µes j√° existentes de inicializa√ß√£o
            generateDesktopIcons();
            generateStartMenu();
            generateColorPalette();
            generateWallpaperPresets();
            updateClock();
            updatePlanetaryInfo();
            loadPersonalization();
            
            // Carregar configura√ß√µes do sistema AF√ÅST!
            loadAfastVoiceSettings();
            loadAfastNotifications();
            initAfastSystem();
            
            // Carregar foto de perfil e wallpaper personalizado
            loadUserProfilePhoto();
            loadCustomWallpaper();
            
            // Atualiza rel√≥gio a cada segundo
            setInterval(updateClock, 1000);
            
            // Atualiza informa√ß√µes planet√°rias a cada minuto
            setInterval(updatePlanetaryInfo, 60000);
            
            // Event listeners
            setupEventListeners();
            
            // Inicializar Gatomante ap√≥s entrar no sistema
            setTimeout(() => {
                initGatomante();
                // Detectar conquistas periodicamente
                setInterval(detectarConquistas, 30000); // A cada 30 segundos
                
                // Inicializar sistema AF√ÅST
                initAfastSystem();
            }, 2000);
        }
        
        // Sistema de Autentica√ß√£o
        let currentUser = null;
        let userDatabase = JSON.parse(localStorage.getItem('auroraOS_users') || '{}');
        
        // Criar conta demo se n√£o existir
        function initDemoAccount() {
            const demoEmail = 'demo@auroraos.com';
            
            if (!userDatabase[demoEmail]) {
                const demoUser = {
                    id: 'demo_user_001',
                    name: 'Luna Mystica',
                    email: demoEmail,
                    password: 'demo123',
                    createdAt: '2024-01-15T14:30:00.000Z',
                    receiveNotifications: true,
                    birthData: {
                        date: '1990-07-23',
                        time: '14:30',
                        place: 'S√£o Paulo, SP, Brasil',
                        hasAstrologicalData: true
                    },
                    astrologicalProfile: {
                        calculatedAt: '2024-01-15T14:30:00.000Z',
                        birthData: {
                            date: '1990-07-23',
                            time: '14:30',
                            place: 'S√£o Paulo, SP, Brasil'
                        },
                        sunSign: { name: 'Le√£o', symbol: '‚ôå', element: 'Fogo', quality: 'Fixo' },
                        moonSign: { name: 'Escorpi√£o', symbol: '‚ôè', element: '√Ågua' },
                        ascendant: { name: 'Libra', symbol: '‚ôé' },
                        elements: { Fogo: 1, Terra: 0, Ar: 1, √Ågua: 1 },
                        qualities: { Cardinal: 0, Fixo: 1, Mut√°vel: 0 },
                        personalityTraits: ['Criativo', 'Generoso', 'Dram√°tico', 'Intenso', 'Transformador'],
                        recommendations: [
                            'Pratique exerc√≠cios f√≠sicos regulares para canalizar sua energia',
                            'Desenvolva projetos criativos que despertem sua paix√£o',
                            'Medite para equilibrar sua impulsividade natural',
                            'Honre suas emo√ß√µes e pratique autocompaix√£o',
                            'Desenvolva sua intui√ß√£o atrav√©s da medita√ß√£o'
                        ]
                    },
                    settings: {
                        theme: 2, // Tema Roxo Imperial
                        wallpaper: 1, // Gradiente Aurora
                        volumes: { master: 75, notifications: 60, system: 65 },
                        showPlanetaryWidget: true,
                        showNotifications: true,
                        showVolumeControl: true
                    },
                    stats: {
                        loginCount: 47,
                        totalSessionTime: 12540, // em minutos
                        personalizationChanges: 15,
                        appsOpened: 89,
                        afastAlertsReceived: 8
                    }
                };
                
                userDatabase[demoEmail] = demoUser;
                localStorage.setItem('auroraOS_users', JSON.stringify(userDatabase));
            }
        }
        
        function showAuthScreen() {
            const authScreen = document.getElementById('authScreen');
            authScreen.classList.add('active');
            createMysticalParticles('authParticles');
        }
        
        function hideAuthScreen() {
            const authScreen = document.getElementById('authScreen');
            authScreen.classList.add('hidden');
            
            setTimeout(() => {
                authScreen.style.display = 'none';
                authScreen.classList.remove('hidden');
            }, 1000);
        }
        
        function showLoginForm() {
            document.getElementById('loginForm').style.display = 'flex';
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('forgotForm').style.display = 'none';
            clearMessages();
        }
        
        function showRegisterForm() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'flex';
            document.getElementById('forgotForm').style.display = 'none';
            clearMessages();
        }
        
        function showForgotPassword() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('forgotForm').style.display = 'flex';
            clearMessages();
        }
        
        function clearMessages() {
            document.getElementById('authMessage').style.display = 'none';
            document.getElementById('registerMessage').style.display = 'none';
            document.getElementById('forgotMessage').style.display = 'none';
        }
        
        function showMessage(elementId, message, isError = true) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = isError ? 'auth-error' : 'auth-success';
            element.style.display = 'block';
        }
        
        function showLoading(loadingId, show = true) {
            const element = document.getElementById(loadingId);
            element.classList.toggle('active', show);
        }
        
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
        
        function validatePassword(password) {
            return password.length >= 6;
        }
        
        function loginDemo() {
            // Inicializar conta demo
            initDemoAccount();
            
            clearMessages();
            showLoading('authLoading', true);
            
            // Simular delay de autentica√ß√£o
            setTimeout(() => {
                const demoUser = userDatabase['demo@auroraos.com'];
                
                if (demoUser) {
                    // Login bem-sucedido
                    currentUser = demoUser;
                    sessionStorage.setItem('auroraOS_current_user', JSON.stringify(demoUser));
                    
                    showLoading('authLoading', false);
                    showMessage('authMessage', `Bem-vindo √† conta demo, ${demoUser.name}! Explore todas as funcionalidades m√≠sticas.`, false);
                    
                    // Entrar no sistema ap√≥s 2 segundos
                    setTimeout(() => {
                        hideAuthScreen();
                        setTimeout(() => {
                            initMainSystem();
                            
                            // Mostrar dica especial do Gatomante para conta demo
                            setTimeout(() => {
                                gatomanteContextual('demo_login', { userName: demoUser.name });
                            }, 3000);
                        }, 1000);
                    }, 2000);
                } else {
                    showLoading('authLoading', false);
                    showMessage('authMessage', 'Erro ao carregar conta demo. Tente novamente.');
                }
            }, 1500);
        }
        
        function performLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            
            clearMessages();
            
            if (!email || !password) {
                showMessage('authMessage', 'Por favor, preencha todos os campos.');
                return;
            }
            
            showLoading('authLoading', true);
            
            // Simular delay de autentica√ß√£o
            setTimeout(() => {
                // Verificar credenciais
                const user = userDatabase[email.toLowerCase()];
                
                if (!user || user.password !== password) {
                    showLoading('authLoading', false);
                    showMessage('authMessage', 'Email/usu√°rio ou senha incorretos.');
                    return;
                }
                
                // Login bem-sucedido
                currentUser = user;
                
                // Salvar sess√£o
                if (rememberMe) {
                    localStorage.setItem('auroraOS_current_user', JSON.stringify(user));
                } else {
                    sessionStorage.setItem('auroraOS_current_user', JSON.stringify(user));
                }
                
                showLoading('authLoading', false);
                showMessage('authMessage', `Bem-vindo de volta, ${user.name}!`, false);
                
                // Carregar configura√ß√µes do usu√°rio
                loadUserSettings();
                
                // Entrar no sistema ap√≥s 1.5 segundos
                setTimeout(() => {
                    hideAuthScreen();
                    setTimeout(() => {
                        initMainSystem();
                        // Notificar Gatomante sobre login bem-sucedido
                        setTimeout(() => {
                            gatomanteContextual('login_sucesso');
                            detectarConquistas();
                        }, 3000);
                    }, 1000);
                }, 1500);
                
            }, 1500);
        }
        
        function performRegister() {
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim().toLowerCase();
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const acceptTerms = document.getElementById('acceptTerms').checked;
            const receiveNotifications = document.getElementById('receiveNotifications').checked;
            
            // Dados astrol√≥gicos opcionais
            const birthDate = document.getElementById('birthDate').value;
            const birthTime = document.getElementById('birthTime').value;
            const birthPlace = document.getElementById('birthPlace').value.trim();
            
            clearMessages();
            
            // Valida√ß√µes
            if (!name || !email || !password || !confirmPassword) {
                showMessage('registerMessage', 'Por favor, preencha todos os campos obrigat√≥rios.');
                return;
            }
            
            if (!validateEmail(email)) {
                showMessage('registerMessage', 'Por favor, digite um email v√°lido.');
                return;
            }
            
            if (!validatePassword(password)) {
                showMessage('registerMessage', 'A senha deve ter pelo menos 6 caracteres.');
                return;
            }
            
            if (password !== confirmPassword) {
                showMessage('registerMessage', 'As senhas n√£o coincidem.');
                return;
            }
            
            if (!acceptTerms) {
                showMessage('registerMessage', 'Voc√™ deve aceitar os Termos de Uso.');
                return;
            }
            
            if (userDatabase[email]) {
                showMessage('registerMessage', 'Este email j√° est√° cadastrado.');
                return;
            }
            
            showLoading('registerLoading', true);
            
            // Simular delay de registro
            setTimeout(() => {
                // Criar novo usu√°rio
                const newUser = {
                    id: Date.now().toString(),
                    name: name,
                    email: email,
                    password: password,
                    createdAt: new Date().toISOString(),
                    receiveNotifications: receiveNotifications,
                    birthData: {
                        date: birthDate,
                        time: birthTime,
                        place: birthPlace,
                        hasAstrologicalData: !!(birthDate && birthTime && birthPlace)
                    },
                    astrologicalProfile: null, // Ser√° calculado se dados estiverem dispon√≠veis
                    settings: {
                        theme: 0,
                        wallpaper: 0,
                        volumes: { master: 70, notifications: 50, system: 60 },
                        showPlanetaryWidget: true,
                        showNotifications: true,
                        showVolumeControl: true
                    }
                };
                
                // Calcular mapa astral se dados estiverem dispon√≠veis
                if (newUser.birthData.hasAstrologicalData) {
                    newUser.astrologicalProfile = calculateAstrologicalProfile(birthDate, birthTime, birthPlace);
                }
                
                // Salvar no banco de dados
                userDatabase[email] = newUser;
                localStorage.setItem('auroraOS_users', JSON.stringify(userDatabase));
                
                showLoading('registerLoading', false);
                showMessage('registerMessage', `Conta criada com sucesso! Bem-vindo, ${name}!`, false);
                
                // Auto-login
                currentUser = newUser;
                sessionStorage.setItem('auroraOS_current_user', JSON.stringify(newUser));
                
                // Entrar no sistema ap√≥s 2 segundos
                setTimeout(() => {
                    hideAuthScreen();
                    setTimeout(() => {
                        initMainSystem();
                    }, 1000);
                }, 2000);
                
            }, 2000);
        }
        
        function performForgotPassword() {
            const email = document.getElementById('forgotEmail').value.trim().toLowerCase();
            
            clearMessages();
            
            if (!email) {
                showMessage('forgotMessage', 'Por favor, digite seu email.', true);
                return;
            }
            
            if (!validateEmail(email)) {
                showMessage('forgotMessage', 'Por favor, digite um email v√°lido.', true);
                return;
            }
            
            showLoading('forgotLoading', true);
            
            // Simular envio de email
            setTimeout(() => {
                showLoading('forgotLoading', false);
                
                if (userDatabase[email]) {
                    showMessage('forgotMessage', 'Link de recupera√ß√£o enviado para seu email!', false);
                } else {
                    showMessage('forgotMessage', 'Email n√£o encontrado em nossa base de dados.', true);
                }
            }, 2000);
        }
        
        function loadUserSettings() {
            if (!currentUser || !currentUser.settings) return;
            
            const settings = currentUser.settings;
            
            // Aplicar configura√ß√µes salvas
            currentTheme = settings.theme || 0;
            currentWallpaper = settings.wallpaper || 0;
            volumes = settings.volumes || { master: 70, notifications: 50, system: 60 };
            
            applyColorTheme();
            applyWallpaper();
        }
        
        function saveUserSettings() {
            if (!currentUser) return;
            
            // Atualizar configura√ß√µes do usu√°rio
            currentUser.settings = {
                theme: currentTheme,
                wallpaper: currentWallpaper,
                volumes: volumes,
                showPlanetaryWidget: document.getElementById('showPlanetaryWidget')?.checked || true,
                showNotifications: document.getElementById('showNotifications')?.checked || true,
                showVolumeControl: document.getElementById('showVolumeControl')?.checked || true
            };
            
            // Salvar no banco de dados
            userDatabase[currentUser.email] = currentUser;
            localStorage.setItem('auroraOS_users', JSON.stringify(userDatabase));
            
            // Atualizar sess√£o
            const storage = localStorage.getItem('auroraOS_current_user') ? localStorage : sessionStorage;
            storage.setItem('auroraOS_current_user', JSON.stringify(currentUser));
        }
        
        function checkAutoLogin() {
            // Verificar se h√° usu√°rio logado
            const savedUser = localStorage.getItem('auroraOS_current_user') || 
                             sessionStorage.getItem('auroraOS_current_user');
            
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                loadUserSettings();
                return true;
            }
            
            return false;
        }
        
        function logout() {
            currentUser = null;
            localStorage.removeItem('auroraOS_current_user');
            sessionStorage.removeItem('auroraOS_current_user');
            
            // Recarregar p√°gina para reiniciar sistema
            location.reload();
        }
        
        // ========================================
        // üõ°Ô∏è SISTEMA AF√ÅST! - ANTIV√çRUS ASTROL√ìGICO
        // ========================================
        
        // Base de dados de eventos astrol√≥gicos reformulada
        const afastEvents = {
            mercuryRetrograde: {
                name: "Merc√∫rio Retr√≥grado",
                icon: "‚òø",
                shortAlert: "Af√°st! Uma amea√ßa foi detectada: Merc√∫rio retr√≥grado.",
                description: "Comunica√ß√£o vulner√°vel. Reforce sua paci√™ncia.",
                voiceAlert: "Uma amea√ßa foi detectada: Merc√∫rio retr√≥grado. Comunica√ß√£o vulner√°vel. Reforce sua paci√™ncia.",
                severity: "critical",
                duration: 21,
                color: "#ff4444"
            },
            jupiterRetrograde: {
                name: "J√∫piter Retr√≥grado", 
                icon: "‚ôÉ",
                shortAlert: "Af√°st! J√∫piter retr√≥grado. Expans√µes em quarentena.",
                description: "Expans√µes bloqueadas. Evite promessas grandiosas.",
                voiceAlert: "J√∫piter em retr√≥grado. Expans√µes bloqueadas. Evite promessas grandiosas.",
                severity: "warning",
                duration: 120,
                color: "#ff8800"
            },
            fullMoon: {
                name: "Lua Cheia",
                icon: "üåï",
                shortAlert: "Lua Cheia detectada. Emo√ß√µes em modo m√°ximo.",
                description: "Emo√ß√µes inst√°veis podem comprometer o sistema.",
                voiceAlert: "Uma amea√ßa foi detectada: Lua Cheia em andamento. Emo√ß√µes inst√°veis podem comprometer o sistema.",
                severity: "warning",
                duration: 3,
                color: "#ffaa00"
            },
            newMoon: {
                name: "Lua Nova",
                icon: "üåë",
                shortAlert: "Af√°st! Lua Nova ativada. Hora de reinicializar inten√ß√µes.",
                description: "Rituais e inten√ß√µes prontos para instala√ß√£o.",
                voiceAlert: "Varredura conclu√≠da. Lua Nova ativa. Rituais e inten√ß√µes prontos para instala√ß√£o.",
                severity: "info",
                duration: 3,
                color: "#4488ff"
            },
            marsHour: {
                name: "Hora de Marte",
                icon: "‚ôÇ",
                shortAlert: "Af√°st! Hora de Marte: discuss√µes em risco de explos√£o.",
                description: "Conflitos em potencial. Proteja seus relacionamentos.",
                voiceAlert: "Af√°st! Hora de Marte iniciada. Conflitos em potencial. Proteja seus relacionamentos.",
                severity: "warning",
                duration: 1,
                color: "#ff6600"
            },
            venusHour: {
                name: "Hora de V√™nus",
                icon: "‚ôÄ",
                shortAlert: "Hora de V√™nus detectada. Vulnerabilidade amorosa ativa.",
                description: "Amea√ßa de distra√ß√µes rom√¢nticas detectada.",
                voiceAlert: "Hora de V√™nus em curso. Amea√ßa de distra√ß√µes rom√¢nticas detectada.",
                severity: "info",
                duration: 1,
                color: "#ff69b4"
            },
            voidMoon: {
                name: "Lua Fora de Curso",
                icon: "üåë",
                shortAlert: "Af√°st! Lua Fora de Curso. Decis√µes inst√°veis detectadas.",
                description: "Nenhum feiti√ßo seguro at√© a pr√≥xima fase.",
                voiceAlert: "Uma amea√ßa foi detectada: Lua Fora de Curso. Decis√µes correm risco de falha cr√≠tica.",
                severity: "critical",
                duration: 8,
                color: "#cc0000"
            },
            eclipse: {
                name: "Eclipse Solar/Lunar",
                icon: "üåò",
                shortAlert: "Af√°st! Eclipse detectado. Transforma√ß√µes em andamento.",
                description: "Energias intensas de mudan√ßa ativas.",
                voiceAlert: "Aten√ß√£o. Eclipse detectado. Energias intensas de transforma√ß√£o em andamento. Sistema em alerta m√°ximo.",
                severity: "critical",
                duration: 7,
                color: "#8800cc"
            }
        };
        
        // Sistema de notifica√ß√µes AF√ÅST
        let afastNotifications = [];
        let afastActive = false;
        
        function initAfastSystem() {
            // Verificar eventos astrol√≥gicos simulados
            checkAstrologicalEvents();
            
            // Verificar eventos a cada hora
            setInterval(checkAstrologicalEvents, 3600000); // 1 hora
            
            // Carregar notifica√ß√µes salvas
            loadAfastNotifications();
        }
        
        function checkAstrologicalEvents() {
            const now = new Date();
            const hour = now.getHours();
            const day = now.getDay();
            
            // Simula√ß√£o de eventos baseada em hor√°rios
            if (hour === 13 && Math.random() < 0.3) { // 30% chance √†s 13h
                triggerAfastEvent('mercuryRetrograde');
            }
            
            if (hour === 0 && Math.random() < 0.2) { // 20% chance √† meia-noite
                triggerAfastEvent('voidMoon');
            }
            
            if (day === 0 && hour === 12 && Math.random() < 0.1) { // 10% chance domingo ao meio-dia
                triggerAfastEvent('eclipse');
            }
            
            if (hour === 18 && Math.random() < 0.25) { // 25% chance √†s 18h
                triggerAfastEvent('marsSquare');
            }
        }
        
        function triggerAfastEvent(eventType) {
            const event = afastEvents[eventType];
            if (!event) return;
            
            // Verificar se j√° existe notifica√ß√£o ativa deste tipo
            const existingNotification = afastNotifications.find(n => n.type === eventType && n.active);
            if (existingNotification) return;
            
            // Criar nova notifica√ß√£o
            const notification = {
                id: Date.now(),
                type: eventType,
                event: event,
                timestamp: new Date(),
                active: true,
                acknowledged: false
            };
            
            afastNotifications.push(notification);
            saveAfastNotifications();
            
            // Mostrar notifica√ß√£o
            showAfastNotification(notification);
            
            // Reproduzir alerta sonoro e voz
            playAfastAlert(event);
            
            // Notificar Gatomante
            setTimeout(() => {
                gatomanteContextual('afast_alert', { event: event.name });
            }, 3000);
        }
        
        function showAfastNotification(notification) {
            // Criar notifica√ß√£o estilo MSN no canto inferior direito
            createMSNStyleNotification(notification.event);
        }
        
        function createMSNStyleNotification(event) {
            // Remover notifica√ß√£o anterior se existir
            const existingNotif = document.getElementById('afastMSNNotification');
            if (existingNotif) {
                existingNotif.remove();
            }
            
            // Criar elemento de notifica√ß√£o
            const notification = document.createElement('div');
            notification.id = 'afastMSNNotification';
            notification.className = 'afast-msn-notification';
            notification.style.cssText = `
                position: fixed;
                bottom: 60px;
                right: 20px;
                width: 300px;
                background: linear-gradient(135deg, ${event.color}22 0%, ${event.color}44 100%);
                border: 2px solid ${event.color};
                border-radius: 8px;
                padding: 15px;
                color: white;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                font-size: 13px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                z-index: 2000;
                transform: translateX(350px);
                transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                cursor: pointer;
            `;
            
            // √çcone de severidade
            const severityIcons = {
                'critical': 'üö®',
                'warning': '‚ö†Ô∏è',
                'info': '‚ÑπÔ∏è'
            };
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                    <div style="font-size: 20px; margin-right: 10px;">${severityIcons[event.severity]} ${event.icon}</div>
                    <div style="font-weight: bold; flex: 1;">AF√ÅST!</div>
                    <div style="cursor: pointer; font-size: 16px; opacity: 0.7;" onclick="closeAfastMSNNotification()">√ó</div>
                </div>
                <div style="font-weight: bold; margin-bottom: 5px; font-size: 14px;">${event.shortAlert}</div>
                <div style="opacity: 0.9; font-size: 12px;">${event.description}</div>
                <div style="margin-top: 8px; font-size: 11px; opacity: 0.7; text-align: right;">
                    Clique para fechar
                </div>
            `;
            
            // Adicionar ao DOM
            document.body.appendChild(notification);
            
            // Animar entrada
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Auto-fechar baseado na severidade
            const autoCloseTime = event.severity === 'critical' ? 10000 : 
                                 event.severity === 'warning' ? 7000 : 5000;
            
            setTimeout(() => {
                closeAfastMSNNotification();
            }, autoCloseTime);
            
            // Fechar ao clicar
            notification.onclick = closeAfastMSNNotification;
            
            // Som de notifica√ß√£o (ping/bip)
            playNotificationSound();
        }
        
        function closeAfastMSNNotification() {
            const notification = document.getElementById('afastMSNNotification');
            if (notification) {
                notification.style.transform = 'translateX(350px)';
                setTimeout(() => {
                    notification.remove();
                }, 400);
            }
        }
        
        function playNotificationSound() {
            // Som simples de notifica√ß√£o (bip/ping)
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.frequency.setValueAtTime(600, audioContext.currentTime + 0.1);
            
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.3 * (volumes.notifications / 100) * (volumes.master / 100), audioContext.currentTime + 0.01);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.2);
        }
            afastActive = true;
            
            // Auto-ocultar ap√≥s 15 segundos se n√£o for cr√≠tico
            if (event.severity !== 'critical') {
                setTimeout(() => {
                    if (afastActive) {
                        closeAfastNotification();
                    }
                }, 15000);
            }
        }
        
        function closeAfastNotification() {
            const afastElement = document.getElementById('afastNotification');
            afastElement.classList.remove('active');
            afastActive = false;
        }
        
        function acknowledgeAfastNotification() {
            // Marcar como reconhecida
            const activeNotification = afastNotifications.find(n => n.active && !n.acknowledged);
            if (activeNotification) {
                activeNotification.acknowledged = true;
                activeNotification.active = false;
                saveAfastNotifications();
            }
            
            closeAfastNotification();
            
            // Adicionar √† central de notifica√ß√µes
            addToNotificationCenter(activeNotification);
        }
        
        function snoozeAfastNotification() {
            closeAfastNotification();
            
            // Reagendar para 1 hora
            setTimeout(() => {
                const activeNotification = afastNotifications.find(n => n.active && !n.acknowledged);
                if (activeNotification) {
                    showAfastNotification(activeNotification);
                }
            }, 3600000); // 1 hora
        }
        
        // ========================================
        // üéôÔ∏è SISTEMA DE VOZ AF√ÅST! - VOZ FEMININA
        // ========================================
        
        let afastVoiceEnabled = true;
        let afastFirstTimeToday = true;
        
        function playAfastAlert(event) {
            if (!afastVoiceEnabled || !('speechSynthesis' in window)) return;
            
            // Primeira vez do dia - mensagem de boas-vindas
            if (afastFirstTimeToday) {
                speakAfastMessage("Boas-vindas ao Af√°st! O c√©u est√° sob vigil√¢ncia.", 'welcome');
                afastFirstTimeToday = false;
                
                // Aguardar 3 segundos antes do alerta principal
                setTimeout(() => {
                    if (event.severity === 'critical' || event.severity === 'warning') {
                        speakAfastMessage(event.voiceAlert, event.severity);
                    }
                }, 3000);
            } else {
                // Apenas eventos cr√≠ticos e avisos t√™m voz
                if (event.severity === 'critical' || event.severity === 'warning') {
                    speakAfastMessage(event.voiceAlert, event.severity);
                }
            }
        }
        
        function speakAfastMessage(message, severity) {
            const utterance = new SpeechSynthesisUtterance(message);
            
            // Configura√ß√µes da voz feminina
            utterance.lang = 'pt-BR';
            utterance.rate = 0.7; // Mais devagar para clareza
            utterance.pitch = 1.1; // Tom feminino
            utterance.volume = (volumes.notifications / 100) * (volumes.master / 100);
            
            // Ajustar tom conforme severidade
            switch(severity) {
                case 'critical':
                    utterance.pitch = 1.3; // Mais agudo para urg√™ncia
                    utterance.rate = 0.6;  // Mais devagar para √™nfase
                    break;
                case 'warning':
                    utterance.pitch = 1.1;
                    utterance.rate = 0.7;
                    break;
                case 'info':
                    utterance.pitch = 1.0;
                    utterance.rate = 0.8;
                    break;
                case 'welcome':
                    utterance.pitch = 1.2;
                    utterance.rate = 0.9;
                    break;
            }
            
            // Tentar usar voz feminina se dispon√≠vel
            const voices = speechSynthesis.getVoices();
            const femaleVoice = voices.find(voice => 
                voice.lang.includes('pt') && 
                (voice.name.toLowerCase().includes('female') || 
                 voice.name.toLowerCase().includes('feminina') ||
                 voice.name.toLowerCase().includes('woman'))
            );
            
            if (femaleVoice) {
                utterance.voice = femaleVoice;
            }
            
            speechSynthesis.speak(utterance);
        }
        
        // Easter eggs - frases raras e engra√ßadas
        function getRandomEasterEgg() {
            const easterEggs = [
                "Af√°st! Marte est√° irritado. Melhor n√£o discutir hoje.",
                "Af√°st. A Lua encerrou seu curso. O v√©u est√° inst√°vel.",
                "Sistema c√≥smico inst√°vel. Recomendo um ch√° de camomila.",
                "Af√°st! Merc√∫rio est√° fazendo das suas novamente.",
                "Energia planet√°ria detectada. Seus cristais est√£o vibrando?"
            ];
            
            return easterEggs[Math.floor(Math.random() * easterEggs.length)];
        }
        
        // Configura√ß√µes de voz do usu√°rio
        function toggleAfastVoice() {
            afastVoiceEnabled = !afastVoiceEnabled;
            const status = afastVoiceEnabled ? 'ativada' : 'desativada';
            
            if (afastVoiceEnabled) {
                speakAfastMessage(`Voz do Af√°st ${status}.`, 'info');
            }
            
            // Salvar prefer√™ncia
            localStorage.setItem('auroraOS_afast_voice', afastVoiceEnabled);
        }
        
        function loadAfastVoiceSettings() {
            const saved = localStorage.getItem('auroraOS_afast_voice');
            if (saved !== null) {
                afastVoiceEnabled = JSON.parse(saved);
            }
            
            // Resetar primeira vez a cada dia
            const lastDate = localStorage.getItem('auroraOS_afast_last_date');
            const today = new Date().toDateString();
            if (lastDate !== today) {
                afastFirstTimeToday = true;
                localStorage.setItem('auroraOS_afast_last_date', today);
            } else {
                afastFirstTimeToday = false;
            }
        }
        
        function addToNotificationCenter(notification) {
            const container = document.getElementById('notificationCenterContent');
            const notificationElement = document.createElement('div');
            notificationElement.className = 'notification-item';
            
            const timeStr = notification.timestamp.toLocaleTimeString('pt-BR', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            notificationElement.innerHTML = `
                <div class="notification-item-header">
                    <div class="notification-item-title">${notification.event.icon} ${notification.event.name}</div>
                    <div class="notification-item-time">${timeStr}</div>
                </div>
                <div class="notification-item-content">${notification.event.description}</div>
            `;
            
            container.insertBefore(notificationElement, container.firstChild);
            
            // Limitar a 20 notifica√ß√µes
            while (container.children.length > 20) {
                container.removeChild(container.lastChild);
            }
        }
        
        function toggleNotificationCenter() {
            const center = document.getElementById('notificationCenter');
            center.classList.toggle('active');
            
            // Atualizar estat√≠sticas quando abrir
            if (center.classList.contains('active')) {
                updateAfastStats();
                updateNotificationVisibility();
            }
        }
        
        // ========================================
        // üõ°Ô∏è FUN√á√ïES AVAN√áADAS DA CENTRAL AF√ÅST
        // ========================================
        
        let currentFilter = 'all';
        
        function filterNotifications(type) {
            currentFilter = type;
            
            // Atualizar bot√µes ativos
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`filter${type.charAt(0).toUpperCase() + type.slice(1)}`).classList.add('active');
            
            updateNotificationVisibility();
        }
        
        function updateNotificationVisibility() {
            const notifications = document.querySelectorAll('.notification-item');
            const noNotificationsMsg = document.getElementById('noNotifications');
            let visibleCount = 0;
            
            notifications.forEach(notification => {
                const severity = notification.dataset.severity || 'info';
                const shouldShow = currentFilter === 'all' || severity === currentFilter;
                
                notification.style.display = shouldShow ? 'block' : 'none';
                if (shouldShow) visibleCount++;
            });
            
            // Mostrar/ocultar mensagem de "sem notifica√ß√µes"
            noNotificationsMsg.style.display = visibleCount === 0 ? 'block' : 'none';
        }
        
        function updateAfastStats() {
            const total = afastNotifications.length;
            const critical = afastNotifications.filter(n => n.event.severity === 'critical').length;
            const today = afastNotifications.filter(n => {
                const notifDate = new Date(n.timestamp);
                const todayDate = new Date();
                return notifDate.toDateString() === todayDate.toDateString();
            }).length;
            
            document.getElementById('totalAlerts').textContent = total;
            document.getElementById('criticalAlerts').textContent = critical;
            document.getElementById('todayAlerts').textContent = today;
        }
        
        function clearAllNotifications() {
            if (confirm('Tem certeza que deseja limpar todas as notifica√ß√µes AF√ÅST?')) {
                afastNotifications = [];
                saveAfastNotifications();
                
                // Limpar interface
                const container = document.getElementById('notificationCenterContent');
                const notifications = container.querySelectorAll('.notification-item');
                notifications.forEach(n => n.remove());
                
                // Atualizar estat√≠sticas
                updateAfastStats();
                updateNotificationVisibility();
                
                // Notificar Gatomante
                setTimeout(() => {
                    gatomanteContextual('personalizacao', { acao: 'notifica√ß√µes limpas' });
                }, 1000);
            }
        }
        
        function exportNotifications() {
            if (afastNotifications.length === 0) {
                alert('N√£o h√° notifica√ß√µes para exportar.');
                return;
            }
            
            const exportData = {
                exportedAt: new Date().toISOString(),
                user: currentUser ? currentUser.name : 'Usu√°rio An√¥nimo',
                totalNotifications: afastNotifications.length,
                notifications: afastNotifications.map(n => ({
                    timestamp: n.timestamp,
                    event: n.event.name,
                    severity: n.event.severity,
                    description: n.event.description,
                    advice: n.event.advice,
                    acknowledged: n.acknowledged
                }))
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `afast-notifications-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            // Notificar Gatomante
            setTimeout(() => {
                gatomanteContextual('personalizacao', { acao: 'notifica√ß√µes exportadas' });
            }, 1000);
        }
        
        function afastSettings() {
            alert('üõ°Ô∏è Configura√ß√µes AF√ÅST\n\n' +
                  '‚Ä¢ Monitoramento: Ativo 24/7\n' +
                  '‚Ä¢ Eventos detectados: Merc√∫rio retr√≥grado, Eclipses, Lua fora de curso\n' +
                  '‚Ä¢ Alertas sonoros: Habilitados\n' +
                  '‚Ä¢ S√≠ntese de voz: "AF√ÅSTI!" ativada\n' +
                  '‚Ä¢ Integra√ß√£o Gatomante: Ativa\n\n' +
                  'O sistema AF√ÅST est√° funcionando perfeitamente!\n' +
                  'Suas energias est√£o protegidas. ‚ú®');
        }
        
        // Melhorar fun√ß√£o addToNotificationCenter para incluir severidade
        function addToNotificationCenter(notification) {
            const container = document.getElementById('notificationCenterContent');
            const notificationElement = document.createElement('div');
            notificationElement.className = 'notification-item';
            notificationElement.dataset.severity = notification.event.severity;
            
            const timeStr = notification.timestamp.toLocaleTimeString('pt-BR', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            const severityIcon = {
                'critical': 'üö®',
                'warning': '‚ö†Ô∏è',
                'info': '‚ÑπÔ∏è'
            }[notification.event.severity] || '‚ÑπÔ∏è';
            
            notificationElement.innerHTML = `
                <div class="notification-item-header">
                    <span>${severityIcon} ${notification.event.icon} ${notification.event.name}</span>
                    <div class="notification-item-time">${timeStr}</div>
                </div>
                <div class="notification-item-content">${notification.event.description}</div>
                <div style="font-size: 11px; opacity: 0.8; margin-top: 5px;">${notification.event.advice}</div>
            `;
            
            container.insertBefore(notificationElement, container.firstChild);
            
            // Ocultar mensagem de "sem notifica√ß√µes"
            document.getElementById('noNotifications').style.display = 'none';
            
            // Limitar a 50 notifica√ß√µes
            while (container.children.length > 51) { // +1 por causa da mensagem "no notifications"
                const lastChild = container.lastChild;
                if (lastChild && lastChild.classList.contains('notification-item')) {
                    container.removeChild(lastChild);
                }
            }
        }
        
        function saveAfastNotifications() {
            localStorage.setItem('auroraOS_afast_notifications', JSON.stringify(afastNotifications));
        }
        
        function loadAfastNotifications() {
            const saved = localStorage.getItem('auroraOS_afast_notifications');
            if (saved) {
                afastNotifications = JSON.parse(saved);
                
                // Recriar notifica√ß√µes na central
                afastNotifications.forEach(notification => {
                    if (notification.acknowledged) {
                        addToNotificationCenter(notification);
                    }
                });
            }
        }
        
        // ========================================
        // üîÆ SISTEMA DE MAPA ASTRAL
        // ========================================
        
        function calculateAstrologicalProfile(birthDate, birthTime, birthPlace) {
            // Fun√ß√£o b√°sica de c√°lculo astrol√≥gico
            // Em uma implementa√ß√£o real, isso se conectaria com APIs de astrologia
            // ou bibliotecas especializadas como Swiss Ephemeris
            
            const profile = {
                calculatedAt: new Date().toISOString(),
                birthData: {
                    date: birthDate,
                    time: birthTime,
                    place: birthPlace
                },
                sunSign: calculateSunSign(birthDate),
                moonSign: calculateMoonSign(birthDate, birthTime),
                ascendant: calculateAscendant(birthDate, birthTime, birthPlace),
                elements: {},
                qualities: {},
                houses: {},
                aspects: [],
                personalityTraits: [],
                recommendations: []
            };
            
            // Calcular elementos e qualidades
            profile.elements = calculateElements(profile);
            profile.qualities = calculateQualities(profile);
            
            // Gerar tra√ßos de personalidade baseados no mapa
            profile.personalityTraits = generatePersonalityTraits(profile);
            
            // Gerar recomenda√ß√µes personalizadas
            profile.recommendations = generateAstrologicalRecommendations(profile);
            
            return profile;
        }
        
        function calculateSunSign(birthDate) {
            const date = new Date(birthDate);
            const month = date.getMonth() + 1;
            const day = date.getDate();
            
            // C√°lculo simplificado dos signos solares
            const signs = [
                { name: 'Capric√≥rnio', symbol: '‚ôë', element: 'Terra', quality: 'Cardinal', start: [12, 22], end: [1, 19] },
                { name: 'Aqu√°rio', symbol: '‚ôí', element: 'Ar', quality: 'Fixo', start: [1, 20], end: [2, 18] },
                { name: 'Peixes', symbol: '‚ôì', element: '√Ågua', quality: 'Mut√°vel', start: [2, 19], end: [3, 20] },
                { name: '√Åries', symbol: '‚ôà', element: 'Fogo', quality: 'Cardinal', start: [3, 21], end: [4, 19] },
                { name: 'Touro', symbol: '‚ôâ', element: 'Terra', quality: 'Fixo', start: [4, 20], end: [5, 20] },
                { name: 'G√™meos', symbol: '‚ôä', element: 'Ar', quality: 'Mut√°vel', start: [5, 21], end: [6, 20] },
                { name: 'C√¢ncer', symbol: '‚ôã', element: '√Ågua', quality: 'Cardinal', start: [6, 21], end: [7, 22] },
                { name: 'Le√£o', symbol: '‚ôå', element: 'Fogo', quality: 'Fixo', start: [7, 23], end: [8, 22] },
                { name: 'Virgem', symbol: '‚ôç', element: 'Terra', quality: 'Mut√°vel', start: [8, 23], end: [9, 22] },
                { name: 'Libra', symbol: '‚ôé', element: 'Ar', quality: 'Cardinal', start: [9, 23], end: [10, 22] },
                { name: 'Escorpi√£o', symbol: '‚ôè', element: '√Ågua', quality: 'Fixo', start: [10, 23], end: [11, 21] },
                { name: 'Sagit√°rio', symbol: '‚ôê', element: 'Fogo', quality: 'Mut√°vel', start: [11, 22], end: [12, 21] }
            ];
            
            for (const sign of signs) {
                const [startMonth, startDay] = sign.start;
                const [endMonth, endDay] = sign.end;
                
                if ((month === startMonth && day >= startDay) || (month === endMonth && day <= endDay)) {
                    return sign;
                }
            }
            
            return signs[0]; // Fallback para Capric√≥rnio
        }
        
        function calculateMoonSign(birthDate, birthTime) {
            // C√°lculo simplificado do signo lunar
            // Em uma implementa√ß√£o real, seria necess√°rio usar efem√©rides precisas
            const date = new Date(birthDate + 'T' + birthTime);
            const dayOfYear = Math.floor((date - new Date(date.getFullYear(), 0, 0)) / 86400000);
            const moonCycle = (dayOfYear + Math.floor(date.getHours() / 2.5)) % 12;
            
            const moonSigns = [
                { name: '√Åries', symbol: '‚ôà', element: 'Fogo' },
                { name: 'Touro', symbol: '‚ôâ', element: 'Terra' },
                { name: 'G√™meos', symbol: '‚ôä', element: 'Ar' },
                { name: 'C√¢ncer', symbol: '‚ôã', element: '√Ågua' },
                { name: 'Le√£o', symbol: '‚ôå', element: 'Fogo' },
                { name: 'Virgem', symbol: '‚ôç', element: 'Terra' },
                { name: 'Libra', symbol: '‚ôé', element: 'Ar' },
                { name: 'Escorpi√£o', symbol: '‚ôè', element: '√Ågua' },
                { name: 'Sagit√°rio', symbol: '‚ôê', element: 'Fogo' },
                { name: 'Capric√≥rnio', symbol: '‚ôë', element: 'Terra' },
                { name: 'Aqu√°rio', symbol: '‚ôí', element: 'Ar' },
                { name: 'Peixes', symbol: '‚ôì', element: '√Ågua' }
            ];
            
            return moonSigns[moonCycle];
        }
        
        function calculateAscendant(birthDate, birthTime, birthPlace) {
            // C√°lculo simplificado do ascendente
            // Em uma implementa√ß√£o real, seria necess√°rio considerar latitude, longitude e fuso hor√°rio
            const time = new Date(birthDate + 'T' + birthTime);
            const hour = time.getHours();
            const ascendantIndex = Math.floor(hour / 2) % 12;
            
            const ascendants = [
                { name: '√Åries', symbol: '‚ôà' },
                { name: 'Touro', symbol: '‚ôâ' },
                { name: 'G√™meos', symbol: '‚ôä' },
                { name: 'C√¢ncer', symbol: '‚ôã' },
                { name: 'Le√£o', symbol: '‚ôå' },
                { name: 'Virgem', symbol: '‚ôç' },
                { name: 'Libra', symbol: '‚ôé' },
                { name: 'Escorpi√£o', symbol: '‚ôè' },
                { name: 'Sagit√°rio', symbol: '‚ôê' },
                { name: 'Capric√≥rnio', symbol: '‚ôë' },
                { name: 'Aqu√°rio', symbol: '‚ôí' },
                { name: 'Peixes', symbol: '‚ôì' }
            ];
            
            return ascendants[ascendantIndex];
        }
        
        function calculateElements(profile) {
            const elements = { Fogo: 0, Terra: 0, Ar: 0, √Ågua: 0 };
            
            elements[profile.sunSign.element]++;
            elements[profile.moonSign.element]++;
            
            return elements;
        }
        
        function calculateQualities(profile) {
            const qualities = { Cardinal: 0, Fixo: 0, Mut√°vel: 0 };
            
            qualities[profile.sunSign.quality]++;
            
            return qualities;
        }
        
        function generatePersonalityTraits(profile) {
            const traits = [];
            
            // Tra√ßos baseados no signo solar
            const sunTraits = {
                '√Åries': ['Corajoso', 'Impulsivo', 'L√≠der natural'],
                'Touro': ['Determinado', 'Pr√°tico', 'Sensual'],
                'G√™meos': ['Comunicativo', 'Vers√°til', 'Curioso'],
                'C√¢ncer': ['Emotivo', 'Protetor', 'Intuitivo'],
                'Le√£o': ['Criativo', 'Generoso', 'Dram√°tico'],
                'Virgem': ['Anal√≠tico', 'Perfeccionista', 'Prestativo'],
                'Libra': ['Diplom√°tico', 'Harmonioso', 'Est√©tico'],
                'Escorpi√£o': ['Intenso', 'Transformador', 'Misterioso'],
                'Sagit√°rio': ['Aventureiro', 'Filos√≥fico', 'Otimista'],
                'Capric√≥rnio': ['Ambicioso', 'Disciplinado', 'Respons√°vel'],
                'Aqu√°rio': ['Inovador', 'Independente', 'Humanit√°rio'],
                'Peixes': ['Compassivo', 'Art√≠stico', 'Espiritual']
            };
            
            traits.push(...(sunTraits[profile.sunSign.name] || []));
            
            return traits;
        }
        
        function generateAstrologicalRecommendations(profile) {
            const recommendations = [];
            
            // Recomenda√ß√µes baseadas no elemento dominante
            const dominantElement = Object.keys(profile.elements).reduce((a, b) => 
                profile.elements[a] > profile.elements[b] ? a : b
            );
            
            const elementRecommendations = {
                'Fogo': [
                    'Pratique exerc√≠cios f√≠sicos regulares para canalizar sua energia',
                    'Desenvolva projetos criativos que despertem sua paix√£o',
                    'Medite para equilibrar sua impulsividade natural'
                ],
                'Terra': [
                    'Conecte-se com a natureza regularmente',
                    'Estabele√ßa rotinas s√≥lidas e objetivos pr√°ticos',
                    'Cultive plantas ou jardins para nutrir sua ess√™ncia'
                ],
                'Ar': [
                    'Mantenha-se mentalmente estimulado com leituras e estudos',
                    'Pratique comunica√ß√£o consciente e escuta ativa',
                    'Explore diferentes perspectivas e culturas'
                ],
                '√Ågua': [
                    'Honre suas emo√ß√µes e pratique autocompaix√£o',
                    'Desenvolva sua intui√ß√£o atrav√©s da medita√ß√£o',
                    'Crie espa√ßos sagrados para reflex√£o e cura'
                ]
            };
            
            recommendations.push(...(elementRecommendations[dominantElement] || []));
            
            return recommendations;
        }
        
        function getAstrologicalInsights(user) {
            if (!user || !user.astrologicalProfile) {
                return {
                    hasProfile: false,
                    message: "Complete seu perfil astrol√≥gico para receber insights personalizados!"
                };
            }
            
            const profile = user.astrologicalProfile;
            return {
                hasProfile: true,
                sunSign: profile.sunSign,
                moonSign: profile.moonSign,
                ascendant: profile.ascendant,
                dominantElement: Object.keys(profile.elements).reduce((a, b) => 
                    profile.elements[a] > profile.elements[b] ? a : b
                ),
                personalityTraits: profile.personalityTraits,
                recommendations: profile.recommendations
            };
        }
        
        // Inicializa√ß√£o do sistema de boot
        function initBootSystem() {
            // Verificar se deve pular boot (para desenvolvimento)
            const skipBoot = localStorage.getItem('auroraOS_skip_boot') === 'true';
            
            if (skipBoot) {
                // Verificar auto-login
                if (checkAutoLogin()) {
                    // Pular direto para o sistema principal
                    document.getElementById('bootScreen').style.display = 'none';
                    document.getElementById('welcomeScreen').style.display = 'none';
                    document.getElementById('authScreen').style.display = 'none';
                    initMainSystem();
                } else {
                    // Mostrar tela de autentica√ß√£o
                    document.getElementById('bootScreen').style.display = 'none';
                    document.getElementById('welcomeScreen').style.display = 'none';
                    showAuthScreen();
                }
            } else {
                // Iniciar sequ√™ncia de boot
                createMysticalParticles('bootParticles');
                setTimeout(updateBootProgress, 1000);
            }
        }
        
        // Inicializar conta demo quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            initDemoAccount();
        });
    </script>
</body>
</html>

