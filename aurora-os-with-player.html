<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aurora OS • MysticSoft</title>
    <link href="https://fonts.googleapis.com/css2?family=Alice&family=VT323&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        
        :root {
            /* Tema Aurora Sagrada */
            --vinho: #3e0a29;
            --verde-claro: #b2d1b1;
            --azul-escuro: #0b1836;
            --dourado: #f0aa53;
            --pergaminho: #f2eaff;
            
            /* Variáveis de tema dinâmicas */
            --theme-bg: linear-gradient(135deg, var(--azul-escuro) 0%, var(--vinho) 100%);
            --theme-taskbar: var(--vinho);
            --theme-start-btn: var(--vinho);
            --theme-start-text: var(--dourado);
            --theme-clock: var(--dourado);
            --theme-window-header: var(--azul-escuro);
            
            /* Aurora Player variables */
            --vinho-player: #770543;
            --vinho-escuro: #3e0a29;
            --verde: #B2D1B1;
            --azul: #0B1836;
            --dourado-alt: #DAA520;
            --perg: #F2EAFF;
            --lcd: #00FF41;
            --lcd-bg: #001100;
            --radius-xl: 24px;
            --radius-lg: 18px;
            --radius-md: 12px;
            --glass: rgba(255,255,255,.06);
            --shadow-outer: 0 20px 60px rgba(0,0,0,.45), 0 0 60px rgba(240,170,83,.25);
            --shadow-inner: inset 0 0 30px rgba(0,0,0,.35);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'MS Sans Serif', sans-serif;
            font-size: 11px;
            background: var(--theme-bg);
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }
        
        /* Desktop */
        .desktop {
            position: relative;
            width: 100%;
            height: calc(100vh - 32px);
            background: var(--theme-bg);
            background-attachment: fixed;
        }
        
        .desktop-icons {
            display: grid;
            grid-template-columns: repeat(auto-fit, 80px);
            gap: 20px;
            padding: 20px;
            height: 100%;
            align-content: start;
        }
        
        .desktop-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
            position: relative;
        }
        
        .desktop-icon:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .desktop-icon .icon {
            font-size: 32px;
            margin-bottom: 4px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
            animation: iconBreathe 3s ease-in-out infinite;
        }
        
        .desktop-icon.premium .icon::after {
            content: '⭐';
            position: absolute;
            top: -5px;
            right: -5px;
            font-size: 16px;
            color: var(--dourado);
            text-shadow: 0 0 5px var(--dourado);
            animation: starGlow 2s ease-in-out infinite;
        }
        
        .desktop-icon .label {
            color: white;
            font-size: 10px;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            max-width: 70px;
            word-wrap: break-word;
        }
        
        @keyframes iconBreathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes starGlow {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        /* Taskbar */
        .taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 32px;
            background: linear-gradient(to bottom, var(--theme-taskbar), #2a0a1f);
            border-top: 1px solid rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            padding: 0 4px;
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
        }
        
        .start-button {
            background: linear-gradient(to bottom, var(--theme-start-btn), #2a0a1f);
            border: 1px outset var(--theme-start-btn);
            color: var(--theme-start-text);
            padding: 4px 8px;
            cursor: pointer;
            font-size: 11px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 4px;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
            transition: all 0.1s;
        }
        
        .start-button:hover {
            background: linear-gradient(to bottom, #4a1a35, var(--theme-start-btn));
        }
        
        .start-button:active {
            border: 1px inset var(--theme-start-btn);
        }
        
        .start-logo {
            font-size: 14px;
            filter: drop-shadow(0 0 3px var(--dourado));
        }
        
        .taskbar-items {
            flex: 1;
            display: flex;
            gap: 2px;
            margin-left: 8px;
        }
        
        .taskbar-item {
            background: rgba(255,255,255,0.1);
            border: 1px outset rgba(255,255,255,0.2);
            color: white;
            padding: 2px 8px;
            cursor: pointer;
            font-size: 10px;
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .taskbar-item:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .taskbar-item.active {
            background: rgba(255,255,255,0.3);
            border: 1px inset rgba(255,255,255,0.2);
        }
        
        .clock {
            color: var(--theme-clock);
            font-size: 11px;
            font-weight: bold;
            padding: 0 8px;
            text-shadow: 0 0 3px var(--dourado);
        }
        
        /* Menu Iniciar */
        .start-menu {
            position: fixed;
            bottom: 32px;
            left: 4px;
            width: 320px;
            background: #c0c0c0;
            border: 2px outset #c0c0c0;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            z-index: 2500;
            display: none;
            animation: menuSlideUp 0.2s ease-out;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .start-menu.active {
            display: block;
        }
        
        @keyframes menuSlideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .start-menu-header {
            background: var(--theme-window-header);
            color: white;
            padding: 12px 16px;
            font-weight: bold;
            font-size: 14px;
            border-bottom: 2px solid #808080;
            display: flex;
            align-items: center;
            gap: 10px;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
        }
        
        .start-menu-header .logo {
            font-size: 20px;
            filter: drop-shadow(0 0 5px var(--dourado));
        }
        
        .start-menu-items {
            background: #c0c0c0;
            padding: 8px 0;
        }
        
        .start-menu-item {
            padding: 8px 16px;
            cursor: pointer;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: black;
            transition: all 0.1s;
            border-left: 3px solid transparent;
            position: relative;
        }
        
        .start-menu-item:hover {
            background: linear-gradient(90deg, #316AC5, #4a7bc8);
            color: white;
            border-left: 3px solid var(--dourado);
            transform: translateX(2px);
        }
        
        .start-menu-item .icon {
            font-size: 24px;
            min-width: 32px;
            text-align: center;
            filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.3));
        }
        
        .start-menu-item .text {
            flex: 1;
            font-weight: 500;
        }
        
        .start-menu-item.premium::after {
            content: '⭐';
            position: absolute;
            right: 12px;
            font-size: 16px;
            color: var(--dourado);
            text-shadow: 0 0 3px var(--dourado);
            animation: starGlow 2s ease-in-out infinite;
        }
        
        .start-menu-item.premium:hover::after {
            color: white;
            text-shadow: 0 0 5px white;
        }
        
        .start-menu-separator {
            height: 2px;
            background: linear-gradient(90deg, transparent, #808080, transparent);
            margin: 4px 12px;
        }
        
        .start-menu-footer {
            background: #d0d0d0;
            padding: 8px 16px;
            border-top: 1px solid #808080;
            font-size: 11px;
            color: #666;
            text-align: center;
        }
        
        /* Janelas */
        .window {
            position: fixed;
            background: #c0c0c0;
            border: 2px outset #c0c0c0;
            min-width: 400px;
            min-height: 300px;
            z-index: 1500;
            display: none;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.3);
        }
        
        .window.active {
            display: block;
        }
        
        .window.focused {
            z-index: 1600;
        }
        
        .window-header {
            background: var(--theme-window-header);
            color: white;
            padding: 2px 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            font-size: 11px;
            font-weight: bold;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
        }
        
        .window-title {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .window-controls {
            display: flex;
            gap: 2px;
        }
        
        .window-control {
            width: 16px;
            height: 14px;
            background: #c0c0c0;
            border: 1px outset #c0c0c0;
            cursor: pointer;
            font-size: 10px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            color: black;
        }
        
        .window-control:hover {
            background: #d0d0d0;
        }
        
        .window-control:active {
            border: 1px inset #c0c0c0;
        }
        
        .window-control.close {
            background: #ff6b6b;
            color: white;
        }
        
        .window-content {
            height: calc(100% - 20px);
            overflow: hidden;
            position: relative;
        }
        
        .window-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            font-size: 12px;
            color: #666;
        }
        
        .loading-spinner {
            width: 32px;
            height: 32px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--azul-escuro);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 12px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .window-resize-handle {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 16px;
            height: 16px;
            cursor: se-resize;
            background: linear-gradient(-45deg, transparent 40%, #808080 40%, #808080 60%, transparent 60%);
        }
        
        /* Aurora Player Styles */
        .aurora-player {
            width: 100%;
            height: 100%;
            font-family: 'Alice', serif;
            color: #fff;
            background: radial-gradient(1200px 600px at 20% 10%, rgba(240,170,83,.12), transparent 60%),
                        radial-gradient(900px 500px at 80% 80%, rgba(178,209,177,.10), transparent 60%),
                        linear-gradient(135deg, var(--azul), var(--vinho-escuro) 45%, var(--vinho-player) 70%, var(--azul));
            overflow: auto;
            padding: 20px;
        }
        
        .player {
            width: min(920px, 96%);
            margin: 0 auto;
            border: 4px solid var(--dourado);
            border-radius: var(--radius-xl);
            background: linear-gradient(160deg, rgba(14,23,50,.8), rgba(62,10,41,.82));
            box-shadow: var(--shadow-outer);
            overflow: hidden;
            position: relative;
        }
        
        .player .top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px 22px;
            gap: 16px;
            border-bottom: 2px solid rgba(240,170,83,.4);
            background: linear-gradient(90deg, rgba(119,5,67,.35), rgba(11,24,54,.35));
            box-shadow: var(--shadow-inner);
        }
        
        .player .brand {
            display: flex;
            align-items: center;
            gap: 14px;
            color: var(--dourado);
        }
        
        .player .brand svg {
            filter: drop-shadow(0 0 10px rgba(240,170,83,.6));
        }
        
        .player .brand h1 {
            margin: 0;
            font-size: 20px;
            letter-spacing: .12em;
            text-shadow: 0 2px 0 rgba(0,0,0,.45), 0 0 18px var(--dourado);
        }
        
        .player .version {
            font-size: 14px;
            color: var(--verde);
            opacity: .9;
        }
        
        .player .leds {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .player .led {
            width: 14px;
            height: 14px;
            border-radius: 999px;
            border: 2px solid var(--dourado);
            box-shadow: 0 0 14px currentColor, inset 0 0 8px rgba(255,255,255,.5);
        }
        
        .player .led.power {
            color: var(--verde);
            background: radial-gradient(circle, var(--verde), #6fa27a);
        }
        
        .player .led.play {
            color: var(--dourado);
            background: radial-gradient(circle, var(--dourado), var(--dourado-alt));
        }
        
        .player .led.option {
            color: #d9c9ff;
            background: radial-gradient(circle, var(--perg), #d9c9ff);
        }
        
        .player .wrap {
            display: grid;
            grid-template-columns: 1.1fr .9fr;
            gap: 18px;
            padding: 18px;
        }
        
        @media (max-width: 860px) {
            .player .wrap {
                grid-template-columns: 1fr;
            }
        }
        
        .player .lcd {
            position: relative;
            border: 3px solid var(--dourado);
            border-radius: var(--radius-lg);
            background: linear-gradient(180deg, var(--lcd-bg), #003300 55%, var(--lcd-bg));
            padding: 18px;
            min-height: 140px;
            box-shadow: var(--shadow-inner), 0 0 30px rgba(240,170,83,.25);
            overflow: hidden;
        }
        
        .player .lcd .title {
            font-family: 'VT323', monospace;
            color: var(--lcd);
            font-size: 22px;
            letter-spacing: .06em;
            text-shadow: 0 0 8px var(--lcd);
        }
        
        .player .lcd .artist {
            font-family: 'VT323', monospace;
            color: rgba(0,255,65,.8);
            font-size: 16px;
            margin-top: 2px;
        }
        
        .player .lcd .time {
            position: absolute;
            top: 10px;
            right: 12px;
            font-family: 'VT323', monospace;
            color: var(--lcd);
            font-size: 18px;
        }
        
        .player .progress {
            position: absolute;
            left: 14px;
            right: 14px;
            bottom: 12px;
            height: 12px;
            border: 1px solid var(--lcd);
            border-radius: 8px;
            background: rgba(0,255,65,.15);
            cursor: pointer;
        }
        
        .player .bar {
            height: 100%;
            width: 0%;
            background: var(--lcd);
            box-shadow: 0 0 10px var(--lcd);
        }
        
        .player .thumb {
            position: absolute;
            top: 50%;
            transform: translate(-50%,-50%);
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: var(--lcd);
            box-shadow: 0 0 8px var(--lcd);
            left: 0%;
        }
        
        .player .controls {
            border: 3px solid var(--dourado);
            border-radius: var(--radius-lg);
            background: linear-gradient(180deg, rgba(62,10,41,.8), rgba(11,24,54,.82));
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 14px;
            padding: 16px;
            box-shadow: var(--shadow-inner);
        }
        
        .player .btn {
            --size: 56px;
            width: var(--size);
            height: var(--size);
            border-radius: 999px;
            border: 3px solid var(--dourado);
            cursor: pointer;
            display: grid;
            place-items: center;
            color: #fff;
            font-size: 22px;
            background: radial-gradient(circle at 30% 30%, var(--dourado) 0%, var(--dourado-alt) 55%, var(--vinho-escuro) 100%);
            box-shadow: 0 0 18px rgba(240,170,83,.45), inset 0 0 10px rgba(255,255,255,.2);
            transition: transform .15s ease, filter .2s ease;
        }
        
        .player .btn:hover {
            transform: translateY(-2px);
        }
        
        .player .btn:active {
            transform: translateY(0) scale(.98);
        }
        
        .player .btn.primary {
            --size: 72px;
            font-size: 28px;
        }
        
        .player .bottom {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            padding: 14px 18px;
            border-top: 2px solid rgba(240,170,83,.35);
            background: linear-gradient(90deg, rgba(11,24,54,.35), rgba(119,5,67,.35));
        }
        
        .player .vol {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .player .vol label {
            color: var(--dourado);
            font-weight: 700;
            text-shadow: 0 0 6px var(--dourado);
        }
        
        .player .slider {
            width: 140px;
            height: 14px;
            border: 2px solid var(--dourado);
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            background: linear-gradient(90deg, rgba(62,10,41,.9), rgba(11,24,54,.9));
            box-shadow: var(--shadow-inner);
        }
        
        .player .slider .fill {
            height: 100%;
            width: 70%;
            border-radius: 8px;
            background: linear-gradient(90deg, var(--verde), var(--dourado) 55%, var(--vinho-player));
            box-shadow: 0 0 12px rgba(178,209,177,.7);
        }
        
        .player .fx {
            display: flex;
            gap: 8px;
        }
        
        .player .chip {
            min-width: 46px;
            padding: 8px 10px;
            text-align: center;
            border-radius: 10px;
            font-weight: 700;
            letter-spacing: .02em;
            border: 2px solid var(--dourado);
            background: linear-gradient(135deg, var(--dourado) 0%, var(--dourado-alt) 50%, var(--vinho-escuro) 100%);
            color: var(--perg);
            text-shadow: 0 0 6px rgba(255,255,255,.6);
            cursor: pointer;
            box-shadow: 0 0 12px rgba(240,170,83,.35), inset 0 0 8px rgba(255,255,255,.18);
            transition: transform .15s ease, filter .2s;
        }
        
        .player .chip.active {
            background: linear-gradient(135deg, var(--verde) 0%, var(--dourado) 55%, var(--vinho-player) 100%);
            color: var(--azul);
            box-shadow: 0 0 18px rgba(178,209,177,.9);
        }
        
        .player .panel {
            border: 3px solid var(--dourado);
            border-radius: var(--radius-lg);
            background: linear-gradient(180deg, rgba(11,24,54,.75), rgba(62,10,41,.78));
            box-shadow: var(--shadow-inner);
            padding: 12px;
            max-height: 360px;
            overflow: auto;
        }
        
        .player .row {
            display: grid;
            grid-template-columns: 28px 1fr auto;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            border-radius: 12px;
            cursor: pointer;
        }
        
        .player .row:hover {
            background: rgba(255,255,255,.06);
        }
        
        .player .row.active {
            background: rgba(240,170,83,.12);
            outline: 1px solid rgba(240,170,83,.5);
        }
        
        .player .row .t {
            font-weight: 700;
        }
        
        .player .row .a {
            opacity: .85;
        }
        
        .player .meta {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 13px;
            opacity: .9;
        }
        
        .player .fav {
            color: var(--dourado);
            filter: drop-shadow(0 0 6px rgba(240,170,83,.6));
        }
        
        .player canvas {
            width: 100%;
            height: 46px;
            display: block;
            background: linear-gradient(180deg, rgba(0,0,0,.15), rgba(255,255,255,.03));
            border-radius: 10px;
            border: 1px solid rgba(240,170,83,.35);
        }
        
        /* Gerenciador de Arquivos */
        .file-manager {
            background: white;
            height: 100%;
            display: flex;
            flex-direction: column;
            font-family: 'MS Sans Serif', sans-serif;
        }
        
        .file-toolbar {
            background: #f0f0f0;
            border-bottom: 1px solid #ccc;
            padding: 8px;
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .file-btn {
            padding: 4px 8px;
            border: 1px outset #c0c0c0;
            background: #c0c0c0;
            cursor: pointer;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .file-btn:hover {
            background: #d0d0d0;
        }
        
        .file-btn:active {
            border: 1px inset #c0c0c0;
        }
        
        .file-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        
        .file-sidebar {
            width: 200px;
            background: #f8f8f8;
            border-right: 1px solid #ccc;
            padding: 8px;
            overflow-y: auto;
        }
        
        .file-folder {
            padding: 4px 8px;
            cursor: pointer;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 6px;
            border-radius: 2px;
            margin-bottom: 2px;
        }
        
        .file-folder:hover {
            background: #e0e0e0;
        }
        
        .file-folder.active {
            background: #316AC5;
            color: white;
        }
        
        .file-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .file-path {
            background: #f0f0f0;
            padding: 6px 12px;
            border-bottom: 1px solid #ccc;
            font-size: 11px;
            color: #666;
        }
        
        .file-grid {
            flex: 1;
            padding: 12px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 12px;
            overflow-y: auto;
            background: white;
        }
        
        .file-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
            text-align: center;
        }
        
        .file-item:hover {
            background: #f0f0f0;
        }
        
        .file-item.selected {
            background: #316AC5;
            color: white;
        }
        
        .file-item .icon {
            font-size: 32px;
            margin-bottom: 6px;
            filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.3));
        }
        
        .file-item .name {
            font-size: 11px;
            word-break: break-word;
            max-width: 100px;
        }
        
        .file-item .size {
            font-size: 9px;
            opacity: 0.7;
            margin-top: 2px;
        }
        
        .file-upload {
            border: 2px dashed #ccc;
            padding: 20px;
            text-align: center;
            margin: 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .file-upload:hover {
            border-color: #316AC5;
            background: #f0f8ff;
        }
        
        .file-upload.dragover {
            border-color: #316AC5;
            background: #e6f3ff;
        }
        
        .file-upload input {
            display: none;
        }
        
        /* Visualizador de Arquivos */
        .file-viewer {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 3000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .file-viewer.active {
            display: flex;
        }
        
        .file-viewer-content {
            background: white;
            border: 2px outset #c0c0c0;
            max-width: 90%;
            max-height: 90%;
            overflow: auto;
            position: relative;
        }
        
        .file-viewer-header {
            background: var(--theme-window-header);
            color: white;
            padding: 4px 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            font-weight: bold;
        }
        
        .file-viewer-close {
            cursor: pointer;
            font-size: 14px;
            width: 16px;
            height: 14px;
            background: #ff6b6b;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px outset #ff6b6b;
        }
        
        .file-viewer-body {
            padding: 16px;
            min-width: 400px;
            min-height: 300px;
        }
        
        .text-editor {
            width: 100%;
            height: 400px;
            border: 1px inset #c0c0c0;
            padding: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            resize: vertical;
        }
        
        .image-viewer {
            text-align: center;
        }
        
        .image-viewer img {
            max-width: 100%;
            max-height: 500px;
            border: 1px solid #ccc;
        }
        
        .audio-player {
            text-align: center;
            padding: 20px;
        }
        
        .audio-player audio {
            width: 100%;
            max-width: 400px;
        }
        
        .video-player {
            text-align: center;
        }
        
        .video-player video {
            max-width: 100%;
            max-height: 500px;
        }
        
        /* Notificações */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--azul-escuro);
            color: white;
            padding: 12px 16px;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 4000;
            animation: notificationSlide 0.3s ease-out;
            font-size: 12px;
            max-width: 300px;
        }
        
        @keyframes notificationSlide {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .desktop-icons {
                grid-template-columns: repeat(auto-fit, 60px);
                gap: 15px;
                padding: 15px;
            }
            
            .desktop-icon .icon {
                font-size: 28px;
            }
            
            .desktop-icon .label {
                font-size: 9px;
            }
            
            .taskbar {
                height: 40px;
            }
            
            .start-menu {
                width: 280px;
                bottom: 40px;
            }
            
            .window {
                min-width: 300px;
                width: 95% !important;
                height: 80% !important;
                left: 2.5% !important;
                top: 10% !important;
            }
            
            .file-sidebar {
                width: 150px;
            }
        }
        
        @media (max-width: 480px) {
            .desktop-icons {
                grid-template-columns: repeat(auto-fit, 50px);
                gap: 10px;
                padding: 10px;
            }
            
            .desktop-icon .icon {
                font-size: 24px;
            }
            
            .desktop-icon .label {
                font-size: 8px;
            }
            
            .taskbar {
                height: 45px;
            }
            
            .start-menu {
                width: 250px;
                bottom: 45px;
            }
            
            .file-sidebar {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Desktop -->
    <div class="desktop">
        <div class="desktop-icons" id="desktop-icons">
            <!-- Ícones serão carregados dinamicamente -->
        </div>
    </div>

    <!-- Visualizador de Arquivos -->
    <div class="file-viewer" id="file-viewer">
        <div class="file-viewer-content">
            <div class="file-viewer-header">
                <span id="file-viewer-title">Visualizador de Arquivos</span>
                <div class="file-viewer-close" onclick="closeFileViewer()">×</div>
            </div>
            <div class="file-viewer-body" id="file-viewer-body">
                <!-- Conteúdo será carregado dinamicamente -->
            </div>
        </div>
    </div>

    <!-- Menu Iniciar -->
    <div class="start-menu" id="start-menu">
        <div class="start-menu-header">
            <span class="logo">🌟</span>
            <span>Aurora OS • MysticSoft</span>
        </div>
        <div class="start-menu-items" id="start-menu-items">
            <!-- Itens serão carregados dinamicamente -->
        </div>
        <div class="start-menu-footer">
            Clique em qualquer item para abrir
        </div>
    </div>

    <!-- Taskbar -->
    <div class="taskbar">
        <button class="start-button" onclick="toggleStartMenu()">
            <div class="start-logo">🌟</div>
            <span>Iniciar</span>
        </button>
        <div class="taskbar-items" id="taskbar-items">
            <!-- Itens da taskbar serão adicionados dinamicamente -->
        </div>
        <div class="clock" id="clock">00:00</div>
    </div>

    <script>
        // ========================================
        // CONFIGURAÇÃO DE SITES E APLICATIVOS
        // ========================================
        
        const sitesConfig = [
            // 🌐 SITES BÁSICOS
            {
                id: 'google',
                name: 'Google',
                url: 'https://www.google.com',
                icon: '🔍',
                premium: false
            },
            {
                id: 'youtube',
                name: 'YouTube',
                url: 'https://www.youtube.com',
                icon: '📺',
                premium: false
            },
            {
                id: 'github',
                name: 'GitHub',
                url: 'https://github.com',
                icon: '💻',
                premium: false
            },
            {
                id: 'spotify',
                name: 'Spotify',
                url: 'https://open.spotify.com',
                icon: '🎵',
                premium: false
            },
            
            // 🌟 SITES PREMIUM
            {
                id: 'mysticsoft-portal',
                name: 'MysticSoft Portal',
                url: 'https://www.wix.com',
                icon: '🌟',
                premium: true
            },
            {
                id: 'loja-mistica',
                name: 'Loja Mística',
                url: 'https://www.wix.com/website-template/view/html/1902',
                icon: '🛒',
                premium: true
            },
            {
                id: 'tarot-online',
                name: 'Tarot Online',
                url: 'https://www.tarot.com',
                icon: '🔮',
                premium: true
            },
            {
                id: 'portal-astrologico',
                name: 'Portal Astrológico',
                url: 'https://www.astro.com',
                icon: '⭐',
                premium: true
            },
            
            // 📁 APLICATIVOS LOCAIS
            {
                id: 'file-manager',
                name: 'Arquivos & Anotações',
                url: 'local://file-manager',
                icon: '📁',
                premium: false
            },
            {
                id: 'aurora-player',
                name: 'Aurora Player',
                url: 'local://aurora-player',
                icon: '🎵',
                premium: true
            }
        ];

        // ========================================
        // SISTEMA DE MENU INICIAR
        // ========================================
        
        function toggleStartMenu() {
            const startMenu = document.getElementById('start-menu');
            const isActive = startMenu.classList.contains('active');
            
            if (isActive) {
                startMenu.classList.remove('active');
            } else {
                startMenu.classList.add('active');
                loadStartMenuItems();
            }
        }
        
        function loadStartMenuItems() {
            const menuItems = document.getElementById('start-menu-items');
            menuItems.innerHTML = '';
            
            // Separar sites por categoria
            const basicSites = sitesConfig.filter(site => !site.premium);
            const premiumSites = sitesConfig.filter(site => site.premium);
            
            // Adicionar sites básicos
            if (basicSites.length > 0) {
                basicSites.forEach(site => {
                    const menuItem = document.createElement('div');
                    menuItem.className = 'start-menu-item';
                    menuItem.onclick = () => {
                        openSiteWindow(site.id, site.url, site.icon, site.name);
                        toggleStartMenu(); // Fecha o menu após clicar
                    };
                    
                    menuItem.innerHTML = `
                        <div class="icon">${site.icon}</div>
                        <div class="text">${site.name}</div>
                    `;
                    
                    menuItems.appendChild(menuItem);
                });
            }
            
            // Separador se houver sites premium
            if (premiumSites.length > 0 && basicSites.length > 0) {
                const separator = document.createElement('div');
                separator.className = 'start-menu-separator';
                menuItems.appendChild(separator);
            }
            
            // Adicionar sites premium
            if (premiumSites.length > 0) {
                premiumSites.forEach(site => {
                    const menuItem = document.createElement('div');
                    menuItem.className = 'start-menu-item premium';
                    menuItem.onclick = () => {
                        openSiteWindow(site.id, site.url, site.icon, site.name);
                        toggleStartMenu(); // Fecha o menu após clicar
                    };
                    
                    menuItem.innerHTML = `
                        <div class="icon">${site.icon}</div>
                        <div class="text">${site.name}</div>
                    `;
                    
                    menuItems.appendChild(menuItem);
                });
            }
        }
        
        // Fechar menu ao clicar fora
        document.addEventListener('click', function(event) {
            const startMenu = document.getElementById('start-menu');
            const startButton = document.querySelector('.start-button');
            
            if (!startMenu.contains(event.target) && !startButton.contains(event.target)) {
                startMenu.classList.remove('active');
            }
        });

        // ========================================
        // SISTEMA DE JANELAS COM IFRAME
        // ========================================
        
        let openWindows = [];
        let activeWindow = null;
        let dragData = null;
        let windowCounter = 0;

        function openSiteWindow(siteId, url, icon, title) {
            const windowId = `window-${siteId}-${++windowCounter}`;
            const windowTitle = title || siteId.charAt(0).toUpperCase() + siteId.slice(1);
            
            // Se já existe uma janela para este site, apenas foca
            const existingWindow = openWindows.find(id => id.includes(`window-${siteId}`));
            if (existingWindow) {
                focusWindow(existingWindow);
                return;
            }
            
            // Verifica se é aplicativo local
            if (url.startsWith('local://')) {
                createLocalAppWindow(windowId, windowTitle, icon, siteId);
            } else {
                // Cria janela normal com iframe
                const windowElement = createWindow(windowId, windowTitle, icon, url);
                document.body.appendChild(windowElement);
            }
            
            // Abre a janela
            const windowElement = document.getElementById(windowId);
            if (windowElement) {
                windowElement.classList.add('active');
                openWindows.push(windowId);
                focusWindow(windowId);
                addToTaskbar(windowId, windowTitle, icon);
                
                // Posiciona aleatoriamente
                const randomX = Math.random() * (window.innerWidth - 600) + 50;
                const randomY = Math.random() * (window.innerHeight - 450) + 50;
                windowElement.style.left = randomX + 'px';
                windowElement.style.top = randomY + 'px';
                
                showNotification('🪟 Aplicativo', `${windowTitle} carregado!`);
            }
        }

        function createLocalAppWindow(windowId, title, icon, appId) {
            const window = document.createElement('div');
            window.id = windowId;
            window.className = 'window';
            
            let appContent = '';
            let windowSize = { width: '900px', height: '700px' };
            
            if (appId === 'file-manager') {
                appContent = createFileManagerContent();
            } else if (appId === 'aurora-player') {
                appContent = createAuroraPlayerContent();
                windowSize = { width: '1000px', height: '800px' };
            }
            
            window.style.width = windowSize.width;
            window.style.height = windowSize.height;
            
            window.innerHTML = `
                <div class="window-header" onmousedown="startDrag(event, '${windowId}')">
                    <div class="window-title">
                        <span>${icon}</span>
                        <span>${title}</span>
                    </div>
                    <div class="window-controls">
                        <div class="window-control" onclick="minimizeWindow('${windowId}')">_</div>
                        <div class="window-control" onclick="toggleMaximize('${windowId}')">□</div>
                        <div class="window-control close" onclick="closeWindow('${windowId}')">×</div>
                    </div>
                </div>
                <div class="window-content">
                    ${appContent}
                </div>
                <div class="window-resize-handle" onmousedown="startResize(event, '${windowId}')"></div>
            `;
            
            document.body.appendChild(window);
            
            // Inicializa o aplicativo
            if (appId === 'file-manager') {
                initFileManager();
            } else if (appId === 'aurora-player') {
                initAuroraPlayer();
            }
            
            return window;
        }

        function createAuroraPlayerContent() {
            return `
                <div class="aurora-player">
                    <div class="player" role="region" aria-label="Aurora Player">
                        <div class="top" aria-live="polite">
                            <div class="brand">
                                <svg width="30" height="30" viewBox="0 0 48 48" aria-hidden="true" focusable="false">
                                    <defs>
                                        <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
                                            <stop offset="0%" stop-color="var(--dourado)"/>
                                            <stop offset="100%" stop-color="var(--dourado-alt)"/>
                                        </linearGradient>
                                    </defs>
                                    <circle cx="24" cy="24" r="20" fill="none" stroke="url(#g)" stroke-width="3"/>
                                    <path d="M24 6 L29 19 L43 19 L31 27 L36 40 L24 31 L12 40 L17 27 L5 19 L19 19 Z" fill="none" stroke="url(#g)" stroke-width="2"/>
                                </svg>
                                <div>
                                    <h1>AURORA PLAYER</h1>
                                    <div class="version">v3 • Retro‑Whimsigoth</div>
                                </div>
                            </div>
                            <div class="leds">
                                <span class="led power" title="Power"></span>
                                <span class="led play" title="Play status"></span>
                                <span class="led option" title="Options"></span>
                            </div>
                        </div>

                        <div class="wrap">
                            <section>
                                <div class="lcd">
                                    <div class="title" id="lcdTitle">AURORA PLAYER RETRÔ</div>
                                    <div class="artist" id="lcdArtist">Selecione uma música para reproduzir</div>
                                    <div class="time" id="lcdTime">00:00/00:00</div>
                                    <div class="progress" id="progress" aria-label="Linha do tempo" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                                        <div class="bar" id="bar"></div>
                                        <div class="thumb" id="thumb" aria-hidden="true"></div>
                                    </div>
                                </div>
                                <div class="controls" role="group" aria-label="Controles principais">
                                    <button class="btn" id="btnPrev" aria-label="Anterior">⏮</button>
                                    <button class="btn primary" id="btnPlay" aria-label="Reproduzir">▶</button>
                                    <button class="btn" id="btnNext" aria-label="Próxima">⏭</button>
                                    <button class="btn" id="btnStop" aria-label="Parar">⏹</button>
                                </div>
                                <div style="padding:10px 4px">
                                    <canvas id="viz" height="46"></canvas>
                                </div>
                            </section>

                            <aside>
                                <div class="panel" aria-label="Playlist">
                                    <div id="list"></div>
                                </div>
                                <div class="bottom">
                                    <div class="vol">
                                        <label for="vol">VOL</label>
                                        <div class="slider" id="vol" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="70" aria-label="Volume">
                                            <div class="fill" id="volFill"></div>
                                        </div>
                                    </div>
                                    <div class="fx" role="group" aria-label="Funções">
                                        <button class="chip" id="btnShf" aria-pressed="false">SHF</button>
                                        <button class="chip" id="btnRpt" aria-pressed="false">RPT</button>
                                        <button class="chip" id="btnEq">EQ</button>
                                        <button class="chip" id="btnFav">FAV</button>
                                    </div>
                                </div>
                            </aside>
                        </div>
                    </div>
                </div>
            `;
        }

        function createFileManagerContent() {
            return `
                <div class="file-manager">
                    <div class="file-toolbar">
                        <div class="file-btn" onclick="createNewFile('text')">
                            <span>📝</span>
                            <span>Novo Texto</span>
                        </div>
                        <div class="file-btn" onclick="createNewFile('note')">
                            <span>📋</span>
                            <span>Nova Anotação</span>
                        </div>
                        <div class="file-btn" onclick="uploadFiles()">
                            <span>📤</span>
                            <span>Upload</span>
                        </div>
                        <div class="file-btn" onclick="deleteSelectedFile()">
                            <span>🗑️</span>
                            <span>Excluir</span>
                        </div>
                        <div class="file-btn" onclick="refreshFiles()">
                            <span>🔄</span>
                            <span>Atualizar</span>
                        </div>
                    </div>
                    
                    <div class="file-content">
                        <div class="file-sidebar">
                            <div class="file-folder active" onclick="selectFolder('all')">
                                <span>📁</span>
                                <span>Todos os Arquivos</span>
                            </div>
                            <div class="file-folder" onclick="selectFolder('documents')">
                                <span>📄</span>
                                <span>Documentos</span>
                            </div>
                            <div class="file-folder" onclick="selectFolder('images')">
                                <span>🖼️</span>
                                <span>Imagens</span>
                            </div>
                            <div class="file-folder" onclick="selectFolder('audio')">
                                <span>🎵</span>
                                <span>Áudios</span>
                            </div>
                            <div class="file-folder" onclick="selectFolder('videos')">
                                <span>🎬</span>
                                <span>Vídeos</span>
                            </div>
                            <div class="file-folder" onclick="selectFolder('notes')">
                                <span>📋</span>
                                <span>Anotações</span>
                            </div>
                        </div>
                        
                        <div class="file-main">
                            <div class="file-path" id="file-path">
                                📁 Todos os Arquivos
                            </div>
                            
                            <div class="file-upload" onclick="uploadFiles()" ondrop="handleFileDrop(event)" ondragover="handleDragOver(event)">
                                <div style="font-size: 24px; margin-bottom: 8px;">📤</div>
                                <div>Clique aqui ou arraste arquivos para fazer upload</div>
                                <div style="font-size: 10px; margin-top: 4px; opacity: 0.7;">
                                    Suporta: Texto, Imagens, Áudios, Vídeos
                                </div>
                                <input type="file" id="file-input" multiple accept="*/*" onchange="handleFileSelect(event)">
                            </div>
                            
                            <div class="file-grid" id="file-grid">
                                <!-- Arquivos serão carregados aqui -->
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function createWindow(windowId, title, icon, url) {
            const window = document.createElement('div');
            window.id = windowId;
            window.className = 'window';
            window.style.width = '800px';
            window.style.height = '600px';
            
            window.innerHTML = `
                <div class="window-header" onmousedown="startDrag(event, '${windowId}')">
                    <div class="window-title">
                        <span>${icon}</span>
                        <span>${title}</span>
                    </div>
                    <div class="window-controls">
                        <div class="window-control" onclick="minimizeWindow('${windowId}')">_</div>
                        <div class="window-control" onclick="toggleMaximize('${windowId}')">□</div>
                        <div class="window-control close" onclick="closeWindow('${windowId}')">×</div>
                    </div>
                </div>
                <div class="window-content">
                    <div class="loading-overlay" id="loading-${windowId}">
                        <div class="loading-spinner"></div>
                        <div>Carregando ${title}...</div>
                        <div style="font-size: 10px; margin-top: 5px; opacity: 0.7;">${url}</div>
                    </div>
                    <iframe class="window-iframe" src="${url}" 
                            onload="hideLoading('${windowId}')"
                            onerror="showError('${windowId}')">
                    </iframe>
                </div>
                <div class="window-resize-handle" onmousedown="startResize(event, '${windowId}')"></div>
            `;
            
            return window;
        }

        function hideLoading(windowId) {
            const loading = document.getElementById(`loading-${windowId}`);
            if (loading) {
                setTimeout(() => {
                    loading.style.opacity = '0';
                    loading.style.transition = 'opacity 0.5s ease';
                    setTimeout(() => {
                        loading.style.display = 'none';
                    }, 500);
                }, 2000);
            }
        }

        function showError(windowId) {
            const loading = document.getElementById(`loading-${windowId}`);
            if (loading) {
                loading.innerHTML = `
                    <div style="color: #ff6b6b; font-size: 24px; margin-bottom: 12px;">⚠️</div>
                    <div>Erro ao carregar o site</div>
                    <div style="font-size: 10px; margin-top: 5px; opacity: 0.7;">Verifique sua conexão com a internet</div>
                `;
            }
        }

        function focusWindow(windowId) {
            // Remove foco de todas as janelas
            document.querySelectorAll('.window').forEach(w => w.classList.remove('focused'));
            
            // Adiciona foco à janela atual
            const window = document.getElementById(windowId);
            if (window) {
                window.classList.add('focused');
                activeWindow = windowId;
                
                // Atualiza taskbar
                document.querySelectorAll('.taskbar-item').forEach(item => item.classList.remove('active'));
                const taskbarItem = document.querySelector(`[data-window="${windowId}"]`);
                if (taskbarItem) {
                    taskbarItem.classList.add('active');
                }
            }
        }

        function minimizeWindow(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                window.style.display = 'none';
                
                // Remove da lista de janelas ativas mas mantém na taskbar
                const taskbarItem = document.querySelector(`[data-window="${windowId}"]`);
                if (taskbarItem) {
                    taskbarItem.classList.remove('active');
                }
            }
        }

        function toggleMaximize(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                if (window.style.width === '100vw') {
                    // Restaurar
                    window.style.width = '800px';
                    window.style.height = '600px';
                    window.style.left = '100px';
                    window.style.top = '100px';
                } else {
                    // Maximizar
                    window.style.width = '100vw';
                    window.style.height = 'calc(100vh - 32px)';
                    window.style.left = '0';
                    window.style.top = '0';
                }
            }
        }

        function closeWindow(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                window.remove();
                
                // Remove da lista de janelas abertas
                openWindows = openWindows.filter(id => id !== windowId);
                
                // Remove da taskbar
                const taskbarItem = document.querySelector(`[data-window="${windowId}"]`);
                if (taskbarItem) {
                    taskbarItem.remove();
                }
                
                // Se era a janela ativa, foca outra
                if (activeWindow === windowId) {
                    activeWindow = null;
                    if (openWindows.length > 0) {
                        focusWindow(openWindows[openWindows.length - 1]);
                    }
                }
            }
        }

        function addToTaskbar(windowId, title, icon) {
            const taskbarItems = document.getElementById('taskbar-items');
            const taskbarItem = document.createElement('div');
            taskbarItem.className = 'taskbar-item';
            taskbarItem.setAttribute('data-window', windowId);
            taskbarItem.textContent = `${icon} ${title}`;
            taskbarItem.onclick = () => {
                const window = document.getElementById(windowId);
                if (window.style.display === 'none') {
                    window.style.display = 'block';
                }
                focusWindow(windowId);
            };
            
            taskbarItems.appendChild(taskbarItem);
        }

        // ========================================
        // AURORA PLAYER INTEGRATION
        // ========================================
        
        function initAuroraPlayer() {
            const mediaLibrary = [
                { id: 't1', title:'Nostalgic Dreams', artist:'Aurora Mystic', duration: 4*60+32, url:'https://cdn.pixabay.com/download/audio/2021/10/26/audio_9c1e6d56a0.mp3?filename=nostalgic-epic-112199.mp3' },
                { id: 't2', title:'Digital Memories', artist:'Synthwave Collective', duration: 3*60+45, url:'https://cdn.pixabay.com/download/audio/2022/03/15/audio_2d8e0b1d1e.mp3?filename=retrowave-ambient-110131.mp3' },
                { id: 't3', title:'Pixel Paradise', artist:'Chiptune Masters', duration: 5*60+12, url:'https://cdn.pixabay.com/download/audio/2021/09/30/audio_4a3cbfe5b8.mp3?filename=8-bit-arcade-92726.mp3' },
                { id: 't4', title:'Y2K Anthem', artist:'Millennium Beat', duration: 4*60+8, url:'https://cdn.pixabay.com/download/audio/2022/01/19/audio_6a803b0f7d.mp3?filename=synthwave-80s-ambient-100232.mp3' },
                { id: 't5', title:'Binary Sunset', artist:'Code Warriors', duration: 6*60+24, url:'https://cdn.pixabay.com/download/audio/2022/03/15/audio_7d2fc24e4c.mp3?filename=space-ambient-110130.mp3' },
                { id: 't6', title:'Floating Clouds', artist:'Zen Masters', duration: 7*60+15, url:'https://cdn.pixabay.com/download/audio/2021/10/26/audio_0f1e0a5e2c.mp3?filename=ambient-calm-112191.mp3' },
            ];

            const $ = s => document.querySelector(s);
            const $$ = s => document.querySelectorAll(s);

            // Elements
            const lcdTitle = $('#lcdTitle');
            const lcdArtist = $('#lcdArtist');
            const lcdTime = $('#lcdTime');
            const progress = $('#progress');
            const bar = $('#bar');
            const thumb = $('#thumb');
            const btnPlay = $('#btnPlay');
            const btnPrev = $('#btnPrev');
            const btnNext = $('#btnNext');
            const btnStop = $('#btnStop');
            const btnShf = $('#btnShf');
            const btnRpt = $('#btnRpt');
            const btnEq = $('#btnEq');
            const btnFav = $('#btnFav');
            const vol = $('#vol');
            const volFill = $('#volFill');
            const list = $('#list');

            const audio = new Audio();
            audio.preload = 'metadata';

            let current = 0;
            let isPlaying = false;
            let shuffle = false;
            let repeat = false;
            let draggingProgress = false;
            let draggingVol = false;

            const favKey = 'aurora_player_favs_v1';
            const favs = new Set(JSON.parse(localStorage.getItem(favKey) || '[]'));

            // Helpers
            const pad = n => String(n).padStart(2,'0');
            const fmt = s => `${pad(Math.floor(s/60))}:${pad(Math.floor(s%60))}`;

            function renderList(){
                list.innerHTML = '';
                mediaLibrary.forEach((t,i)=>{
                    const row = document.createElement('div');
                    row.className = 'row' + (i===current?' active':'');
                    row.setAttribute('role','button');
                    row.setAttribute('aria-label', `${t.title} de ${t.artist}`);
                    row.innerHTML = `
                        <div class="fav" title="Favoritar">${favs.has(t.id)?'★':'☆'}</div>
                        <div>
                            <div class="t">${t.title}</div>
                            <div class="a">${t.artist}</div>
                        </div>
                        <div class="meta">${fmt(t.duration)}</div>
                    `;
                    row.querySelector('.fav').addEventListener('click', (e)=>{
                        e.stopPropagation();
                        toggleFav(t.id, e.currentTarget);
                    });
                    row.addEventListener('click', ()=>{ load(i); play(); });
                    list.appendChild(row);
                });
            }

            function toggleFav(id, el){
                if(favs.has(id)) favs.delete(id); else favs.add(id);
                localStorage.setItem(favKey, JSON.stringify([...favs]));
                if(el) el.textContent = favs.has(id)?'★':'☆';
            }

            function load(i){
                current = (i+mediaLibrary.length)%mediaLibrary.length;
                const t = mediaLibrary[current];
                audio.src = t.url;
                audio.currentTime = 0;
                lcdTitle.textContent = t.title.toUpperCase();
                lcdArtist.textContent = t.artist;
                lcdTime.textContent = `00:00/${fmt(t.duration)}`;
                bar.style.width = '0%';
                thumb.style.left = '0%';
                $$('.row').forEach((r,idx)=> r.classList.toggle('active', idx===current));
            }

            function play(){ 
                audio.play().then(()=>{
                    isPlaying = true; 
                    btnPlay.textContent='⏸'; 
                    $('.led.play').style.opacity=1;
                }).catch(console.warn);
            }
            
            function pause(){ 
                audio.pause(); 
                isPlaying=false; 
                btnPlay.textContent='▶';
                $('.led.play').style.opacity=.7;
            }
            
            function stop(){ 
                pause(); 
                audio.currentTime=0; 
                updateProgressUI(0); 
            }

            function next(){
                if(shuffle){ load(Math.floor(Math.random()*mediaLibrary.length)); }
                else{ load(current+1); }
                if(isPlaying) play();
            }
            
            function prev(){
                if(shuffle){ load(Math.floor(Math.random()*mediaLibrary.length)); }
                else{ load(current-1); }
                if(isPlaying) play();
            }

            function updateProgressUI(pct){
                bar.style.width = pct + '%';
                thumb.style.left = pct + '%';
            }

            function onTime(){
                const d = mediaLibrary[current].duration || audio.duration || 0;
                const cur = Math.floor(audio.currentTime);
                lcdTime.textContent = `${fmt(cur)}/${fmt(d||0)}`;
                if(!draggingProgress){
                    const pct = d? (cur / d) * 100 : 0;
                    updateProgressUI(Math.min(100, pct));
                }
            }

            // Progress drag/seek functions
            function posToPct(e, elem){
                const r = elem.getBoundingClientRect();
                const x = Math.min(Math.max(0, (e.clientX || (e.touches? e.touches[0].clientX:0)) - r.left), r.width);
                return (x / r.width) * 100;
            }

            // Volume control functions
            function setVolumeByPct(p){ 
                audio.volume = Math.min(1, Math.max(0, p/100)); 
                volFill.style.width = `${p}%`; 
                vol.setAttribute('aria-valuenow', Math.round(p)); 
            }

            // Progress bar event listeners
            progress.addEventListener('pointerdown', e=>{
                draggingProgress = true; 
                progress.setPointerCapture(e.pointerId);
                const pct = posToPct(e, progress); 
                updateProgressUI(pct);
            });
            
            progress.addEventListener('pointermove', e=>{
                if(!draggingProgress) return; 
                const pct = posToPct(e, progress); 
                updateProgressUI(pct);
            });
            
            progress.addEventListener('pointerup', e=>{
                const pct = posToPct(e, progress);
                const d = mediaLibrary[current].duration || audio.duration || 0;
                audio.currentTime = (pct/100) * d; 
                draggingProgress = false;
            });

            // Volume control event listeners
            vol.addEventListener('pointerdown', e=>{
                draggingVol=true; 
                vol.setPointerCapture(e.pointerId); 
                setVolumeByPct(posToPct(e, vol));
            });
            
            vol.addEventListener('pointermove', e=>{
                if(draggingVol) setVolumeByPct(posToPct(e, vol));
            });
            
            vol.addEventListener('pointerup', ()=> draggingVol=false);

            // Button event listeners
            btnPlay.addEventListener('click', ()=> isPlaying ? pause() : play());
            btnPrev.addEventListener('click', prev);
            btnNext.addEventListener('click', next);
            btnStop.addEventListener('click', stop);
            
            btnShf.addEventListener('click', ()=>{
                shuffle = !shuffle;
                btnShf.classList.toggle('active', shuffle);
                btnShf.setAttribute('aria-pressed', String(shuffle));
            });
            
            btnRpt.addEventListener('click', ()=>{
                repeat = !repeat;
                btnRpt.classList.toggle('active', repeat);
                btnRpt.setAttribute('aria-pressed', String(repeat));
            });

            btnEq.addEventListener('click', ()=> {
                alert('🎛️ Equalizer chegará em breve!\n\nRecursos planejados:\n• Graves, médios e agudos\n• Presets: Aurora, Whimsigoth, Vaporwave\n• Visualizador de frequência');
            });

            btnFav.addEventListener('click', ()=>{
                const id = mediaLibrary[current].id; 
                toggleFav(id); 
                renderList();
            });

            // Audio event listeners
            audio.addEventListener('timeupdate', onTime);
            audio.addEventListener('ended', ()=>{
                if(repeat) { audio.currentTime = 0; play(); }
                else { next(); }
            });
            audio.addEventListener('play', ()=>{
                isPlaying=true; 
                btnPlay.textContent='⏸'; 
                $('.led.play').style.opacity=1;
            });
            audio.addEventListener('pause', ()=>{
                isPlaying=false; 
                btnPlay.textContent='▶'; 
                $('.led.play').style.opacity=.7;
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', (e)=>{
                if(['INPUT','TEXTAREA'].includes(document.activeElement.tagName)) return;
                switch(e.code){
                    case 'Space': 
                        e.preventDefault(); 
                        isPlaying? pause(): play(); 
                        break;
                    case 'ArrowRight': 
                        next(); 
                        break;
                    case 'ArrowLeft': 
                        prev(); 
                        break;
                    case 'ArrowUp': 
                        setVolumeByPct(Math.min(100, (audio.volume*100)+5)); 
                        break;
                    case 'ArrowDown': 
                        setVolumeByPct(Math.max(0, (audio.volume*100)-5)); 
                        break;
                    case 'KeyS': 
                        if(e.ctrlKey){ 
                            shuffle=!shuffle; 
                            btnShf.classList.toggle('active', shuffle);
                        } 
                        break;
                    case 'KeyR': 
                        if(e.ctrlKey){ 
                            repeat=!repeat; 
                            btnRpt.classList.toggle('active', repeat);
                        } 
                        break;
                }
            });

            // Mini visualizer (fake oscilloscope)
            const canvas = document.getElementById('viz');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                let t = 0; 
                
                function viz(){ 
                    const w = ctx.canvas.width, h = ctx.canvas.height; 
                    ctx.clearRect(0,0,w,h); 
                    ctx.lineWidth=2; 
                    ctx.strokeStyle='rgba(240,170,83,.9)'; 
                    ctx.beginPath(); 
                    
                    for(let x=0;x<w;x++){ 
                        const y = h/2 + Math.sin((x/32)+t)* (isPlaying? (h*.28): (h*.12)); 
                        if(x===0) ctx.moveTo(x,y); 
                        else ctx.lineTo(x,y);
                    } 
                    
                    ctx.stroke(); 
                    t+= isPlaying? .08 : .03; 
                    requestAnimationFrame(viz);
                } 
                
                requestAnimationFrame(viz);
            }

            // Initialize
            load(0);
            renderList();
            setVolumeByPct(70);
            
            showNotification('🎵 Aurora Player', 'Player carregado com todas as funcionalidades!');
        }

        // ========================================
        // SISTEMA DE GERENCIADOR DE ARQUIVOS
        // ========================================
        
        let userFiles = JSON.parse(localStorage.getItem('aurora-files') || '[]');
        let selectedFile = null;
        let currentFolder = 'all';
        
        function initFileManager() {
            loadFiles();
            
            // Adicionar alguns arquivos de exemplo se não houver nenhum
            if (userFiles.length === 0) {
                userFiles = [
                    {
                        id: 'welcome',
                        name: 'Bem-vindo.txt',
                        type: 'text',
                        content: 'Bem-vindo ao Aurora OS!\n\nEste é seu gerenciador de arquivos pessoal.\nVocê pode criar textos, anotações e fazer upload de imagens, áudios e vídeos.\n\nDivirta-se explorando! 🌟',
                        size: '245 bytes',
                        created: new Date().toLocaleDateString('pt-BR'),
                        folder: 'documents'
                    },
                    {
                        id: 'notes-example',
                        name: 'Minhas Anotações.txt',
                        type: 'note',
                        content: '📋 ANOTAÇÕES PESSOAIS\n\n• Lembrar de meditar hoje\n• Estudar astrologia\n• Organizar cristais\n• Fazer leitura de tarot\n\n✨ Pensamentos místicos:\n- A lua está em fase crescente\n- Energia positiva fluindo\n- Gratidão pelo dia',
                        size: '198 bytes',
                        created: new Date().toLocaleDateString('pt-BR'),
                        folder: 'notes'
                    }
                ];
                saveFiles();
                loadFiles();
            }
        }
        
        function saveFiles() {
            localStorage.setItem('aurora-files', JSON.stringify(userFiles));
        }
        
        function loadFiles() {
            const fileGrid = document.getElementById('file-grid');
            if (!fileGrid) return;
            
            fileGrid.innerHTML = '';
            
            const filteredFiles = currentFolder === 'all' 
                ? userFiles 
                : userFiles.filter(file => file.folder === currentFolder);
            
            filteredFiles.forEach(file => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.onclick = () => selectFileItem(file.id, fileItem);
                fileItem.ondblclick = () => openFile(file);
                
                const icon = getFileIcon(file.type);
                
                fileItem.innerHTML = `
                    <div class="icon">${icon}</div>
                    <div class="name">${file.name}</div>
                    <div class="size">${file.size}</div>
                `;
                
                fileGrid.appendChild(fileItem);
            });
        }
        
        function getFileIcon(type) {
            const icons = {
                'text': '📝',
                'note': '📋',
                'image': '🖼️',
                'audio': '🎵',
                'video': '🎬',
                'pdf': '📄',
                'doc': '📄',
                'unknown': '📄'
            };
            return icons[type] || icons['unknown'];
        }
        
        function selectFolder(folder) {
            currentFolder = folder;
            
            // Atualizar visual das pastas
            document.querySelectorAll('.file-folder').forEach(f => f.classList.remove('active'));
            event.target.closest('.file-folder').classList.add('active');
            
            // Atualizar caminho
            const pathNames = {
                'all': '📁 Todos os Arquivos',
                'documents': '📄 Documentos',
                'images': '🖼️ Imagens',
                'audio': '🎵 Áudios',
                'videos': '🎬 Vídeos',
                'notes': '📋 Anotações'
            };
            
            document.getElementById('file-path').textContent = pathNames[folder];
            
            loadFiles();
        }
        
        function selectFileItem(fileId, element) {
            // Remove seleção anterior
            document.querySelectorAll('.file-item').forEach(item => item.classList.remove('selected'));
            
            // Adiciona seleção atual
            element.classList.add('selected');
            selectedFile = fileId;
        }
        
        function createNewFile(type) {
            const fileName = prompt(`Nome do ${type === 'text' ? 'arquivo' : 'anotação'}:`, 
                                  type === 'text' ? 'Novo Documento.txt' : 'Nova Anotação.txt');
            
            if (!fileName) return;
            
            const newFile = {
                id: Date.now().toString(),
                name: fileName,
                type: type,
                content: type === 'text' ? '' : '📋 NOVA ANOTAÇÃO\n\n',
                size: '0 bytes',
                created: new Date().toLocaleDateString('pt-BR'),
                folder: type === 'note' ? 'notes' : 'documents'
            };
            
            userFiles.push(newFile);
            saveFiles();
            loadFiles();
            
            // Abrir para edição
            setTimeout(() => openFile(newFile), 100);
        }
        
        function openFile(file) {
            const viewer = document.getElementById('file-viewer');
            const title = document.getElementById('file-viewer-title');
            const body = document.getElementById('file-viewer-body');
            
            title.textContent = file.name;
            
            if (file.type === 'text' || file.type === 'note') {
                body.innerHTML = `
                    <div style="margin-bottom: 12px;">
                        <strong>📝 Editor de Texto</strong>
                        <div style="font-size: 10px; color: #666; margin-top: 4px;">
                            Criado em: ${file.created} • Tamanho: ${file.size}
                        </div>
                    </div>
                    <textarea class="text-editor" id="text-content" placeholder="Digite seu texto aqui...">${file.content}</textarea>
                    <div style="margin-top: 12px; text-align: right;">
                        <button class="file-btn" onclick="saveTextFile('${file.id}')">
                            <span>💾</span>
                            <span>Salvar</span>
                        </button>
                    </div>
                `;
            } else if (file.type === 'image') {
                body.innerHTML = `
                    <div class="image-viewer">
                        <div style="margin-bottom: 12px;">
                            <strong>🖼️ Visualizador de Imagem</strong>
                            <div style="font-size: 10px; color: #666; margin-top: 4px;">
                                ${file.name} • ${file.size}
                            </div>
                        </div>
                        <img src="${file.content}" alt="${file.name}">
                    </div>
                `;
            } else if (file.type === 'audio') {
                body.innerHTML = `
                    <div class="audio-player">
                        <div style="margin-bottom: 20px;">
                            <strong>🎵 Player de Áudio</strong>
                            <div style="font-size: 10px; color: #666; margin-top: 4px;">
                                ${file.name} • ${file.size}
                            </div>
                        </div>
                        <audio controls>
                            <source src="${file.content}" type="audio/mpeg">
                            Seu navegador não suporta o elemento de áudio.
                        </audio>
                    </div>
                `;
            } else if (file.type === 'video') {
                body.innerHTML = `
                    <div class="video-player">
                        <div style="margin-bottom: 20px;">
                            <strong>🎬 Player de Vídeo</strong>
                            <div style="font-size: 10px; color: #666; margin-top: 4px;">
                                ${file.name} • ${file.size}
                            </div>
                        </div>
                        <video controls>
                            <source src="${file.content}" type="video/mp4">
                            Seu navegador não suporta o elemento de vídeo.
                        </video>
                    </div>
                `;
            }
            
            viewer.classList.add('active');
        }
        
        function closeFileViewer() {
            document.getElementById('file-viewer').classList.remove('active');
        }
        
        function saveTextFile(fileId) {
            const content = document.getElementById('text-content').value;
            const file = userFiles.find(f => f.id === fileId);
            
            if (file) {
                file.content = content;
                file.size = new Blob([content]).size + ' bytes';
                saveFiles();
                loadFiles();
                showNotification('💾 Salvo', 'Arquivo salvo com sucesso!');
            }
        }
        
        function uploadFiles() {
            document.getElementById('file-input').click();
        }
        
        function handleFileSelect(event) {
            const files = event.target.files;
            processFiles(files);
        }
        
        function handleFileDrop(event) {
            event.preventDefault();
            event.stopPropagation();
            
            const files = event.dataTransfer.files;
            processFiles(files);
            
            event.target.classList.remove('dragover');
        }
        
        function handleDragOver(event) {
            event.preventDefault();
            event.target.classList.add('dragover');
        }
        
        function processFiles(files) {
            Array.from(files).forEach(file => {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const fileType = getFileTypeFromMime(file.type);
                    const folder = getFolderFromType(fileType);
                    
                    const newFile = {
                        id: Date.now().toString() + Math.random().toString(36).substr(2, 9),
                        name: file.name,
                        type: fileType,
                        content: e.target.result,
                        size: formatFileSize(file.size),
                        created: new Date().toLocaleDateString('pt-BR'),
                        folder: folder
                    };
                    
                    userFiles.push(newFile);
                    saveFiles();
                    loadFiles();
                    
                    showNotification('📤 Upload', `${file.name} carregado com sucesso!`);
                };
                
                if (file.type.startsWith('image/') || file.type.startsWith('audio/') || file.type.startsWith('video/')) {
                    reader.readAsDataURL(file);
                } else {
                    reader.readAsText(file);
                }
            });
        }
        
        function getFileTypeFromMime(mimeType) {
            if (mimeType.startsWith('image/')) return 'image';
            if (mimeType.startsWith('audio/')) return 'audio';
            if (mimeType.startsWith('video/')) return 'video';
            if (mimeType.includes('text')) return 'text';
            return 'unknown';
        }
        
        function getFolderFromType(type) {
            const folderMap = {
                'image': 'images',
                'audio': 'audio',
                'video': 'videos',
                'text': 'documents',
                'note': 'notes',
                'unknown': 'documents'
            };
            return folderMap[type] || 'documents';
        }
        
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 bytes';
            const k = 1024;
            const sizes = ['bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        }
        
        function deleteSelectedFile() {
            if (!selectedFile) {
                alert('Selecione um arquivo para excluir.');
                return;
            }
            
            const file = userFiles.find(f => f.id === selectedFile);
            if (file && confirm(`Tem certeza que deseja excluir "${file.name}"?`)) {
                userFiles = userFiles.filter(f => f.id !== selectedFile);
                saveFiles();
                loadFiles();
                selectedFile = null;
                showNotification('🗑️ Excluído', 'Arquivo excluído com sucesso!');
            }
        }
        
        function refreshFiles() {
            loadFiles();
            showNotification('🔄 Atualizado', 'Lista de arquivos atualizada!');
        }

        // ========================================
        // SISTEMA DE ARRASTAR JANELAS
        // ========================================
        
        function startDrag(event, windowId) {
            event.preventDefault();
            const window = document.getElementById(windowId);
            
            dragData = {
                windowId: windowId,
                startX: event.clientX,
                startY: event.clientY,
                startLeft: parseInt(window.style.left) || 0,
                startTop: parseInt(window.style.top) || 0
            };
            
            focusWindow(windowId);
            
            document.addEventListener('mousemove', handleDrag);
            document.addEventListener('mouseup', stopDrag);
        }
        
        function handleDrag(event) {
            if (!dragData) return;
            
            const window = document.getElementById(dragData.windowId);
            const deltaX = event.clientX - dragData.startX;
            const deltaY = event.clientY - dragData.startY;
            
            window.style.left = (dragData.startLeft + deltaX) + 'px';
            window.style.top = (dragData.startTop + deltaY) + 'px';
        }
        
        function stopDrag() {
            dragData = null;
            document.removeEventListener('mousemove', handleDrag);
            document.removeEventListener('mouseup', stopDrag);
        }

        // ========================================
        // SISTEMA DE REDIMENSIONAR JANELAS
        // ========================================
        
        function startResize(event, windowId) {
            event.preventDefault();
            event.stopPropagation();
            
            const window = document.getElementById(windowId);
            const rect = window.getBoundingClientRect();
            
            dragData = {
                windowId: windowId,
                startX: event.clientX,
                startY: event.clientY,
                startWidth: rect.width,
                startHeight: rect.height
            };
            
            document.addEventListener('mousemove', handleResize);
            document.addEventListener('mouseup', stopResize);
        }
        
        function handleResize(event) {
            if (!dragData) return;
            
            const window = document.getElementById(dragData.windowId);
            const deltaX = event.clientX - dragData.startX;
            const deltaY = event.clientY - dragData.startY;
            
            const newWidth = Math.max(400, dragData.startWidth + deltaX);
            const newHeight = Math.max(300, dragData.startHeight + deltaY);
            
            window.style.width = newWidth + 'px';
            window.style.height = newHeight + 'px';
        }
        
        function stopResize() {
            dragData = null;
            document.removeEventListener('mousemove', handleResize);
            document.removeEventListener('mouseup', stopResize);
        }

        // ========================================
        // SISTEMA DE NOTIFICAÇÕES
        // ========================================
        
        function showNotification(title, message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 4px;">${title}</div>
                <div style="font-size: 11px;">${message}</div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'notificationSlide 0.3s ease-out reverse';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }

        // ========================================
        // INICIALIZAÇÃO DO SISTEMA
        // ========================================
        
        function loadDesktopIcons() {
            const desktopIcons = document.getElementById('desktop-icons');
            desktopIcons.innerHTML = '';
            
            sitesConfig.forEach(site => {
                const icon = document.createElement('div');
                icon.className = `desktop-icon ${site.premium ? 'premium' : ''}`;
                icon.onclick = () => openSiteWindow(site.id, site.url, site.icon, site.name);
                
                icon.innerHTML = `
                    <div class="icon">${site.icon}</div>
                    <div class="label">${site.name}</div>
                `;
                
                desktopIcons.appendChild(icon);
            });
        }
        
        function updateClock() {
            const clock = document.getElementById('clock');
            const now = new Date();
            const time = now.toLocaleTimeString('pt-BR', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            clock.textContent = time;
        }
        
        // Inicializar sistema
        document.addEventListener('DOMContentLoaded', function() {
            loadDesktopIcons();
            updateClock();
            setInterval(updateClock, 1000);
            
            showNotification('🌟 Aurora OS', 'Sistema carregado com Aurora Player integrado!');
        });
    </script>
</body>
</html>

