<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aurora OS ‚Ä¢ MysticSoft</title>
    <link href="https://fonts.googleapis.com/css2?family=Alice&family=VT323&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        
        :root {
            /* Tema Aurora Sagrada */
            --vinho: #3e0a29;
            --verde-claro: #b2d1b1;
            --azul-escuro: #0b1836;
            --dourado: #f0aa53;
            --pergaminho: #f2eaff;
            
            /* Vari√°veis de tema din√¢micas */
            --theme-bg: linear-gradient(135deg, var(--azul-escuro) 0%, var(--vinho) 100%);
            --theme-taskbar: var(--vinho);
            --theme-start-btn: var(--vinho);
            --theme-start-text: var(--dourado);
            --theme-clock: var(--dourado);
            --theme-window-header: var(--azul-escuro);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'MS Sans Serif', sans-serif;
            font-size: 11px;
            background: var(--theme-bg);
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }
        
        /* Desktop */
        .desktop {
            position: relative;
            width: 100%;
            height: calc(100vh - 40px);
            background: var(--theme-bg);
            background-attachment: fixed;
        }
        
        .desktop-icons {
            display: grid;
            grid-template-columns: repeat(auto-fit, 80px);
            gap: 20px;
            padding: 20px;
            height: 100%;
            align-content: start;
        }
        
        .desktop-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            cursor: pointer;
            border-radius: 0;
            transition: none;
            position: relative;
        }
        
        .desktop-icon:hover {
            background: rgba(240, 170, 83, 0.2);
            outline: 1px dotted var(--dourado);
        }
        
        .desktop-icon.selected {
            background: rgba(240, 170, 83, 0.3);
            outline: 1px dotted var(--dourado);
        }
        
        .desktop-icon .icon {
            font-size: 32px;
            margin-bottom: 4px;
            filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.8));
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }
        
        .desktop-icon.premium .icon::after {
            content: '‚≠ê';
            position: absolute;
            top: -5px;
            right: -5px;
            font-size: 16px;
            color: var(--dourado);
            text-shadow: 0 0 5px var(--dourado);
            animation: starGlow 2s ease-in-out infinite;
        }
        
        .desktop-icon .label {
            color: white;
            font-size: 10px;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            max-width: 70px;
            word-wrap: break-word;
        }
        
        @keyframes iconBreathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes starGlow {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        /* Menu de Contexto (Bot√£o Direito) */
        .context-menu {
            position: fixed;
            background: #c0c0c0;
            border: 2px outset #c0c0c0;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            z-index: 3000;
            display: none;
            min-width: 200px;
        }
        
        .context-menu-item {
            padding: 8px 16px;
            cursor: pointer;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: black;
            border-bottom: 1px solid #a0a0a0;
        }
        
        .context-menu-item:hover {
            background: #316AC5;
            color: white;
        }
        
        .context-menu-item:last-child {
            border-bottom: none;
        }
        
        .context-menu-separator {
            height: 1px;
            background: #808080;
            margin: 2px 0;
        }
        
        /* Taskbar Aprimorada - Estilo Windows ME */
        .taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 30px;
            background: var(--theme-taskbar);
            border-top: 2px solid;
            border-color: rgba(255,255,255,0.3) transparent transparent transparent;
            display: flex;
            align-items: center;
            padding: 0 4px;
            z-index: 1000;
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.2);
        }
        
        .start-button {
            background: var(--theme-start-btn);
            border: 2px solid;
            border-color: rgba(255,255,255,0.4) rgba(0,0,0,0.4) rgba(0,0,0,0.4) rgba(255,255,255,0.4);
            color: var(--theme-start-text);
            padding: 3px 10px;
            cursor: pointer;
            font-size: 11px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 6px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            transition: none;
            border-radius: 0;
            height: 24px;
            box-shadow: inset 1px 1px 0 rgba(255,255,255,0.3);
        }
        
        .start-button:hover {
            background: #4a1a35;
        }
        
        .start-button:active,
        .start-button.active {
            border-color: rgba(0,0,0,0.4) rgba(255,255,255,0.4) rgba(255,255,255,0.4) rgba(0,0,0,0.4);
            box-shadow: inset -1px -1px 0 rgba(255,255,255,0.3);
            padding-top: 4px;
            padding-left: 11px;
        }
        
        .start-logo {
            font-size: 16px;
            filter: drop-shadow(0 0 3px var(--dourado));
        }
        
        .taskbar-items {
            flex: 1;
            display: flex;
            gap: 4px;
            margin-left: 12px;
        }
        
        .taskbar-item {
            background: rgba(255,255,255,0.1);
            border: 1px solid;
            border-color: rgba(255,255,255,0.3) rgba(0,0,0,0.3) rgba(0,0,0,0.3) rgba(255,255,255,0.3);
            color: var(--dourado);
            padding: 2px 8px;
            cursor: pointer;
            font-size: 10px;
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border-radius: 0;
            height: 22px;
            display: flex;
            align-items: center;
            box-shadow: inset 1px 1px 0 rgba(255,255,255,0.2);
        }
        
        .taskbar-item:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .taskbar-item.active {
            background: rgba(0,0,0,0.2);
            border-color: rgba(0,0,0,0.3) rgba(255,255,255,0.3) rgba(255,255,255,0.3) rgba(0,0,0,0.3);
            box-shadow: inset -1px -1px 0 rgba(255,255,255,0.2);
        }
        
        /* √Årea direita da taskbar */
        .taskbar-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .taskbar-widget {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 2px 6px;
            background: rgba(255,255,255,0.1);
            border: 1px solid;
            border-color: rgba(255,255,255,0.3) rgba(0,0,0,0.3) rgba(0,0,0,0.3) rgba(255,255,255,0.3);
            border-radius: 0;
            cursor: pointer;
            font-size: 10px;
            color: var(--theme-clock);
            text-shadow: 0 0 3px var(--dourado);
            transition: none;
            height: 22px;
            box-shadow: inset 1px 1px 0 rgba(255,255,255,0.2);
        }
        
        .taskbar-widget:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .taskbar-widget:active {
            border-color: rgba(0,0,0,0.3) rgba(255,255,255,0.3) rgba(255,255,255,0.3) rgba(0,0,0,0.3);
            box-shadow: inset -1px -1px 0 rgba(255,255,255,0.2);
        }
        
        .planetary-symbol {
            font-size: 14px;
            animation: planetGlow 3s ease-in-out infinite;
        }
        
        @keyframes planetGlow {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; text-shadow: 0 0 8px var(--dourado); }
        }
        
        .clock {
            color: var(--theme-clock);
            font-size: 11px;
            font-weight: bold;
            text-shadow: 0 0 3px var(--dourado);
        }
        
        .notification-icon, .volume-icon {
            font-size: 14px;
            cursor: pointer;
            padding: 4px;
            border-radius: 3px;
            transition: all 0.1s;
        }
        
        .notification-icon:hover, .volume-icon:hover {
            background: rgba(255,255,255,0.2);
        }
        
        /* Popups */
        .popup {
            position: fixed;
            background: #c0c0c0;
            border: 2px outset #c0c0c0;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            z-index: 2000;
            display: none;
            border-radius: 4px;
        }
        
        .popup.active {
            display: block;
        }
        
        /* Calend√°rio Popup */
        .calendar-popup {
            bottom: 50px;
            right: 10px;
            width: 280px;
            padding: 12px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            font-weight: bold;
        }
        
        .calendar-nav {
            background: #d0d0d0;
            border: 1px outset #d0d0d0;
            cursor: pointer;
            padding: 2px 6px;
            font-size: 10px;
        }
        
        .calendar-nav:hover {
            background: #e0e0e0;
        }
        
        .calendar-nav:active {
            border: 1px inset #d0d0d0;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            text-align: center;
        }
        
        .calendar-day-header {
            font-size: 9px;
            font-weight: bold;
            padding: 4px 2px;
            background: #a0a0a0;
            color: white;
        }
        
        .calendar-day {
            padding: 4px 2px;
            cursor: pointer;
            font-size: 10px;
            border-radius: 2px;
        }
        
        .calendar-day:hover {
            background: #316AC5;
            color: white;
        }
        
        .calendar-day.today {
            background: var(--dourado);
            color: black;
            font-weight: bold;
        }
        
        .calendar-day.other-month {
            color: #808080;
        }
        
        /* Volume Popup */
        .volume-popup {
            bottom: 50px;
            right: 10px;
            width: 200px;
            padding: 12px;
        }
        
        .volume-control {
            margin-bottom: 8px;
        }
        
        .volume-label {
            font-size: 10px;
            margin-bottom: 4px;
            font-weight: bold;
        }
        
        .volume-slider {
            width: 100%;
            height: 4px;
            background: #808080;
            border-radius: 2px;
            cursor: pointer;
            position: relative;
        }
        
        .volume-fill {
            height: 100%;
            background: var(--dourado);
            border-radius: 2px;
            transition: width 0.1s;
        }
        
        .volume-thumb {
            position: absolute;
            top: -4px;
            width: 12px;
            height: 12px;
            background: #c0c0c0;
            border: 1px outset #c0c0c0;
            border-radius: 50%;
            cursor: pointer;
            transform: translateX(-50%);
        }
        
        /* Planetary Info Popup */
        .planetary-popup {
            bottom: 50px;
            right: 10px;
            width: 300px;
            padding: 12px;
        }
        
        .planetary-info {
            text-align: center;
            margin-bottom: 12px;
        }
        
        .planetary-current {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--azul-escuro);
        }
        
        .planetary-time {
            font-size: 10px;
            color: #666;
            margin-bottom: 8px;
        }
        
        .planetary-ruler {
            font-size: 12px;
            color: var(--vinho);
            font-weight: bold;
        }
        
        /* Modal de Personaliza√ß√£o */
        .personalization-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 4000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .personalization-modal.active {
            display: flex;
        }
        
        .personalization-dialog {
            background: #c0c0c0;
            border: 2px outset #c0c0c0;
            width: 600px;
            max-width: 90vw;
            max-height: 80vh;
            overflow-y: auto;
            border-radius: 4px;
        }
        
        .personalization-header {
            background: var(--theme-window-header);
            color: white;
            padding: 8px 12px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .personalization-close {
            background: #ff6b6b;
            color: white;
            border: 1px outset #ff6b6b;
            width: 20px;
            height: 18px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
        }
        
        .personalization-close:hover {
            background: #ff5252;
        }
        
        .personalization-close:active {
            border: 1px inset #ff6b6b;
        }
        
        .personalization-content {
            padding: 16px;
        }
        
        .personalization-section {
            margin-bottom: 20px;
            border: 1px inset #c0c0c0;
            padding: 12px;
        }
        
        .personalization-section h3 {
            margin-bottom: 12px;
            color: var(--azul-escuro);
            font-size: 12px;
        }
        
        .color-palette {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 4px;
            margin-bottom: 12px;
        }
        
        /* Theme Color Picker Styles */
        .theme-color-section {
            margin-bottom: 12px;
        }
        
        .theme-color-title {
            font-size: 10px;
            font-weight: bold;
            color: var(--azul-escuro);
            margin-bottom: 6px;
            padding: 2px 4px;
            background: #e0e0e0;
            border: 1px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
        }
        
        .theme-color-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 4px;
            margin-bottom: 8px;
        }
        
        .theme-color-option {
            width: 32px;
            height: 32px;
            border: 2px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            cursor: pointer;
            box-shadow: inset 1px 1px 0 rgba(255,255,255,0.5);
            position: relative;
        }
        
        .theme-color-option:hover {
            border-color: var(--dourado);
            box-shadow: 0 0 4px var(--dourado);
            transform: scale(1.1);
        }
        
        .theme-color-option:active {
            border-color: #000000 #ffffff #ffffff #000000;
            box-shadow: inset -1px -1px 0 rgba(255,255,255,0.5);
        }
        
        .theme-color-option.selected {
            border: 3px solid var(--dourado);
            box-shadow: 0 0 6px var(--dourado);
        }
        
        .theme-custom-color-section {
            padding: 8px;
            background: #e0e0e0;
            border: 1px solid;
            border-color: #808080 #ffffff #ffffff #808080;
            margin-top: 8px;
        }
        
        .theme-custom-color-label {
            font-size: 10px;
            font-weight: bold;
            margin-bottom: 6px;
            display: block;
        }
        
        .theme-custom-color-input-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .theme-custom-color-input {
            width: 60px;
            height: 32px;
            border: 2px solid;
            border-color: #808080 #ffffff #ffffff #808080;
            cursor: pointer;
            padding: 2px;
        }
        
        .theme-custom-color-input:hover {
            border-color: var(--dourado);
        }
        
        .theme-custom-color-hex {
            flex: 1;
            height: 24px;
            border: 1px solid;
            border-color: #808080 #ffffff #ffffff #808080;
            padding: 4px 6px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            text-transform: uppercase;
        }
        
        .theme-custom-color-apply {
            height: 24px;
            padding: 0 12px;
            background: #c0c0c0;
            border: 1px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            cursor: pointer;
            font-size: 10px;
            box-shadow: inset 1px 1px 0 rgba(255,255,255,0.8);
        }
        
        .theme-custom-color-apply:hover {
            background: #e0e0e0;
        }
        
        .theme-custom-color-apply:active {
            border-color: #000000 #ffffff #ffffff #000000;
            box-shadow: inset -1px -1px 0 rgba(255,255,255,0.8);
        }
        
        .theme-color-preview {
            width: 32px;
            height: 32px;
            border: 2px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            box-shadow: inset 1px 1px 0 rgba(255,255,255,0.5);
        }
        
        .color-option {
            width: 32px;
            height: 32px;
            border: 2px outset #c0c0c0;
            cursor: pointer;
            border-radius: 4px;
            position: relative;
        }
        
        .color-option:hover {
            border: 2px inset #c0c0c0;
        }
        
        .color-option.selected {
            border: 2px solid var(--dourado);
            box-shadow: 0 0 4px var(--dourado);
        }
        
        .wallpaper-section {
            margin-bottom: 12px;
        }
        
        .wallpaper-upload {
            margin-bottom: 8px;
        }
        
        .wallpaper-upload input[type="file"] {
            width: 100%;
            padding: 4px;
            border: 1px inset #c0c0c0;
        }
        
        .wallpaper-presets {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }
        
        .wallpaper-preset {
            height: 60px;
            border: 2px outset #c0c0c0;
            cursor: pointer;
            border-radius: 4px;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .wallpaper-preset:hover {
            border: 2px inset #c0c0c0;
        }
        
        .wallpaper-preset.selected {
            border: 2px solid var(--dourado);
            box-shadow: 0 0 4px var(--dourado);
        }
        
        .personalization-buttons {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
            margin-top: 16px;
            padding-top: 12px;
            border-top: 1px solid #808080;
        }
        
        .personalization-button {
            background: #d0d0d0;
            border: 1px outset #d0d0d0;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 11px;
        }
        
        .personalization-button:hover {
            background: #e0e0e0;
        }
        
        .personalization-button:active {
            border: 1px inset #d0d0d0;
        }
        
        .personalization-button.primary {
            background: var(--azul-escuro);
            color: white;
        }
        
        .personalization-button.primary:hover {
            background: #1a2a4a;
        }
        
        /* Menu Iniciar - Estilo Windows ME */
        .start-menu {
            position: fixed;
            bottom: 30px;
            left: 4px;
            width: 280px;
            background: #c0c0c0;
            border: 2px solid;
            border-color: rgba(255,255,255,0.8) rgba(0,0,0,0.5) rgba(0,0,0,0.5) rgba(255,255,255,0.8);
            box-shadow: 3px 3px 10px rgba(0,0,0,0.5);
            z-index: 2500;
            display: none;
            max-height: 500px;
            overflow-y: auto;
            border-radius: 0;
        }
        
        .start-menu.active {
            display: block;
        }
        
        @keyframes menuSlideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .start-menu-header {
            background: var(--theme-window-header);
            color: white;
            padding: 12px 16px;
            font-weight: bold;
            font-size: 14px;
            border-bottom: 2px solid #808080;
            display: flex;
            align-items: center;
            gap: 10px;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
        }
        
        .start-menu-header .logo {
            font-size: 20px;
            filter: drop-shadow(0 0 5px var(--dourado));
        }
        
        .start-menu-items {
            background: #c0c0c0;
            padding: 8px 0;
        }
        
        .start-menu-item {
            padding: 4px 12px;
            cursor: pointer;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: black;
            transition: none;
            position: relative;
            height: 24px;
        }
        
        .start-menu-item:hover {
            background: #316AC5;
            color: white;
        }
        
        .start-menu-item .icon {
            font-size: 16px;
            min-width: 16px;
            text-align: center;
        }
        
        .start-menu-item .text {
            flex: 1;
            font-weight: normal;
        }
        
        .start-menu-item.premium::after {
            content: '‚ñ∫';
            position: absolute;
            right: 8px;
            font-size: 10px;
            color: black;
        }
        
        .start-menu-item.premium:hover::after {
            color: white;
        }
        
        .start-menu-separator {
            height: 1px;
            background: #808080;
            margin: 2px 4px;
            box-shadow: 0 1px 0 #FFFFFF;
        }
        
        .start-menu-footer {
            background: #d0d0d0;
            padding: 8px 16px;
            border-top: 1px solid #808080;
            font-size: 11px;
            color: #666;
            text-align: center;
        }
        
        /* Janelas - Estilo Windows ME */
        .window {
            position: fixed;
            background: #c0c0c0;
            border: 3px solid var(--azul-escuro);
            min-width: 400px;
            min-height: 300px;
            z-index: 1500;
            display: none;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.5);
            border-radius: 0;
        }
        
        .window.active {
            display: block;
        }
        
        .window.focused {
            z-index: 1600;
            border-color: var(--azul-escuro);
        }
        
        .window:not(.focused) {
            border-color: #808080;
        }
        
        .window-header {
            background: linear-gradient(90deg, var(--theme-window-header) 0%, #1a2a4a 100%);
            color: white;
            padding: 3px 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            font-size: 11px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            height: 20px;
        }
        
        .window:not(.focused) .window-header {
            background: linear-gradient(90deg, #808080 0%, #A0A0A0 100%);
        }
        
        .window-title {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .window-controls {
            display: flex;
            gap: 2px;
        }
        
        .window-control {
            width: 16px;
            height: 14px;
            background: #c0c0c0;
            border: 1px solid;
            border-color: #FFFFFF #000000 #000000 #FFFFFF;
            cursor: pointer;
            font-size: 9px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            color: black;
            box-shadow: inset 1px 1px 0 rgba(255,255,255,0.8);
            margin-left: 2px;
        }
        
        .window-control:hover {
            background: #E0E0E0;
        }
        
        .window-control:active {
            border-color: #000000 #FFFFFF #FFFFFF #000000;
            box-shadow: inset -1px -1px 0 rgba(255,255,255,0.8);
            padding-top: 1px;
            padding-left: 1px;
        }
        
        .window-control.close {
            background: #ff6b6b;
            color: white;
            border-color: #ff8888 #cc0000 #cc0000 #ff8888;
        }
        
        .window-control.close:hover {
            background: #ff5252;
        }
        
        .window-content {
            height: calc(100% - 24px);
            overflow: hidden;
            position: relative;
        }
        
        .window-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            font-size: 12px;
            color: #666;
        }
        
        .loading-spinner {
            width: 32px;
            height: 32px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--azul-escuro);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 12px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .window-resize-handle {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 16px;
            height: 16px;
            cursor: se-resize;
            background: linear-gradient(-45deg, transparent 40%, #808080 40%, #808080 60%, transparent 60%);
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .desktop-icons {
                grid-template-columns: repeat(auto-fit, 60px);
                gap: 15px;
                padding: 15px;
            }
            
            .desktop-icon .icon {
                font-size: 24px;
            }
            
            .desktop-icon .label {
                font-size: 9px;
            }
            
            .taskbar {
                height: 36px;
            }
            
            .desktop {
                height: calc(100vh - 36px);
            }
            
            .start-menu {
                width: 280px;
            }
            
            .personalization-dialog {
                width: 90vw;
            }
        }
        
        @media (max-width: 480px) {
            .desktop-icons {
                grid-template-columns: repeat(auto-fit, 50px);
                gap: 10px;
                padding: 10px;
            }
            
            .desktop-icon .icon {
                font-size: 20px;
            }
            
            .taskbar-right {
                gap: 4px;
            }
            
            .taskbar-widget {
                padding: 2px 4px;
                font-size: 9px;
            }
            
            .start-menu {
                width: 260px;
            }
        }
    </style>
</head>
<body>
    <div class="desktop" id="desktop">
        <div class="desktop-icons" id="desktopIcons">
            <!-- √çcones ser√£o gerados dinamicamente -->
        </div>
    </div>
    
    <!-- Menu de Contexto -->
    <div class="context-menu" id="contextMenu">
        <div class="context-menu-item" onclick="openPersonalization()">
            <span>‚öôÔ∏è</span>
            <span>Personalizar</span>
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" onclick="refreshDesktop()">
            <span>üîÑ</span>
            <span>Atualizar</span>
        </div>
        <div class="context-menu-item" onclick="arrangeIcons()">
            <span>üìê</span>
            <span>Organizar √≠cones</span>
        </div>
    </div>
    
    <!-- Taskbar -->
    <div class="taskbar">
        <button class="start-button" onclick="toggleStartMenu()">
            <span class="start-logo">üåü</span>
            <span>Iniciar</span>
        </button>
        
        <div class="taskbar-items" id="taskbarItems">
            <!-- Itens da taskbar ser√£o adicionados dinamicamente -->
        </div>
        
        <div class="taskbar-right">
            <!-- Widget Planet√°rio -->
            <div class="taskbar-widget" onclick="togglePlanetaryPopup()" title="Hora Planet√°ria Atual">
                <span class="planetary-symbol" id="planetarySymbol">‚òâ</span>
                <span id="planetaryName">Sol</span>
            </div>
            
            <!-- Rel√≥gio e Calend√°rio -->
            <div class="taskbar-widget" onclick="toggleCalendarPopup()" title="Calend√°rio">
                <span class="clock" id="clock">00:00</span>
            </div>
            
            <!-- Notifica√ß√µes -->
            <div class="notification-icon" onclick="toggleNotifications()" title="Central de Notifica√ß√µes">
                üîî
            </div>
            
            <!-- Volume -->
            <div class="volume-icon" onclick="toggleVolumePopup()" title="Controle de Volume">
                üîä
            </div>
        </div>
    </div>
    
    <!-- Menu Iniciar -->
    <div class="start-menu" id="startMenu">
        <div class="start-menu-header">
            <span class="logo">üåü</span>
            <span>Aurora OS ‚Ä¢ MysticSoft</span>
        </div>
        <div class="start-menu-items" id="startMenuItems">
            <!-- Itens do menu ser√£o gerados dinamicamente -->
        </div>
        <div class="start-menu-separator"></div>
        <div class="start-menu-footer">
            Clique em qualquer item para abrir
        </div>
    </div>
    
    <!-- Popup do Calend√°rio -->
    <div class="popup calendar-popup" id="calendarPopup">
        <div class="calendar-header">
            <button class="calendar-nav" onclick="previousMonth()">‚óÄ</button>
            <span id="calendarTitle">Janeiro 2024</span>
            <button class="calendar-nav" onclick="nextMonth()">‚ñ∂</button>
        </div>
        <div class="calendar-grid" id="calendarGrid">
            <!-- Calend√°rio ser√° gerado dinamicamente -->
        </div>
    </div>
    
    <!-- Popup do Volume -->
    <div class="popup volume-popup" id="volumePopup">
        <div class="volume-control">
            <div class="volume-label">Volume Principal</div>
            <div class="volume-slider" onclick="setVolume(event, 'master')">
                <div class="volume-fill" id="masterVolumeFill" style="width: 70%"></div>
                <div class="volume-thumb" id="masterVolumeThumb" style="left: 70%"></div>
            </div>
        </div>
        <div class="volume-control">
            <div class="volume-label">Notifica√ß√µes</div>
            <div class="volume-slider" onclick="setVolume(event, 'notifications')">
                <div class="volume-fill" id="notificationsVolumeFill" style="width: 50%"></div>
                <div class="volume-thumb" id="notificationsVolumeThumb" style="left: 50%"></div>
            </div>
        </div>
        <div class="volume-control">
            <div class="volume-label">Sistema</div>
            <div class="volume-slider" onclick="setVolume(event, 'system')">
                <div class="volume-fill" id="systemVolumeFill" style="width: 60%"></div>
                <div class="volume-thumb" id="systemVolumeThumb" style="left: 60%"></div>
            </div>
        </div>
    </div>
    
    <!-- Popup Planet√°rio -->
    <div class="popup planetary-popup" id="planetaryPopup">
        <div class="planetary-info">
            <div class="planetary-current">
                <span id="currentPlanetSymbol">‚òâ</span>
                <span id="currentPlanetName">Sol</span>
            </div>
            <div class="planetary-time" id="planetaryTime">
                Hora 1 do Dia ‚Ä¢ 06:00 - 07:00
            </div>
            <div class="planetary-ruler">
                Regente do Dia: <span id="dayRuler">Sol</span>
            </div>
        </div>
        <div style="font-size: 10px; color: #666; text-align: center;">
            Sistema baseado nas horas planet√°rias tradicionais
        </div>
    </div>
    
    <!-- Modal de Personaliza√ß√£o -->
    <div class="personalization-modal" id="personalizationModal">
        <div class="personalization-dialog">
            <div class="personalization-header">
                <span>Personaliza√ß√£o do Aurora OS</span>
                <button class="personalization-close" onclick="closePersonalization()">√ó</button>
            </div>
            <div class="personalization-content">
                <div class="personalization-section">
                    <h3>üé® Personaliza√ß√£o de Cores</h3>
                    <p style="font-size: 10px; color: #666; margin-bottom: 12px;">Escolha as cores para cada elemento do sistema</p>
                    
                    <!-- Seletor de Elemento -->
                    <div class="theme-element-selector">
                        <label style="font-weight: bold; font-size: 10px; display: block; margin-bottom: 6px;">Elemento a personalizar:</label>
                        <select id="themeElementSelect" onchange="updateColorPreview()" style="width: 100%; padding: 4px; border: 1px inset #808080; font-size: 11px;">
                            <option value="desktop">üñ•Ô∏è Fundo do Desktop</option>
                            <option value="taskbar">üìä Barra de Tarefas</option>
                            <option value="start-btn">üåü Bot√£o Iniciar</option>
                            <option value="window-header">ü™ü Cabe√ßalho das Janelas</option>
                            <option value="text-color">‚úèÔ∏è Cor do Texto (Destaque)</option>
                            <option value="clock-color">üïê Rel√≥gio e Widgets</option>
                        </select>
                    </div>
                    
                    <!-- Seletor de Cores Completo -->
                    <div class="theme-color-picker" style="margin-top: 12px;">
                        <!-- Cores M√≠sticas -->
                        <div class="theme-color-section">
                            <div class="theme-color-title">üîÆ CORES M√çSTICAS DA AURORA SAGRADA</div>
                            <div class="theme-color-grid" id="themeMysticColors">
                                <!-- Gerado via JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Cores Padr√£o -->
                        <div class="theme-color-section">
                            <div class="theme-color-title">üé® CORES PADR√ÉO</div>
                            <div class="theme-color-grid" id="themeStandardColors">
                                <!-- Gerado via JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Tons de Cinza -->
                        <div class="theme-color-section">
                            <div class="theme-color-title">‚ö´ TONS DE CINZA</div>
                            <div class="theme-color-grid" id="themeGrayColors">
                                <!-- Gerado via JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Seletor Personalizado -->
                        <div class="theme-custom-color-section">
                            <label class="theme-custom-color-label">‚ú® COR PERSONALIZADA</label>
                            <div class="theme-custom-color-input-group">
                                <input type="color" id="themeCustomColorInput" class="theme-custom-color-input" value="#3e0a29">
                                <input type="text" id="themeCustomColorHex" class="theme-custom-color-hex" value="#3E0A29" maxlength="7" placeholder="#000000">
                                <div class="theme-color-preview" id="themeColorPreview" style="background: #3e0a29;"></div>
                                <button class="theme-custom-color-apply" onclick="applyThemeCustomColor()">Aplicar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Preview do Tema -->
                    <div class="theme-preview-section" style="margin-top: 16px; padding: 12px; background: #e0e0e0; border: 1px inset #808080;">
                        <div style="font-weight: bold; font-size: 10px; margin-bottom: 8px;">üëÅÔ∏è PREVIEW</div>
                        <div id="themePreview" style="font-size: 10px; color: #333;">
                            Selecione um elemento e uma cor para visualizar as mudan√ßas
                        </div>
                    </div>
                </div>
                
                <div class="personalization-section">
                    <h3>Papel de Parede</h3>
                    <div class="wallpaper-section">
                        <div class="wallpaper-upload">
                            <input type="file" id="wallpaperUpload" accept="image/*" onchange="uploadWallpaper(event)">
                        </div>
                        <div class="wallpaper-presets" id="wallpaperPresets">
                            <!-- Presets ser√£o gerados dinamicamente -->
                        </div>
                    </div>
                </div>
                
                <div class="personalization-section">
                    <h3>Configura√ß√µes da Taskbar</h3>
                    <label>
                        <input type="checkbox" id="showPlanetaryWidget" checked onchange="togglePlanetaryWidget()">
                        Mostrar widget planet√°rio
                    </label><br>
                    <label>
                        <input type="checkbox" id="showNotifications" checked onchange="toggleNotifications()">
                        Mostrar notifica√ß√µes
                    </label><br>
                    <label>
                        <input type="checkbox" id="showVolumeControl" checked onchange="toggleVolumeControl()">
                        Mostrar controle de volume
                    </label>
                </div>
                
                <div class="personalization-buttons">
                    <button class="personalization-button" onclick="resetPersonalization()">Restaurar Padr√£o</button>
                    <button class="personalization-button primary" onclick="savePersonalization()">Aplicar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configura√ß√£o dos sites/aplicativos
        const sitesConfig = [
            // Sites b√°sicos
            { id: 'google', name: 'Google', url: 'https://google.com', icon: 'üîç', premium: false },
            { id: 'youtube', name: 'YouTube', url: 'https://youtube.com', icon: 'üì∫', premium: false },
            { id: 'github', name: 'GitHub', url: 'https://github.com', icon: 'üíª', premium: false },
            { id: 'spotify', name: 'Spotify', url: 'https://spotify.com', icon: 'üéµ', premium: false },
            
            // Sites premium
            { id: 'mysticsoft', name: 'MysticSoft Portal', url: 'https://wix.com', icon: 'üåü', premium: true },
            { id: 'loja-mistica', name: 'Loja M√≠stica', url: 'https://wix.com', icon: 'üõí', premium: true },
            { id: 'tarot-online', name: 'Tarot Online', url: 'https://tarot.com', icon: 'üîÆ', premium: true },
            { id: 'portal-astrologico', name: 'Portal Astrol√≥gico', url: 'https://astro.com', icon: '‚≠ê', premium: true },
            
            // Aplicativo local
            { id: 'arquivos', name: 'Arquivos & Anota√ß√µes', url: 'local://files', icon: 'üìÅ', premium: false },
            
            // Personaliza√ß√£o
            { id: 'personalizacao', name: 'Personalizar', url: 'local://personalization', icon: 'üé®', premium: false }
        ];
        
        // Configura√ß√£o de cores
        // Cores para o seletor de tema
        const themeMysticColors = [
            '#3e0a29', '#f0aa53', '#0b1836', '#b2d1b1', '#f2eaff', '#8B0000',
            '#4B0082', '#800080', '#FF1493', '#2F4F4F', '#8B4513', '#DAA520'
        ];
        
        const themeStandardColors = [
            '#FF0000', '#DC143C', '#B22222', '#8B0000', '#CD5C5C', '#F08080',
            '#FF8C00', '#FF7F50', '#FF6347', '#FF4500', '#FFA500', '#FFD700',
            '#FFFF00', '#FFD700', '#FFA500', '#F0E68C', '#FFFACD', '#FAFAD2',
            '#00FF00', '#32CD32', '#228B22', '#008000', '#006400', '#90EE90',
            '#0000FF', '#4169E1', '#1E90FF', '#00BFFF', '#87CEEB', '#87CEFA',
            '#800080', '#9370DB', '#8A2BE2', '#9400D3', '#9932CC', '#BA55D3',
            '#FF69B4', '#FF1493', '#C71585', '#DB7093', '#FFB6C1', '#FFC0CB',
            '#8B4513', '#A0522D', '#D2691E', '#CD853F', '#DEB887', '#F4A460',
            '#696969', '#808080', '#A9A9A9', '#C0C0C0', '#D3D3D3', '#DCDCDC'
        ];
        
        const themeGrayColors = [
            '#000000', '#1A1A1A', '#333333', '#4D4D4D', '#666666', '#808080',
            '#999999', '#B3B3B3', '#CCCCCC', '#E0E0E0', '#F0F0F0', '#FFFFFF'
        ];
        
        // Estado do seletor de cores do tema
        let currentThemeElement = 'desktop';
        let currentThemeColors = {};
        
        const colorThemes = [
            { name: 'Aurora Original', primary: '#3e0a29', secondary: '#0b1836', accent: '#f0aa53' },
            { name: 'Noite C√≥smica', primary: '#1a1a2e', secondary: '#16213e', accent: '#e94560' },
            { name: 'Rosa M√≠stico', primary: '#8b1538', secondary: '#2d1b69', accent: '#f39c12' },
            { name: 'Verde Floresta', primary: '#2d5016', secondary: '#1b4332', accent: '#95d5b2' },
            { name: 'Azul Oceano', primary: '#023047', secondary: '#219ebc', accent: '#ffb703' },
            { name: 'Roxo Imperial', primary: '#5a189a', secondary: '#240046', accent: '#ff006e' },
            { name: 'Dourado Real', primary: '#b7410e', secondary: '#6f1d1b', accent: '#ffd60a' },
            { name: 'Prata Lunar', primary: '#495057', secondary: '#212529', accent: '#adb5bd' }
        ];
        
        // Presets de wallpaper
        const wallpaperPresets = [
            { name: 'Aurora Original', gradient: 'linear-gradient(135deg, #0b1836 0%, #3e0a29 100%)' },
            { name: 'Noite Estrelada', gradient: 'linear-gradient(135deg, #000428 0%, #004e92 100%)' },
            { name: 'P√¥r do Sol', gradient: 'linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%)' },
            { name: 'Floresta M√≠stica', gradient: 'linear-gradient(135deg, #134e5e 0%, #71b280 100%)' },
            { name: 'Oceano Profundo', gradient: 'linear-gradient(135deg, #667db6 0%, #0082c8 100%)' },
            { name: 'Rosa Crep√∫sculo', gradient: 'linear-gradient(135deg, #8360c3 0%, #2ebf91 100%)' }
        ];
        
        // S√≠mbolos planet√°rios
        const planetarySymbols = {
            'Sol': '‚òâ',
            'Lua': '‚òΩ',
            'Marte': '‚ôÇ',
            'Merc√∫rio': '‚òø',
            'J√∫piter': '‚ôÉ',
            'V√™nus': '‚ôÄ',
            'Saturno': '‚ôÑ'
        };
        
        // Ordem caldaica dos planetas
        const chaldeanOrder = ['Saturno', 'J√∫piter', 'Marte', 'Sol', 'V√™nus', 'Merc√∫rio', 'Lua'];
        const dayRulers = ['Sol', 'Lua', 'Marte', 'Merc√∫rio', 'J√∫piter', 'V√™nus', 'Saturno']; // Dom, Seg, Ter, Qua, Qui, Sex, S√°b
        
        // Estado do sistema
        let currentTheme = 0;
        let currentWallpaper = 0;
        let openWindows = [];
        let currentDate = new Date();
        let currentPlanetaryHour = { planet: 'Sol', hour: 1, period: 'dia' };
        
        // Volumes do sistema
        let volumes = {
            master: 70,
            notifications: 50,
            system: 60
        };
        
        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            generateDesktopIcons();
            generateStartMenu();
            generateColorPalette();
            generateWallpaperPresets();
            updateClock();
            updatePlanetaryInfo();
            loadPersonalization();
            
            // Atualiza rel√≥gio a cada segundo
            setInterval(updateClock, 1000);
            
            // Atualiza informa√ß√µes planet√°rias a cada minuto
            setInterval(updatePlanetaryInfo, 60000);
            
            // Event listeners
            setupEventListeners();
        });
        
        function setupEventListeners() {
            // Menu de contexto (bot√£o direito)
            document.addEventListener('contextmenu', function(e) {
                // Verificar se clicou no desktop (n√£o em janelas, taskbar ou menus)
                const isDesktop = e.target.classList.contains('desktop') || 
                                 e.target.closest('.desktop-icons') ||
                                 (e.target.closest('.desktop') && !e.target.closest('.window') && 
                                  !e.target.closest('.taskbar') && !e.target.closest('.start-menu'));
                
                if (isDesktop) {
                    e.preventDefault();
                    showContextMenu(e.clientX, e.clientY);
                }
            });
            
            // Fechar menus ao clicar fora
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.context-menu')) {
                    hideContextMenu();
                }
                if (!e.target.closest('.start-menu') && !e.target.closest('.start-button')) {
                    hideStartMenu();
                }
                if (!e.target.closest('.popup')) {
                    hideAllPopups();
                }
            });
            
            // Drag and drop para janelas
            setupWindowDragging();
        }
        
        function generateDesktopIcons() {
            const container = document.getElementById('desktopIcons');
            container.innerHTML = '';
            
            sitesConfig.forEach(site => {
                const icon = document.createElement('div');
                icon.className = `desktop-icon ${site.premium ? 'premium' : ''}`;
                icon.onclick = () => openSite(site);
                
                icon.innerHTML = `
                    <div class="icon">${site.icon}</div>
                    <div class="label">${site.name}</div>
                `;
                
                container.appendChild(icon);
            });
        }
        
        function generateStartMenu() {
            const container = document.getElementById('startMenuItems');
            container.innerHTML = '';
            
            // Separar sites b√°sicos e premium
            const basicSites = sitesConfig.filter(site => !site.premium);
            const premiumSites = sitesConfig.filter(site => site.premium);
            
            // Adicionar sites b√°sicos
            basicSites.forEach(site => {
                const item = document.createElement('div');
                item.className = 'start-menu-item';
                item.onclick = () => openSite(site);
                
                item.innerHTML = `
                    <div class="icon">${site.icon}</div>
                    <div class="text">${site.name}</div>
                `;
                
                container.appendChild(item);
            });
            
            if (premiumSites.length > 0) {
                const separator = document.createElement('div');
                separator.className = 'start-menu-separator';
                container.appendChild(separator);
                
                // Adicionar sites premium
                premiumSites.forEach(site => {
                    const item = document.createElement('div');
                    item.className = 'start-menu-item premium';
                    item.onclick = () => openSite(site);
                    
                    item.innerHTML = `
                        <div class="icon">${site.icon}</div>
                        <div class="text">${site.name}</div>
                    `;
                    
                    container.appendChild(item);
                });
            }
        }
        
        function generateColorPalette() {
            const container = document.getElementById('colorPalette');
            container.innerHTML = '';
            
            colorThemes.forEach((theme, index) => {
                const colorOption = document.createElement('div');
                colorOption.className = `color-option ${index === currentTheme ? 'selected' : ''}`;
                colorOption.style.background = `linear-gradient(45deg, ${theme.primary}, ${theme.secondary})`;
                colorOption.title = theme.name;
                colorOption.onclick = () => selectColorTheme(index);
                
                container.appendChild(colorOption);
            });
        }
        
        function generateWallpaperPresets() {
            const container = document.getElementById('wallpaperPresets');
            container.innerHTML = '';
            
            wallpaperPresets.forEach((preset, index) => {
                const wallpaperOption = document.createElement('div');
                wallpaperOption.className = `wallpaper-preset ${index === currentWallpaper ? 'selected' : ''}`;
                wallpaperOption.style.background = preset.gradient;
                wallpaperOption.title = preset.name;
                wallpaperOption.onclick = () => selectWallpaper(index);
                
                container.appendChild(wallpaperOption);
            });
        }
        
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('pt-BR', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            document.getElementById('clock').textContent = timeString;
        }
        
        function updatePlanetaryInfo() {
            const now = new Date();
            const dayOfWeek = now.getDay();
            const hour = now.getHours();
            
            // Calcular hora planet√°ria (simplificado)
            const dayRuler = dayRulers[dayOfWeek];
            const rulerIndex = chaldeanOrder.indexOf(dayRuler);
            const planetIndex = (rulerIndex + hour) % 7;
            const currentPlanet = chaldeanOrder[planetIndex];
            
            // Atualizar interface
            const symbol = planetarySymbols[currentPlanet];
            document.getElementById('planetarySymbol').textContent = symbol;
            document.getElementById('planetaryName').textContent = currentPlanet;
            document.getElementById('currentPlanetSymbol').textContent = symbol;
            document.getElementById('currentPlanetName').textContent = currentPlanet;
            document.getElementById('dayRuler').textContent = dayRuler;
            
            // Determinar per√≠odo (dia/noite) - simplificado
            const period = (hour >= 6 && hour < 18) ? 'dia' : 'noite';
            const hourInPeriod = period === 'dia' ? hour - 5 : (hour >= 18 ? hour - 17 : hour + 7);
            
            document.getElementById('planetaryTime').textContent = 
                `Hora ${hourInPeriod} do ${period === 'dia' ? 'Dia' : 'Noite'} ‚Ä¢ ${hour}:00 - ${(hour + 1) % 24}:00`;
            
            currentPlanetaryHour = { planet: currentPlanet, hour: hourInPeriod, period };
        }
        
        function openSite(site) {
            if (site.url === 'local://files') {
                // Abrir aplicativo local de arquivos
                openLocalFilesApp();
            } else {
                // Abrir site em janela
                openWebsite(site);
            }
            hideStartMenu();
        }
        
        function openWebsite(site) {
            // Verificar se √© a personaliza√ß√£o
            if (site.url === 'local://personalization') {
                openPersonalization();
                return;
            }
            
            // Verificar se √© arquivos locais
            if (site.url === 'local://files') {
                openLocalFilesApp();
                return;
            }
            
            const windowId = `window-${site.id}`;
            
            // Verificar se janela j√° est√° aberta
            if (document.getElementById(windowId)) {
                focusWindow(windowId);
                return;
            }
            
            const window = document.createElement('div');
            window.id = windowId;
            window.className = 'window active focused';
            window.style.left = `${100 + openWindows.length * 30}px`;
            window.style.top = `${50 + openWindows.length * 30}px`;
            window.style.width = '800px';
            window.style.height = '600px';
            
            window.innerHTML = `
                <div class="window-header">
                    <div class="window-title">
                        <span>${site.icon}</span>
                        <span>${site.name}</span>
                    </div>
                    <div class="window-controls">
                        <div class="window-control" onclick="minimizeWindow('${windowId}')">_</div>
                        <div class="window-control" onclick="maximizeWindow('${windowId}')">‚ñ°</div>
                        <div class="window-control close" onclick="closeWindow('${windowId}')">√ó</div>
                    </div>
                </div>
                <div class="window-content">
                    <div class="loading-overlay" id="loading-${site.id}">
                        <div class="loading-spinner"></div>
                        <div>Carregando ${site.name}...</div>
                    </div>
                    <iframe class="window-iframe" src="${site.url}" onload="hideLoading('${site.id}')"></iframe>
                </div>
                <div class="window-resize-handle"></div>
            `;
            
            document.body.appendChild(window);
            openWindows.push({ id: windowId, title: site.name, icon: site.icon });
            updateTaskbar();
            
            // Remover loading ap√≥s 3 segundos (fallback)
            setTimeout(() => hideLoading(site.id), 3000);
        }
        
        function openLocalFilesApp() {
            const windowId = 'window-files';
            
            if (document.getElementById(windowId)) {
                focusWindow(windowId);
                return;
            }
            
            const window = document.createElement('div');
            window.id = windowId;
            window.className = 'window active focused';
            window.style.left = '150px';
            window.style.top = '100px';
            window.style.width = '700px';
            window.style.height = '500px';
            
            window.innerHTML = `
                <div class="window-header">
                    <div class="window-title">
                        <span>üìÅ</span>
                        <span>Arquivos & Anota√ß√µes</span>
                    </div>
                    <div class="window-controls">
                        <div class="window-control" onclick="minimizeWindow('${windowId}')">_</div>
                        <div class="window-control" onclick="maximizeWindow('${windowId}')">‚ñ°</div>
                        <div class="window-control close" onclick="closeWindow('${windowId}')">√ó</div>
                    </div>
                </div>
                <div class="window-content">
                    <div style="padding: 20px; text-align: center; color: #666;">
                        <h3>Gerenciador de Arquivos</h3>
                        <p>Sistema de arquivos em desenvolvimento...</p>
                        <br>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 30px;">
                            <div style="padding: 20px; border: 1px solid #ccc; border-radius: 8px;">
                                <div style="font-size: 32px; margin-bottom: 10px;">üìÑ</div>
                                <div>Documentos</div>
                            </div>
                            <div style="padding: 20px; border: 1px solid #ccc; border-radius: 8px;">
                                <div style="font-size: 32px; margin-bottom: 10px;">üñºÔ∏è</div>
                                <div>Imagens</div>
                            </div>
                            <div style="padding: 20px; border: 1px solid #ccc; border-radius: 8px;">
                                <div style="font-size: 32px; margin-bottom: 10px;">üéµ</div>
                                <div>√Åudios</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="window-resize-handle"></div>
            `;
            
            document.body.appendChild(window);
            openWindows.push({ id: windowId, title: 'Arquivos & Anota√ß√µes', icon: 'üìÅ' });
            updateTaskbar();
        }
        
        function hideLoading(siteId) {
            const loading = document.getElementById(`loading-${siteId}`);
            if (loading) {
                loading.style.display = 'none';
            }
        }
        
        function closeWindow(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                window.remove();
                openWindows = openWindows.filter(w => w.id !== windowId);
                updateTaskbar();
            }
        }
        
        function minimizeWindow(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                window.style.display = 'none';
            }
        }
        
        function maximizeWindow(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                if (window.style.width === '100vw') {
                    // Restaurar
                    window.style.width = '800px';
                    window.style.height = '600px';
                    window.style.left = '100px';
                    window.style.top = '50px';
                } else {
                    // Maximizar
                    window.style.width = '100vw';
                    window.style.height = 'calc(100vh - 40px)';
                    window.style.left = '0';
                    window.style.top = '0';
                }
            }
        }
        
        function focusWindow(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                window.style.display = 'block';
                window.style.zIndex = '1600';
                
                // Remover foco de outras janelas
                document.querySelectorAll('.window').forEach(w => {
                    if (w.id !== windowId) {
                        w.style.zIndex = '1500';
                    }
                });
            }
        }
        
        function updateTaskbar() {
            const container = document.getElementById('taskbarItems');
            container.innerHTML = '';
            
            openWindows.forEach(window => {
                const item = document.createElement('div');
                item.className = 'taskbar-item';
                item.onclick = () => focusWindow(window.id);
                item.innerHTML = `${window.icon} ${window.title}`;
                container.appendChild(item);
            });
        }
        
        function setupWindowDragging() {
            // Implementa√ß√£o simplificada do drag de janelas
            let isDragging = false;
            let currentWindow = null;
            let offset = { x: 0, y: 0 };
            
            document.addEventListener('mousedown', function(e) {
                const header = e.target.closest('.window-header');
                if (header && !e.target.closest('.window-control')) {
                    isDragging = true;
                    currentWindow = header.closest('.window');
                    const rect = currentWindow.getBoundingClientRect();
                    offset.x = e.clientX - rect.left;
                    offset.y = e.clientY - rect.top;
                    e.preventDefault();
                }
            });
            
            document.addEventListener('mousemove', function(e) {
                if (isDragging && currentWindow) {
                    currentWindow.style.left = (e.clientX - offset.x) + 'px';
                    currentWindow.style.top = (e.clientY - offset.y) + 'px';
                }
            });
            
            document.addEventListener('mouseup', function() {
                isDragging = false;
                currentWindow = null;
            });
        }
        
        // Fun√ß√µes do menu de contexto
        function showContextMenu(x, y) {
            const menu = document.getElementById('contextMenu');
            menu.style.display = 'block';
            menu.style.left = x + 'px';
            menu.style.top = y + 'px';
        }
        
        function hideContextMenu() {
            document.getElementById('contextMenu').style.display = 'none';
        }
        
        function refreshDesktop() {
            location.reload();
            hideContextMenu();
        }
        
        function arrangeIcons() {
            // Reorganizar √≠cones automaticamente
            generateDesktopIcons();
            hideContextMenu();
        }
        
        // Fun√ß√µes do menu iniciar
        function toggleStartMenu() {
            const menu = document.getElementById('startMenu');
            menu.classList.toggle('active');
        }
        
        function hideStartMenu() {
            document.getElementById('startMenu').classList.remove('active');
        }
        
        // Fun√ß√µes dos popups
        function toggleCalendarPopup() {
            const popup = document.getElementById('calendarPopup');
            hideAllPopups();
            popup.classList.toggle('active');
            if (popup.classList.contains('active')) {
                generateCalendar();
            }
        }
        
        function toggleVolumePopup() {
            const popup = document.getElementById('volumePopup');
            hideAllPopups();
            popup.classList.toggle('active');
        }
        
        function togglePlanetaryPopup() {
            const popup = document.getElementById('planetaryPopup');
            hideAllPopups();
            popup.classList.toggle('active');
        }
        
        function toggleNotifications() {
            // Implementar sistema de notifica√ß√µes
            console.log('Sistema de notifica√ß√µes em desenvolvimento');
        }
        
        function hideAllPopups() {
            document.querySelectorAll('.popup').forEach(popup => {
                popup.classList.remove('active');
            });
        }
        
        // Fun√ß√µes do calend√°rio
        function generateCalendar() {
            const grid = document.getElementById('calendarGrid');
            const title = document.getElementById('calendarTitle');
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            title.textContent = currentDate.toLocaleDateString('pt-BR', { 
                month: 'long', 
                year: 'numeric' 
            });
            
            grid.innerHTML = '';
            
            // Cabe√ßalhos dos dias da semana
            const dayHeaders = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b'];
            dayHeaders.forEach(day => {
                const header = document.createElement('div');
                header.className = 'calendar-day-header';
                header.textContent = day;
                grid.appendChild(header);
            });
            
            // Primeiro dia do m√™s e √∫ltimo dia
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const today = new Date();
            
            // Dias vazios no in√≠cio
            for (let i = 0; i < firstDay.getDay(); i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day other-month';
                grid.appendChild(emptyDay);
            }
            
            // Dias do m√™s
            for (let day = 1; day <= lastDay.getDate(); day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;
                
                // Marcar dia atual
                if (year === today.getFullYear() && 
                    month === today.getMonth() && 
                    day === today.getDate()) {
                    dayElement.classList.add('today');
                }
                
                grid.appendChild(dayElement);
            }
        }
        
        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateCalendar();
        }
        
        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateCalendar();
        }
        
        // Fun√ß√µes de volume
        function setVolume(event, type) {
            const slider = event.currentTarget;
            const rect = slider.getBoundingClientRect();
            const percentage = ((event.clientX - rect.left) / rect.width) * 100;
            const clampedPercentage = Math.max(0, Math.min(100, percentage));
            
            volumes[type] = clampedPercentage;
            
            const fill = document.getElementById(`${type}VolumeFill`);
            const thumb = document.getElementById(`${type}VolumeThumb`);
            
            fill.style.width = clampedPercentage + '%';
            thumb.style.left = clampedPercentage + '%';
        }
        
        // Fun√ß√µes de personaliza√ß√£o
        function openPersonalization() {
            document.getElementById('personalizationModal').classList.add('active');
            hideContextMenu();
            generateThemeColorPicker();
        }
        
        function closePersonalization() {
            document.getElementById('personalizationModal').classList.remove('active');
        }
        
        function selectColorTheme(index) {
            currentTheme = index;
            applyColorTheme();
            
            // Atualizar sele√ß√£o visual
            document.querySelectorAll('.color-option').forEach((option, i) => {
                option.classList.toggle('selected', i === index);
            });
        }
        
        function selectWallpaper(index) {
            currentWallpaper = index;
            applyWallpaper();
            
            // Atualizar sele√ß√£o visual
            document.querySelectorAll('.wallpaper-preset').forEach((preset, i) => {
                preset.classList.toggle('selected', i === index);
            });
        }
        
        function applyColorTheme() {
            const theme = colorThemes[currentTheme];
            const root = document.documentElement;
            
            root.style.setProperty('--vinho', theme.primary);
            root.style.setProperty('--azul-escuro', theme.secondary);
            root.style.setProperty('--dourado', theme.accent);
            root.style.setProperty('--theme-taskbar', theme.primary);
            root.style.setProperty('--theme-start-btn', theme.primary);
            root.style.setProperty('--theme-start-text', theme.accent);
            root.style.setProperty('--theme-clock', theme.accent);
            root.style.setProperty('--theme-window-header', theme.secondary);
        }
        
        function applyWallpaper() {
            const wallpaper = wallpaperPresets[currentWallpaper];
            const root = document.documentElement;
            
            root.style.setProperty('--theme-bg', wallpaper.gradient);
            document.body.style.background = wallpaper.gradient;
            document.querySelector('.desktop').style.background = wallpaper.gradient;
        }
        
        function uploadWallpaper(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imageUrl = e.target.result;
                    document.body.style.backgroundImage = `url(${imageUrl})`;
                    document.body.style.backgroundSize = 'cover';
                    document.body.style.backgroundPosition = 'center';
                    document.querySelector('.desktop').style.backgroundImage = `url(${imageUrl})`;
                    document.querySelector('.desktop').style.backgroundSize = 'cover';
                    document.querySelector('.desktop').style.backgroundPosition = 'center';
                };
                reader.readAsDataURL(file);
            }
        }
        
        function togglePlanetaryWidget() {
            const widget = document.querySelector('.taskbar-widget');
            const checkbox = document.getElementById('showPlanetaryWidget');
            widget.style.display = checkbox.checked ? 'flex' : 'none';
        }
        
        function toggleNotifications() {
            const icon = document.querySelector('.notification-icon');
            const checkbox = document.getElementById('showNotifications');
            icon.style.display = checkbox.checked ? 'block' : 'none';
        }
        
        function toggleVolumeControl() {
            const icon = document.querySelector('.volume-icon');
            const checkbox = document.getElementById('showVolumeControl');
            icon.style.display = checkbox.checked ? 'block' : 'none';
        }
        
        // Fun√ß√µes do seletor de cores do tema
        function generateThemeColorPicker() {
            // Cores M√≠sticas
            const mysticGrid = document.getElementById('themeMysticColors');
            if (mysticGrid) {
                mysticGrid.innerHTML = '';
                themeMysticColors.forEach(color => {
                    const button = document.createElement('div');
                    button.className = 'theme-color-option';
                    button.style.background = color;
                    button.title = color.toUpperCase();
                    button.onclick = () => applyThemeColor(color);
                    mysticGrid.appendChild(button);
                });
            }
            
            // Cores Padr√£o
            const standardGrid = document.getElementById('themeStandardColors');
            if (standardGrid) {
                standardGrid.innerHTML = '';
                themeStandardColors.forEach(color => {
                    const button = document.createElement('div');
                    button.className = 'theme-color-option';
                    button.style.background = color;
                    button.title = color.toUpperCase();
                    button.onclick = () => applyThemeColor(color);
                    standardGrid.appendChild(button);
                });
            }
            
            // Tons de Cinza
            const grayGrid = document.getElementById('themeGrayColors');
            if (grayGrid) {
                grayGrid.innerHTML = '';
                themeGrayColors.forEach(color => {
                    const button = document.createElement('div');
                    button.className = 'theme-color-option';
                    button.style.background = color;
                    button.title = color.toUpperCase();
                    button.onclick = () => applyThemeColor(color);
                    grayGrid.appendChild(button);
                });
            }
            
            // Sincronizar color picker nativo com preview
            const customInput = document.getElementById('themeCustomColorInput');
            const hexInput = document.getElementById('themeCustomColorHex');
            const preview = document.getElementById('themeColorPreview');
            
            if (customInput && hexInput && preview) {
                customInput.addEventListener('input', function() {
                    const color = this.value.toUpperCase();
                    hexInput.value = color;
                    preview.style.background = color;
                });
                
                hexInput.addEventListener('input', function() {
                    let value = this.value.trim();
                    if (!value.startsWith('#')) {
                        value = '#' + value;
                    }
                    if (/^#[0-9A-Fa-f]{6}$/.test(value)) {
                        customInput.value = value;
                        preview.style.background = value;
                    }
                });
            }
        }
        
        function applyThemeColor(color) {
            const element = document.getElementById('themeElementSelect').value;
            currentThemeElement = element;
            
            const root = document.documentElement;
            
            switch(element) {
                case 'desktop':
                    root.style.setProperty('--theme-bg', `linear-gradient(135deg, ${color} 0%, #000000 100%)`);
                    document.body.style.background = `linear-gradient(135deg, ${color} 0%, #000000 100%)`;
                    document.querySelector('.desktop').style.background = `linear-gradient(135deg, ${color} 0%, #000000 100%)`;
                    updatePreview(`Fundo do Desktop alterado para ${color}`);
                    break;
                case 'taskbar':
                    root.style.setProperty('--theme-taskbar', color);
                    root.style.setProperty('--vinho', color);
                    updatePreview(`Barra de Tarefas alterada para ${color}`);
                    break;
                case 'start-btn':
                    root.style.setProperty('--theme-start-btn', color);
                    updatePreview(`Bot√£o Iniciar alterado para ${color}`);
                    break;
                case 'window-header':
                    root.style.setProperty('--theme-window-header', color);
                    root.style.setProperty('--azul-escuro', color);
                    updatePreview(`Cabe√ßalho das Janelas alterado para ${color}`);
                    break;
                case 'text-color':
                    root.style.setProperty('--theme-start-text', color);
                    updatePreview(`Cor do Texto (Destaque) alterada para ${color}`);
                    break;
                case 'clock-color':
                    root.style.setProperty('--theme-clock', color);
                    root.style.setProperty('--dourado', color);
                    updatePreview(`Rel√≥gio e Widgets alterados para ${color}`);
                    break;
            }
            
            // Salvar no estado
            currentThemeColors[element] = color;
        }
        
        function applyThemeCustomColor() {
            const hexInput = document.getElementById('themeCustomColorHex');
            let color = hexInput.value.trim();
            
            if (!color.startsWith('#')) {
                color = '#' + color;
            }
            
            if (/^#[0-9A-Fa-f]{6}$/.test(color)) {
                applyThemeColor(color);
            } else {
                alert('‚ö†Ô∏è Cor inv√°lida! Use o formato #000000');
            }
        }
        
        function updateColorPreview() {
            const element = document.getElementById('themeElementSelect').value;
            currentThemeElement = element;
            
            const elementNames = {
                'desktop': 'üñ•Ô∏è Fundo do Desktop',
                'taskbar': 'üìä Barra de Tarefas',
                'start-btn': 'üåü Bot√£o Iniciar',
                'window-header': 'ü™ü Cabe√ßalho das Janelas',
                'text-color': '‚úèÔ∏è Cor do Texto (Destaque)',
                'clock-color': 'üïê Rel√≥gio e Widgets'
            };
            
            updatePreview(`Selecione uma cor para ${elementNames[element]}`);
        }
        
        function updatePreview(message) {
            const preview = document.getElementById('themePreview');
            if (preview) {
                preview.textContent = message;
            }
        }
        
        function savePersonalization() {
            const settings = {
                theme: currentTheme,
                wallpaper: currentWallpaper,
                showPlanetaryWidget: document.getElementById('showPlanetaryWidget').checked,
                showNotifications: document.getElementById('showNotifications').checked,
                showVolumeControl: document.getElementById('showVolumeControl').checked,
                volumes: volumes
            };
            
            localStorage.setItem('auroraOS_settings', JSON.stringify(settings));
            closePersonalization();
            
            // Mostrar notifica√ß√£o de sucesso
            console.log('Configura√ß√µes salvas com sucesso!');
        }
        
        function loadPersonalization() {
            const saved = localStorage.getItem('auroraOS_settings');
            if (saved) {
                const settings = JSON.parse(saved);
                
                currentTheme = settings.theme || 0;
                currentWallpaper = settings.wallpaper || 0;
                volumes = settings.volumes || volumes;
                
                applyColorTheme();
                applyWallpaper();
                
                // Aplicar configura√ß√µes de widgets
                if (settings.showPlanetaryWidget !== undefined) {
                    document.getElementById('showPlanetaryWidget').checked = settings.showPlanetaryWidget;
                    togglePlanetaryWidget();
                }
                
                if (settings.showNotifications !== undefined) {
                    document.getElementById('showNotifications').checked = settings.showNotifications;
                    toggleNotifications();
                }
                
                if (settings.showVolumeControl !== undefined) {
                    document.getElementById('showVolumeControl').checked = settings.showVolumeControl;
                    toggleVolumeControl();
                }
            }
        }
        
        function resetPersonalization() {
            localStorage.removeItem('auroraOS_settings');
            currentTheme = 0;
            currentWallpaper = 0;
            volumes = { master: 70, notifications: 50, system: 60 };
            
            applyColorTheme();
            applyWallpaper();
            
            // Resetar checkboxes
            document.getElementById('showPlanetaryWidget').checked = true;
            document.getElementById('showNotifications').checked = true;
            document.getElementById('showVolumeControl').checked = true;
            
            togglePlanetaryWidget();
            toggleNotifications();
            toggleVolumeControl();
            
            // Atualizar sele√ß√µes visuais
            generateColorPalette();
            generateWallpaperPresets();
        }
    </script>
</body>
</html>

